/*

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2015 Mozilla Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(m,k,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");m!=Array.prototype&&m!=Object.prototype&&(m[k]=g.value)};$jscomp.getGlobal=function(m){return"undefined"!=typeof window&&window===m?m:"undefined"!=typeof global&&null!=global?global:m};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(m){return $jscomp.SYMBOL_PREFIX+(m||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var m=$jscomp.global.Symbol.iterator;m||(m=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[m]&&$jscomp.defineProperty(Array.prototype,m,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(m){var k=0;return $jscomp.iteratorPrototype(function(){return k<m.length?{done:!1,value:m[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(m){$jscomp.initSymbolIterator();m={next:m};m[$jscomp.global.Symbol.iterator]=function(){return this};return m};$jscomp.makeIterator=function(m){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var k=m[Symbol.iterator];return k?k.call(m):$jscomp.arrayIterator(m)};$jscomp.arrayFromIterator=function(m){for(var k,g=[];!(k=m.next()).done;)g.push(k.value);return g};$jscomp.arrayFromIterable=function(m){return m instanceof Array?m:$jscomp.arrayFromIterator($jscomp.makeIterator(m))};
$jscomp.owns=function(m,k){return Object.prototype.hasOwnProperty.call(m,k)};$jscomp.polyfill=function(m,k,g,e){if(k){g=$jscomp.global;m=m.split(".");for(e=0;e<m.length-1;e++){var c=m[e];c in g||(g[c]={});g=g[c]}m=m[m.length-1];e=g[m];k=k(e);k!=e&&null!=k&&$jscomp.defineProperty(g,m,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("WeakMap",function(m){function k(a){$jscomp.owns(a,e)||$jscomp.defineProperty(a,e,{value:{}})}function g(a){var b=Object[a];b&&(Object[a]=function(a){k(a);return b(a)})}if(function(){if(!m||!Object.seal)return!1;try{var a=Object.seal({}),d=Object.seal({}),c=new m([[a,2],[d,3]]);if(2!=c.get(a)||3!=c.get(d))return!1;c.delete(a);c.set(d,4);return!c.has(a)&&4==c.get(d)}catch(f){return!1}}())return m;var e="$jscomp_hidden_"+Math.random().toString().substring(2);g("freeze");g("preventExtensions");
g("seal");var c=0,a=function(a){this.id_=(c+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};a.prototype.set=function(a,d){k(a);if(!$jscomp.owns(a,e))throw Error("WeakMap key fail: "+a);a[e][this.id_]=d;return this};a.prototype.get=function(a){return $jscomp.owns(a,e)?a[e][this.id_]:void 0};a.prototype.has=function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)};a.prototype.delete=
function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)?delete a[e][this.id_]:!1};return a},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(m){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!m||!m.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new m($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var c=b.entries(),l=c.next();if(l.done||l.value[0]!=a||"s"!=l.value[1])return!1;l=c.next();return l.done||4!=l.value[0].x||"t"!=l.value[1]||!c.next().done?!1:!0}catch(n){return!1}}())return m;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var k=new WeakMap,g=function(b){this.data_={};this.head_=a();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var d;!(d=b.next()).done;)d=d.value,this.set(d[0],d[1])}};g.prototype.set=function(a,b){var d=e(this,a);d.list||(d.list=this.data_[d.id]=[]);d.entry?d.entry.value=b:(d.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},d.list.push(d.entry),this.head_.previous.next=d.entry,this.head_.previous=d.entry,this.size++);return this};g.prototype.delete=
function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};g.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=a();this.size=0};g.prototype.has=function(a){return!!e(this,a).entry};g.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};g.prototype.entries=function(){return c(this,function(a){return[a.key,
a.value]})};g.prototype.keys=function(){return c(this,function(a){return a.key})};g.prototype.values=function(){return c(this,function(a){return a.value})};g.prototype.forEach=function(a,b){for(var d=this.entries(),c;!(c=d.next()).done;)c=c.value,a.call(b,c[1],c[0],this)};g.prototype[Symbol.iterator]=g.prototype.entries;var e=function(a,c){var d;d=c&&typeof c;"object"==d||"function"==d?k.has(c)?d=k.get(c):(d=""+ ++b,k.set(c,d)):d="p_"+c;var h=a.data_[d];if(h&&$jscomp.owns(a.data_,d))for(a=0;a<h.length;a++){var n=
h[a];if(c!==c&&n.key!==n.key||c===n.key)return{id:d,list:h,index:a,entry:n}}return{id:d,list:h,index:-1,entry:void 0}},c=function(a,b){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:b(d)};d=null}return{done:!0,value:void 0}})},a=function(){var a={};return a.previous=a.next=a.head=a},b=0;return g},"es6-impl","es3");$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(m,k){$jscomp.initSymbolIterator();m instanceof String&&(m+="");var g=0,e={next:function(){if(g<m.length){var c=g++;return{value:k(c,m[c]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(m){return m?m:function(){return $jscomp.iteratorFromArray(this,function(k){return k})}},"es6-impl","es3");$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;
$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(m){function k(){this.batch_=null}if(m&&!$jscomp.FORCE_POLYFILL_PROMISE)return m;k.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};k.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=$jscomp.global.setTimeout;k.prototype.asyncExecuteFunction=function(a){g(a,0)};k.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];delete a[b];try{d()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};k.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(d){b.reject(d)}};e.prototype.createResolveAndReject_=function(){function a(a){return function(c){d||(d=!0,a.call(b,c))}}var b=this,d=
!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{var b;a:switch(typeof a){case "object":b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(d){this.reject_(d);return}"function"==
typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),
a[b]=null;this.onSettledCallbacks_=null}};var c=new k;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(h){d.reject(h)}};e.prototype.then=function(a,b){function d(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(w){f(w)}}:b}var c,f,l=new e(function(a,b){c=a;f=b});this.callWhenSettled_(d(a,c),
d(b,f));return l};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function d(){switch(h.state_){case 1:a(h.result_);break;case 2:b(h.result_);break;default:throw Error("Unexpected state: "+h.state_);}}var h=this;null==this.onSettledCallbacks_?c.asyncExecute(d):this.onSettledCallbacks_.push(function(){c.asyncExecute(d)})};e.resolve=function(a){return a instanceof e?a:new e(function(b,d){b(a)})};e.reject=function(a){return new e(function(b,d){d(a)})};
e.race=function(a){return new e(function(b,d){for(var c=$jscomp.makeIterator(a),f=c.next();!f.done;f=c.next())e.resolve(f.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?e.resolve([]):new e(function(a,c){function h(b){return function(d){f[b]=d;v--;0==v&&a(f)}}var f=[],v=0;do f.push(void 0),v++,e.resolve(d.value).callWhenSettled_(h(f.length-1),c),d=b.next();while(!d.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(e.$jscomp$new$AsyncExecutor=function(){return new k});
return e},"es6-impl","es3");$jscomp.polyfill("Number.isNaN",function(m){return m?m:function(k){return"number"===typeof k&&isNaN(k)}},"es6-impl","es3");$jscomp.polyfill("Number.isFinite",function(m){return m?m:function(k){return"number"!==typeof k?!1:!isNaN(k)&&Infinity!==k&&-Infinity!==k}},"es6-impl","es3");$jscomp.polyfill("Number.isInteger",function(m){return m?m:function(k){return Number.isFinite(k)?k===Math.floor(k):!1}},"es6-impl","es3");
$jscomp.polyfill("Array.from",function(m){return m?m:function(k,g,e){$jscomp.initSymbolIterator();g=null!=g?g:function(a){return a};var c=[],a=k[Symbol.iterator];if("function"==typeof a)for(k=a.call(k);!(a=k.next()).done;)c.push(g.call(e,a.value));else for(var a=k.length,b=0;b<a;b++)c.push(g.call(e,k[b]));return c}},"es6-impl","es3");
$jscomp.checkStringArgs=function(m,k,g){if(null==m)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return m+""};
$jscomp.polyfill("String.prototype.startsWith",function(m){return m?m:function(k,g){var e=$jscomp.checkStringArgs(this,k,"startsWith");k+="";var c=e.length,a=k.length;g=Math.max(0,Math.min(g|0,e.length));for(var b=0;b<a&&g<c;)if(e[g++]!=k[b++])return!1;return b>=a}},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.polyfill("Set",function(m){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!m||!m.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),e=new m($jscomp.makeIterator([g]));if(!e.has(g)||1!=e.size||e.add(g)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var c=e.entries(),a=c.next();if(a.done||a.value[0]!=g||a.value[1]!=g)return!1;a=c.next();return a.done||a.value[0]==g||4!=a.value[0].x||a.value[1]!=a.value[0]?!1:c.next().done}catch(b){return!1}}())return m;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var k=function(g){this.map_=new Map;if(g){g=$jscomp.makeIterator(g);for(var e;!(e=g.next()).done;)this.add(e.value)}this.size=this.map_.size};k.prototype.add=function(g){this.map_.set(g,g);this.size=this.map_.size;return this};k.prototype.delete=function(g){g=this.map_.delete(g);this.size=this.map_.size;return g};k.prototype.clear=function(){this.map_.clear();this.size=0};k.prototype.has=function(g){return this.map_.has(g)};k.prototype.entries=function(){return this.map_.entries()};
k.prototype.values=function(){return this.map_.values()};k.prototype.keys=k.prototype.values;k.prototype[Symbol.iterator]=k.prototype.values;k.prototype.forEach=function(g,e){var c=this;this.map_.forEach(function(a){return g.call(e,a,a,c)})};return k},"es6-impl","es3");$jscomp.polyfill("Math.log2",function(m){return m?m:function(k){return Math.log(k)/Math.LN2}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.repeat",function(m){return m?m:function(k){var g=$jscomp.checkStringArgs(this,null,"repeat");if(0>k||1342177279<k)throw new RangeError("Invalid count value");k|=0;for(var e="";k;)if(k&1&&(e+=g),k>>>=1)g+=g;return e}},"es6-impl","es3");$jscomp.findInternal=function(m,k,g){m instanceof String&&(m=String(m));for(var e=m.length,c=0;c<e;c++){var a=m[c];if(k.call(g,a,c,m))return{i:c,v:a}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(m){return m?m:function(k,g){return $jscomp.findInternal(this,k,g).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.entries",function(m){return m?m:function(){return $jscomp.iteratorFromArray(this,function(k,g){return[k,g]})}},"es6-impl","es3");$jscomp.polyfill("Object.assign",function(m){return m?m:function(k,g){for(var e=1;e<arguments.length;e++){var c=arguments[e];if(c)for(var a in c)$jscomp.owns(c,a)&&(k[a]=c[a])}return k}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(m){return m?m:function(){return $jscomp.iteratorFromArray(this,function(k,g){return g})}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(m){return m?m:function(k,g,e){var c=this.length||0;0>g&&(g=Math.max(0,c+g));if(null==e||e>c)e=c;e=Number(e);0>e&&(e=Math.max(0,c+e));for(g=Number(g||0);g<e;g++)this[g]=k;return this}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.copyWithin",function(m){return m?m:function(k,g,e){var c=this.length;k=Number(k);g=Number(g);e=Number(null!=e?e:c);if(k<g)for(e=Math.min(e,c);g<e;)g in this?this[k++]=this[g++]:(delete this[k++],g++);else for(e=Math.min(e,c+g-k),k+=e-g;e>g;)--e in this?this[--k]=this[e]:delete this[k];return this}},"es6-impl","es3");
(function(m){function k(e){if(g[e])return g[e].exports;var c=g[e]={i:e,l:!1,exports:{}};m[e].call(c.exports,c,c.exports,k);c.l=!0;return c.exports}var g={};k.m=m;k.c=g;k.i=function(e){return e};k.d=function(e,c,a){k.o(e,c)||Object.defineProperty(e,c,{configurable:!1,enumerable:!0,get:a})};k.n=function(e){var c=e&&e.__esModule?function(){return e["default"]}:function(){return e};k.d(c,"a",c);return c};k.o=function(e,c){return Object.prototype.hasOwnProperty.call(e,c)};k.p="";return k(k.s=108)})([function(m,
k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){n.set(a,b)}function d(a,b,d){d=void 0===d?{}:d;null!=b&&a.initializeSharedObject(b,d.id)}var h=g(14);m=g(25);k.d=b;k.c=function(a,d){b(a,function(a){var b=this,c=a.id,f=new h.d;a=d.call(this,a,f);this.set(c,{promise:a,cancellationToken:f});a.then(function(a){var d=a.value;a=a.transfers;b.delete(c);b.invoke("rpc.promise.response",{id:c,value:d},a)},function(a){b.delete(c);b.invoke("rpc.promise.response",{id:c,error:a.message,
errorName:a.name})})})};g.d(k,"g",function(){return q});g.d(k,"e",function(){return w});k.f=d;g.d(k,"b",function(){return p});k.a=function(a){return function(b){u.set(a,b);b.prototype.RPC_TYPE_ID=a}};var f=function r(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return r(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},l=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=
b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),n=new Map,v=function(b){function d(a,b){e(this,d);var h=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b));h.name=a;h.message=b;return h}a(d,b);return d}(Error);b("rpc.promise.cancel",function(a){this.get(a.id).cancellationToken.cancel()});b("rpc.promise.response",function(a){var b=a.id,d=this.get(b),c=d.resolve,
d=d.reject;this.delete(b);a.hasOwnProperty("value")?c(a.value):a.errorName===h.b.name?d(h.b):d(new v(a.errorName,a.error))});var q=function(){function a(b){var d=this;e(this,a);this.target=b;this.objects=new Map;this.nextId=-1;b.onmessage=function(a){a=a.data;n.get(a.functionName).call(d,a)}}l(a,[{key:"set",value:function(a,b){this.objects.set(a,b)}},{key:"delete",value:function(a){this.objects.delete(a)}},{key:"get",value:function(a){return this.objects.get(a)}},{key:"getRef",value:function(a){var b=
this.get(a.id);b.referencedGeneration=a.gen;b.addRef();return b}},{key:"invoke",value:function(a,b,d){b.functionName=a;this.target.postMessage(b,d)}},{key:"promiseInvoke",value:function(a,b,d,c){d=void 0===d?h.c:d;var f=this;return g.i(h.a)(d,function(d,h,y){var l=b.id=f.newId();f.set(l,{resolve:d,reject:h});f.invoke(a,b,c);y.add(function(){f.invoke("rpc.promise.cancel",{id:l})})})}},{key:"newId",value:function(){return this.nextId--}},{key:"numObjects",get:function(){return this.objects.size}}]);
return a}(),w=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.rpc=null;a.rpcId=null;return a}a(d,b);l(d,[{key:"initializeSharedObject",value:function(a,b){b=void 0===b?a.newId():b;this.rpc=a;this.rpcId=b;this.isOwner=!1;a.set(b,this)}},{key:"initializeCounterpart",value:function(a,b){b=void 0===b?{}:b;this.initializeSharedObject(a);this.referencedGeneration=this.unreferencedGeneration=0;this.isOwner=!0;b.id=this.rpcId;b.type=this.RPC_TYPE_ID;
a.invoke("SharedObject.new",b)}},{key:"dispose",value:function(){f(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"dispose",this).call(this)}},{key:"addCounterpartRef",value:function(){return{id:this.rpcId,gen:++this.referencedGeneration}}},{key:"refCountReachedZero",value:function(){!0===this.isOwner?this.referencedGeneration===this.unreferencedGeneration&&this.ownerDispose():!1===this.isOwner?this.rpc.invoke("SharedObject.refCountReachedZero",{id:this.rpcId,gen:this.referencedGeneration}):
f(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"refCountReachedZero",this).call(this)}},{key:"ownerDispose",value:function(){var a=this.rpc,b=this.rpcId;f(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"refCountReachedZero",this).call(this);a.delete(b);a.invoke("SharedObject.dispose",{id:b})}},{key:"counterpartRefCountReachedZero",value:function(a){this.unreferencedGeneration=a;0===this.refCount&&a===this.referencedGeneration&&this.ownerDispose()}}]);return d}(m.a),p=function(b){function h(a,
b){b=void 0===b?{}:b;e(this,h);var f=c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));d(f,a,b);return f}a(h,b);return h}(w);b("SharedObject.dispose",function(a){a=this.get(a.id);if(0!==a.refCount)throw Error("Attempted to dispose object with non-zero reference count.");a.disposed();this.delete(a.rpcId);a.rpcId=null;a.rpc=null});b("SharedObject.refCountReachedZero",function(a){this.get(a.id).counterpartRefCountReachedZero(a.gen)});var u=new Map;b("SharedObject.new",function(a){--(new (u.get(a.type))(this,
a)).refCount})},function(m,k,g){function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function b(a){var b=a.downloadCancellationToken=new p.d;a.source.download(a,b).then(function(){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadSucceeded())},function(d){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadFailed(d),console.log("Error retrieving chunk "+a+": "+d))})}function d(a){return new C(new w.a(a),n.a)}function h(a,b,d,c,h,
f){for(;1>b.availableItems||b.availableSize<a;){var l=h.next().value;if(void 0===l)return!1;var y=l.priorityTier;if(y<d||y===d&&l.priority>=c)return!1;f(l)}return!0}Object.defineProperty(k,"__esModule",{value:!0});var f=g(6),l=g(84),n=g(85),v=g(86),q=g(89),w=g(90),p=g(14),u=g(15),D=g(0);g.d(k,"Chunk",function(){return B});g.d(k,"ChunkSourceBase",function(){return t});g.d(k,"ChunkSource",function(){return E});g.d(k,"ChunkQueueManager",function(){return A});g.d(k,"ChunkManager",function(){return G});
k.registerChunkSource=function(a){return function(b){g.i(D.a)(a.RPC_ID)(b);b.prototype.toString=function(){return a.stringify(this.parameters)}}};var r=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();m=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,
d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var y=a.length-1;0<=y;y--)if(l=a[y])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var B=function(){function b(){a(this,b);this.key=this.source=this.prev1=this.next1=this.child1=this.prev0=this.next0=this.child0=null;this.state=f.a.NEW;this.error=null;this.newPriority=this.priority=0;this.newPriorityTier=this.priorityTier=f.b.RECENT;this.backendOnly=!1;
this.downloadCancellationToken=void 0}r(b,[{key:"initialize",value:function(a){this.key=a;this.state=f.a.NEW;this.priority=Number.NEGATIVE_INFINITY;this.priorityTier=f.b.RECENT;this.newPriority=Number.NEGATIVE_INFINITY;this.newPriorityTier=f.b.RECENT;this.error=null}},{key:"updatePriorityProperties",value:function(){this.priorityTier=this.newPriorityTier;this.priority=this.newPriority;this.newPriorityTier=f.b.RECENT;this.newPriority=Number.NEGATIVE_INFINITY}},{key:"dispose",value:function(){this.error=
this.source=null}},{key:"downloadFailed",value:function(a){this.error=a;this.queueManager.updateChunkState(this,f.a.FAILED)}},{key:"downloadSucceeded",value:function(){this.queueManager.updateChunkState(this,f.a.SYSTEM_MEMORY_WORKER)}},{key:"freeSystemMemory",value:function(){}},{key:"serialize",value:function(a,b){a.id=this.key;a.source=this.source.rpcId;a["new"]=!0}},{key:"toString",value:function(){return this.key}},{key:"chunkManager",get:function(){return this.source.chunkManager}},{key:"queueManager",
get:function(){return this.source.chunkManager.queueManager}}],[{key:"priorityLess",value:function(a,b){return a.priority<b.priority}},{key:"priorityGreater",value:function(a,b){return a.priority>b.priority}}]);return b}(),t=function(b){function d(b){a(this,d);var c=e(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));c.chunkManager=b;c.chunks=new Map;c.freeChunks=[];return c}c(d,b);r(d,[{key:"getNewChunk_",value:function(a){var b=this.freeChunks,d=b.length;if(0<d)return a=b[d-1],b.length=d-
1,a.source=this,a;b=new a;b.source=this;return b}},{key:"addChunk",value:function(a){var b=this.chunks;0===b.size&&this.addRef();b.set(a.key,a)}},{key:"removeChunk",value:function(a){var b=this.chunks,d=this.freeChunks;b.delete(a.key);a.dispose();d[d.length]=a;0===b.size&&this.dispose()}}]);return d}(D.e),E=function(b){function d(b,c){a(this,d);var h=b.get(c.chunkManager),h=e(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,h));g.i(D.f)(h,b,c);return h}c(d,b);return d}(t),C=function(){function b(d,
c){a(this,b);this.heapOperations=d;this.linkedListOperations=c;this.heapRoots=[null,null];this.recentHead=new B;c.initializeHead(this.recentHead)}r(b,[{key:"add",value:function(a){var b=a.priorityTier;if(b===f.b.RECENT)this.linkedListOperations.insertAfter(this.recentHead,a);else{var d=this.heapRoots;d[b]=this.heapOperations.meld(d[b],a)}}},{key:"candidates",value:function(){function a(a,y){for(;;)switch(b){case 0:if(k.heapOperations.compare!==B.priorityLess){b=1;break}H=k;A=H.linkedListOperations;
p=H.recentHead;case 3:t=A.back(p);if(null!=t){b=5;break}b=4;break;case 5:return b=7,{value:t,done:!1};case 7:if(void 0===y){b=8;break}b=-1;throw y;case 8:case 6:b=3;break;case 4:g=k,w=g.heapRoots,G=f.b.LAST_ORDERED_TIER;case 9:if(!(G>=f.b.FIRST_ORDERED_TIER)){b=11;break}case 12:q=w[G];if(null!=q){b=14;break}b=13;break;case 14:return b=16,{value:q,done:!1};case 16:if(void 0===y){b=17;break}b=-1;throw y;case 17:case 15:b=12;break;case 13:case 10:--G;b=9;break;case 11:b=2;break;case 1:e=k.heapRoots,
v=f.b.FIRST_ORDERED_TIER;case 18:if(!(v<=f.b.LAST_ORDERED_TIER)){b=20;break}case 21:n=e[v];if(null!=n){b=23;break}b=22;break;case 23:return b=25,{value:n,done:!1};case 25:if(void 0===y){b=26;break}b=-1;throw y;case 26:case 24:b=21;break;case 22:case 19:++v;b=18;break;case 20:l=k,h=l.linkedListOperations,c=l.recentHead;case 27:d=h.front(c);if(null!=d){b=29;break}b=28;break;case 29:return b=31,{value:d,done:!1};case 31:if(void 0===y){b=32;break}b=-1;throw y;case 32:case 30:b=27;break;case 28:case 2:b=
-1;default:return{value:void 0,done:!0}}}var b=0,d,c,h,l,n,v,e,q,G,w,g,t,p,A,H,k=this,C={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();C[Symbol.iterator]=function(){return this};return C}},{key:"delete",value:function(a){var b=a.priorityTier;if(b===f.b.RECENT)this.linkedListOperations.pop(a);else{var d=this.heapRoots;d[b]=this.heapOperations.remove(d[b],a)}}}]);return b}(),A=function(n){function y(b,
c){a(this,y);b=e(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b,c));b.queuedPromotionQueue=d(B.priorityGreater);b.downloadEvictionQueue=d(B.priorityLess);b.systemMemoryEvictionQueue=new C(new q.a(B.priorityLess),l.a);b.gpuMemoryPromotionQueue=d(B.priorityGreater);b.gpuMemoryEvictionQueue=d(B.priorityLess);b.updatePending=null;b.numQueued=0;b.numFailed=0;b.gpuMemoryCapacity=f.c.fromObject(c.gpuMemoryCapacity);b.systemMemoryCapacity=f.c.fromObject(c.systemMemoryCapacity);b.downloadCapacity=
f.c.fromObject(c.downloadCapacity);return b}c(y,n);r(y,[{key:"scheduleUpdate",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.process.bind(this),0))}},{key:"chunkQueuesForChunk",value:function(a){function b(b,n){for(;;)switch(d){case 0:h=!1;c=a.state;if(!h&&c!==f.a.QUEUED){d=2;break}h=!0;d=3;return{value:l.queuedPromotionQueue,done:!1};case 3:if(void 0===n){d=4;break}d=-1;throw n;case 4:d=1;break;case 2:if(!h&&c!==f.a.DOWNLOADING){d=5;break}h=!0;d=6;return{value:l.downloadEvictionQueue,
done:!1};case 6:if(void 0===n){d=7;break}d=-1;throw n;case 7:return d=8,{value:l.systemMemoryEvictionQueue,done:!1};case 8:if(void 0===n){d=9;break}d=-1;throw n;case 9:d=1;break;case 5:if(h||c===f.a.SYSTEM_MEMORY_WORKER)h=!0;if(!h&&c!==f.a.SYSTEM_MEMORY){d=10;break}h=!0;d=11;return{value:l.systemMemoryEvictionQueue,done:!1};case 11:if(void 0===n){d=12;break}d=-1;throw n;case 12:if(a.priorityTier===f.b.RECENT||a.backendOnly){d=13;break}d=14;return{value:l.gpuMemoryPromotionQueue,done:!1};case 14:if(void 0===
n){d=15;break}d=-1;throw n;case 15:case 13:d=1;break;case 10:if(!h&&c!==f.a.GPU_MEMORY){d=16;break}h=!0;d=17;return{value:l.systemMemoryEvictionQueue,done:!1};case 17:if(void 0===n){d=18;break}d=-1;throw n;case 18:return d=19,{value:l.gpuMemoryEvictionQueue,done:!1};case 19:if(void 0===n){d=20;break}d=-1;throw n;case 20:d=1;break;case 16:case 1:d=-1;default:return{value:void 0,done:!0}}}var d=0,c,h,l=this,n={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}},{key:"adjustCapacitiesForChunk",value:function(a,b){b=b?-1:1;switch(a.state){case f.a.FAILED:this.numFailed-=b;break;case f.a.QUEUED:this.numQueued-=b;break;case f.a.DOWNLOADING:this.downloadCapacity.adjust(b,0);this.systemMemoryCapacity.adjust(b,0);break;case f.a.SYSTEM_MEMORY:case f.a.SYSTEM_MEMORY_WORKER:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes);break;case f.a.GPU_MEMORY:this.systemMemoryCapacity.adjust(b,
b*a.systemMemoryBytes),this.gpuMemoryCapacity.adjust(b,b*a.gpuMemoryBytes)}}},{key:"removeChunkFromQueues_",value:function(a){for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.delete(a)}},{key:"addChunkToQueues_",value:function(a){if(a.state===f.a.QUEUED&&a.priorityTier===f.b.RECENT)return a.source.removeChunk(a),this.adjustCapacitiesForChunk(a,!1),!1;for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.add(a);
return!0}},{key:"performChunkPriorityUpdate",value:function(a){a.priorityTier===a.newPriorityTier&&a.priority===a.newPriority?(a.newPriorityTier=f.b.RECENT,a.newPriority=Number.NEGATIVE_INFINITY):(this.removeChunkFromQueues_(a),a.updatePriorityProperties(),a.state===f.a.NEW&&(a.state=f.a.QUEUED,this.adjustCapacitiesForChunk(a,!0)),this.addChunkToQueues_(a))}},{key:"updateChunkState",value:function(a,b){b!==a.state&&(this.adjustCapacitiesForChunk(a,!1),this.removeChunkFromQueues_(a),a.state=b,this.adjustCapacitiesForChunk(a,
!0),this.addChunkToQueues_(a),this.scheduleUpdate())}},{key:"processGPUPromotions_",value:function(){function a(a){b.freeChunkGPUMemory(a);a.source.chunkManager.queueManager.updateChunkState(a,f.a.SYSTEM_MEMORY)}for(var b=this,d=this.gpuMemoryPromotionQueue.candidates(),c=this.gpuMemoryEvictionQueue.candidates(),l=this.gpuMemoryCapacity;;){var n=d.next().value;if(void 0===n)break;else{if(!h(n.gpuMemoryBytes,l,n.priorityTier,n.priority,c,a))break;this.copyChunkToGPU(n);this.updateChunkState(n,f.a.GPU_MEMORY)}}}},
{key:"freeChunkGPUMemory",value:function(a){this.rpc.invoke("Chunk.update",{id:a.key,state:f.a.SYSTEM_MEMORY,source:a.source.rpcId})}},{key:"freeChunkSystemMemory",value:function(a){a.state===f.a.SYSTEM_MEMORY_WORKER?a.freeSystemMemory():this.rpc.invoke("Chunk.update",{id:a.key,state:f.a.EXPIRED,source:a.source.rpcId})}},{key:"copyChunkToGPU",value:function(a){var b=this.rpc;if(a.state===f.a.SYSTEM_MEMORY)b.invoke("Chunk.update",{id:a.key,source:a.source.rpcId,state:f.a.GPU_MEMORY});else{var d={},
c=[];a.serialize(d,c);d.state=f.a.GPU_MEMORY;b.invoke("Chunk.update",d,c)}}},{key:"processQueuePromotions_",value:function(){function a(a){switch(a.state){case f.a.DOWNLOADING:var b=a.downloadCancellationToken;a.downloadCancellationToken=void 0;b.cancel();break;case f.a.GPU_MEMORY:d.freeChunkGPUMemory(a);case f.a.SYSTEM_MEMORY_WORKER:case f.a.SYSTEM_MEMORY:d.freeChunkSystemMemory(a)}a.source.chunkManager.queueManager.updateChunkState(a,f.a.QUEUED)}for(var d=this,c=this.queuedPromotionQueue.candidates(),
l=this.downloadEvictionQueue.candidates(),n=this.systemMemoryEvictionQueue.candidates(),y=this.downloadCapacity,v=this.systemMemoryCapacity;;){var e=c.next();if(e.done)break;var e=e.value,q=e.priorityTier,G=e.priority;if(!h(0,y,q,G,l,a))break;if(!h(0,v,q,G,n,a))break;this.updateChunkState(e,f.a.DOWNLOADING);b(e)}}},{key:"process",value:function(){this.updatePending&&(this.updatePending=null,this.processGPUPromotions_(),this.processQueuePromotions_(),this.logStatistics())}},{key:"logStatistics",value:function(){}}]);
return y}(D.b),A=m([g.i(D.a)(f.d)],A);k.RECOMPUTE_CHUNK_PRIORITIES_LAST=-1E3;var G=function(b){function d(b,c){a(this,d);var h=e(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b,c));h.existingTierChunks=[];h.newTierChunks=[];h.updatePending=null;h.recomputeChunkPriorities=new u.b;h.recomputeChunkPrioritiesLate=new u.b;h.memoize=new v.a;h.queueManager=b.get(c.chunkQueueManager).addRef();for(b=f.b.FIRST_TIER;b<=f.b.LAST_TIER;++b)b!==f.b.RECENT&&(h.existingTierChunks[b]=[]);return h}c(d,b);r(d,
[{key:"scheduleUpdateChunkPriorities",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.recomputeChunkPriorities_.bind(this),0))}},{key:"recomputeChunkPriorities_",value:function(){this.updatePending=null;this.recomputeChunkPriorities.dispatch();this.recomputeChunkPrioritiesLate.dispatch();this.updateQueueState([f.b.VISIBLE])}},{key:"requestChunk",value:function(a,b,d){a.newPriorityTier===f.b.RECENT&&this.newTierChunks.push(a);a.newPriorityTier=b;a.newPriority=d}},{key:"updateQueueState",
value:function(a){var b=this.existingTierChunks,d=this.queueManager;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){for(var h=b[c.value],l=$jscomp.makeIterator(h),c=l.next();!c.done;c=l.next())c=c.value,c.newPriorityTier===f.b.RECENT&&d.performChunkPriorityUpdate(c);h.length=0}a=this.newTierChunks;h=$jscomp.makeIterator(a);for(c=h.next();!c.done;c=h.next())c=c.value,d.performChunkPriorityUpdate(c),b[c.priorityTier].push(c);a.length=0;this.queueManager.scheduleUpdate()}}]);return d}(D.b),
G=m([g.i(D.a)(f.e)],G)},function(m,k,g){function e(a,b){var d=Math.abs(a[b]),c=Math.abs(a[b+1]),f=Math.abs(a[b+2]),l=Math.max(d,c,f);1E-4>d/l&&(a[b]=0);1E-4>c/l&&(a[b+1]=0);1E-4>f/l&&(a[b+2]=0)}var c=g(38);g.n(c);g.o(c,"mat4")&&g.d(k,"b",function(){return c.mat4});g.o(c,"quat")&&g.d(k,"c",function(){return c.quat});g.o(c,"vec3")&&g.d(k,"a",function(){return c.vec3});k.d=function(a){return a[0]*a[1]*a[2]};k.l=function(a){return a[0]+","+a[1]+","+a[2]};k.e=function(a){e(a,0);e(a,4);e(a,8)};k.g=function(a,
b,d){var c=b[0],f=b[1];b=b[2];a[0]=d[0]*c+d[4]*f+d[8]*b;a[1]=d[1]*c+d[5]*f+d[9]*b;a[2]=d[2]*c+d[6]*f+d[10]*b;return a};k.j=function(a,b){var d=b[0],c=b[1],f=b[2],l=b[4],n=b[5],v=b[6],e=b[8],w=b[9];b=b[10];a[0]=Math.sqrt(d*d+c*c+f*f);a[1]=Math.sqrt(l*l+n*n+v*v);a[2]=Math.sqrt(e*e+w*w+b*b);return a};m=c.mat4.create();k.i=m;m=[c.vec3.fromValues(1,0,0),c.vec3.fromValues(0,1,0),c.vec3.fromValues(0,0,1)];k.h=m;m=c.vec3.fromValues(0,0,0);k.f=m;c.vec3.fromValues(1,1,1);m=c.vec3.fromValues(Infinity,Infinity,
Infinity);k.k=m;c.quat.create()},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(k,"__esModule",{value:!0});m=g(1);var b=g(6),d=g(17),h=g(2),f=g(0),l=g(15);g.d(k,"SliceView",function(){return u});g.d(k,"VolumeChunk",function(){return D});g.d(k,"VolumeChunkSource",function(){return r});g.d(k,"RenderLayer",function(){return B});g.d(k,"ParameterizedVolumeChunkSource",function(){return t});var n=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=
b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),v=function C(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return C(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:
null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var n=a.length-1;0<=n;n--)if(l=a[n])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var q=h.a.create(),w=h.a.create(),p=h.a.create(),u=function(d){function f(a,b){e(this,f);var d=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));d.handleLayerChanged=function(){d.hasValidViewport&&d.chunkManager.scheduleUpdateChunkPriorities()};
d.initializeSharedObject(a,b.id);d.chunkManager=d.registerDisposer(a.get(b.chunkManager).addRef());d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateVisibleChunks()}));return d}a(f,d);n(f,[{key:"onViewportChanged",value:function(){this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"updateVisibleChunks",value:function(){var a=this,d=this.centerDataPosition,c=this.chunkManager;this.computeVisibleChunks(function(b){b.globalToLocalSpatial(p,d);return a.visibleChunkLayouts.get(b)},
function(a,d,f,l){h.a.multiply(q,f,a.size);a=-h.a.distance(p,q);l=$jscomp.makeIterator(l);for(var n=l.next();!n.done;n=l.next()){var y=n.value,n=d.get(y),y=y.getChunk(f);c.requestChunk(y,b.b.VISIBLE,-1E12+a+1E9*n)}})}},{key:"removeVisibleLayer",value:function(a){this.visibleLayers.delete(a);a.layerChanged.remove(this.handleLayerChanged);this.visibleSourcesStale=!0;this.hasValidViewport&&this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"disposed",value:function(){for(var a=$jscomp.makeIterator(this.visibleLayers.keys()),
b=a.next();!b.done;b=a.next())this.removeVisibleLayer(b.value);v(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"disposed",this).call(this)}}]);return f}(d.c),u=k([g.i(f.a)(d.d)],u);g.i(f.d)("SliceView.updateView",function(a){var b=this.get(a.id);a.width&&b.setViewportSize(a.width,a.height);a.viewportToData&&b.setViewportToDataMatrix(a.viewportToData)});g.i(f.d)("SliceView.addVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.visibleLayers.set(a,[]);a.layerChanged.add(b.handleLayerChanged);
b.visibleSourcesStale=!0;b.hasValidViewport&&b.chunkManager.scheduleUpdateChunkPriorities()});g.i(f.d)("SliceView.removeVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.removeVisibleLayer(a)});var D=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.source=null;a.chunkGridPosition=h.a.create();return a}a(d,b);n(d,[{key:"initializeVolumeChunk",value:function(a,b){v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",
this).call(this,a);a=this.source;h.a.copy(this.chunkGridPosition,b);this.gpuMemoryBytes=this.systemMemoryBytes=a.spec.chunkBytes;this.data=this.chunkDataSize=null}},{key:"serialize",value:function(a,b){v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"serialize",this).call(this,a,b);var c=a.data=this.data,h=this.chunkDataSize;h!==this.source.spec.chunkDataSize&&(a.chunkDataSize=h);a.chunkGridPosition=this.chunkGridPosition;b.push(c.buffer);this.data=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=
this.gpuMemoryBytes=this.data.byteLength;v(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.data=null}},{key:"toString",value:function(){return this.source.toString()+":"+g.i(h.l)(this.chunkGridPosition)}}]);return d}(m.Chunk),r=function(b){function f(a,b){e(this,f);a=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,a,b));a.spec=d.e.fromObject(b.spec);return a}a(f,b);n(f,[{key:"getChunk",value:function(a){var b=
g.i(h.l)(a),d=this.chunks.get(b);void 0===d&&(d=this.getNewChunk_(D),d.initializeVolumeChunk(b,a),this.addChunk(d));return d}},{key:"computeChunkBounds",value:function(a){for(var b=this.spec,d=b.upperVoxelBound,b=b.chunkDataSize,c=h.a.multiply(q,a.chunkGridPosition,b),f=!1,l=0;3>l;++l)(w[l]=Math.min(d[l],c[l]+b[l])-c[l])!==b[l]&&(f=!0);h.a.add(c,c,this.spec.baseVoxelOffset);a.chunkDataSize=f?h.a.clone(w):b;return c}}]);return f}(m.ChunkSource),B=function(b){function d(a,b){e(this,d);var h=c(this,
(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));h.layerChanged=new l.b;var f=h.sources=[];b=$jscomp.makeIterator(b.sources);for(var n=b.next();!n.done;n=b.next()){var v=n.value,n=[];f.push(n);for(var v=$jscomp.makeIterator(v),q=v.next();!q.done;q=v.next())q=a.get(q.value),h.registerDisposer(q.addRef()),n.push(q)}return h}a(d,b);return d}(f.b),B=k([g.i(f.a)(d.f)],B),t=function(b){function d(a,b){e(this,d);a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));a.parameters=b.parameters;
return a}a(d,b);return d}(r)},function(m,k){var g={EPSILON:1E-6};g.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;g.RANDOM=Math.random;g.ENABLE_SIMD=!1;g.SIMD_AVAILABLE=g.ARRAY_TYPE===Float32Array&&"SIMD"in this;g.USE_SIMD=g.ENABLE_SIMD&&g.SIMD_AVAILABLE;g.setMatrixArrayType=function(c){g.ARRAY_TYPE=c};var e=Math.PI/180;g.toRadian=function(c){return c*e};g.equals=function(c,a){return Math.abs(c-a)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(a))};m.exports=g},function(m,k,g){m="undefined"!==
typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;k.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var d=b.shift();if(d){if("object"!==typeof d)throw new TypeError(d+"must be non-object");for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])}}return a};k.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var e={arraySet:function(a,b,d,c,f){if(b.subarray&&a.subarray)a.set(b.subarray(d,
d+c),f);else for(var h=0;h<c;h++)a[f+h]=b[d+h]},flattenChunks:function(a){var b,d,c,f,l;b=c=0;for(d=a.length;b<d;b++)c+=a[b].length;l=new Uint8Array(c);b=c=0;for(d=a.length;b<d;b++)f=a[b],l.set(f,c),c+=f.length;return l}},c={arraySet:function(a,b,d,c,f){for(var h=0;h<c;h++)a[f+h]=b[d+h]},flattenChunks:function(a){return[].concat.apply([],a)}};k.setTyped=function(a){a?(k.Buf8=Uint8Array,k.Buf16=Uint16Array,k.Buf32=Int32Array,k.assign(k,e)):(k.Buf8=Array,k.Buf16=Array,k.Buf32=Array,k.assign(k,c))};
k.setTyped(m)},function(m,k,g){g.d(k,"a",function(){return c});g.d(k,"b",function(){return a});g.d(k,"c",function(){return b});var e=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),c;(function(a){a[a.GPU_MEMORY=0]="GPU_MEMORY";a[a.SYSTEM_MEMORY=1]="SYSTEM_MEMORY";a[a.SYSTEM_MEMORY_WORKER=2]="SYSTEM_MEMORY_WORKER";
a[a.DOWNLOADING=3]="DOWNLOADING";a[a.QUEUED=4]="QUEUED";a[a.NEW=5]="NEW";a[a.FAILED=6]="FAILED";a[a.EXPIRED=7]="EXPIRED"})(c||(c={}));var a;(function(a){a[a.FIRST_TIER=0]="FIRST_TIER";a[a.FIRST_ORDERED_TIER=0]="FIRST_ORDERED_TIER";a[a.VISIBLE=0]="VISIBLE";a[a.PREFETCH=1]="PREFETCH";a[a.LAST_ORDERED_TIER=1]="LAST_ORDERED_TIER";a[a.RECENT=2]="RECENT";a[a.LAST_TIER=2]="LAST_TIER"})(a||(a={}));var b=function(){function a(b,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.itemCapacity=this.availableItems=b;this.sizeCapacity=this.availableSize=d}e(a,[{key:"adjust",value:function(a,b){this.availableItems+=a;this.availableSize+=b}},{key:"toString",value:function(){return this.availableItems+"/"+this.itemCapacity+" items, "+this.availableSize+"/"+this.sizeCapacity+" size"}},{key:"toObject",value:function(){return{itemCapacity:this.itemCapacity,sizeCapacity:this.sizeCapacity}}}],[{key:"fromObject",value:function(b){return new a(b.itemCapacity,b.sizeCapacity)}}]);return a}();
b.INFINITE=new b(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);k.d="ChunkQueueManager";k.e="ChunkManager"},function(m,k,g){g.d(k,"b",function(){return e});k.d=function(a,b,d){d=void 0===d?c:d;if(b!==d)for(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),b=0,d=a.length;b<d;b+=2){var h=a[b];a[b]=a[b+1];a[b+1]=h}};k.a=function(a,b,d){d=void 0===d?c:d;if(b!==d)for(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),b=0,d=a.length;b<d;b+=4){var h=a[b];a[b]=a[b+3];a[b+3]=h;h=a[b+1];a[b+1]=a[b+
2];a[b+2]=h}};var e;(function(a){a[a.LITTLE=0]="LITTLE";a[a.BIG=1]="BIG"})(e||(e={}));var c=function(){var a=Uint16Array.of(4386);return 17===(new Uint8Array(a.buffer))[0]?e.BIG:e.LITTLE}();k.c=c},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}var c=g(83),a=g(14);g.d(k,"d",function(){return f});k.b=function(a,b){b=void 0===b?"GET":b;var c=new XMLHttpRequest;c[h]=b;c[d]=a;c.open(b,a);return c};k.c=function(a,b,f){f=void 0===f?"GET":f;var l=new XMLHttpRequest;if(Array.isArray(a)){var n=a.length,n=1===n?0:Math.abs(g.i(c.a)(b))%n;a=a[n]+b}else a+=b;l[h]=f;l[d]=a;l.open(f,a);return l};k.a=function(b,d,c){c=void 0===c?a.c:c;b.responseType=d;return new Promise(function(a,d){var h=function(){b.abort()};c.add(h);b.onloadend=function(){var l=
this.status;c.remove(h);200<=l&&300>l?a(this.response):d(f.fromXhr(b))};b.send()})};var b=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();$jscomp.initSymbol();var d=Symbol("url");$jscomp.initSymbol();var h=Symbol("method"),f=function(a){function c(a,b,d,h){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var f=a+" "+JSON.stringify(b)+" resulted in HTTP error "+d;h&&(f+=": "+h);var f=f+".",l;l=(c.__proto__||Object.getPrototypeOf(c)).call(this,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");l=!l||"object"!==typeof l&&"function"!==typeof l?this:l;l.name="HttpError";l.message=f;l.method=a;l.url=b;l.code=d;l.statusMessage=h;return l}e(c,a);b(c,null,[{key:"fromXhr",value:function(a){return new c(a[h],a[d],a.status,a.statusText)}}]);return c}(Error)},function(m,
k,g){var e=g(24),c=g(78);k.a=function(a,b){g.i(e.a)(a,g.i(c.a)(new Uint8Array(b),a.chunkDataSize,a.source.spec.numChannels))}},function(m,k,g){g.d(k,"a",function(){return e});var e;(function(c){c[c.UINT8=0]="UINT8";c[c.UINT16=1]="UINT16";c[c.UINT32=2]="UINT32";c[c.UINT64=3]="UINT64";c[c.FLOAT32=4]="FLOAT32"})(e||(e={}));m=[];k.b=m;m[e.UINT8]=1;m[e.UINT16]=2;m[e.UINT32]=4;m[e.UINT64]=8;m[e.FLOAT32]=4},function(m,k,g){function e(a){if("object"===typeof a){if(null===a)return"null";if(Array.isArray(a)){var b=
"[",d=a.length,c=0;if(c<d)for(b+=e(a[c]);++c<d;)b+=",",b+=e(a[c]);return b+"]"}var b="{",d=Object.keys(a).sort(),c=0,n=d.length;if(c<n)for(var v=d[c],b=b+JSON.stringify(v),b=b+":"+e(a[v]);++c<n;)b+=",",v=d[c],b+=JSON.stringify(v),b+=":",b+=e(a[v]);return b+"}"}return JSON.stringify(a)}function c(d){for(var c="";0<d.length;){var f=d.match(a),l;if(null===f)l=d,f=d="";else{l=d.substr(0,f.index);d=d.substr(f.index+f[0].length);var n=f[1];if(void 0!==n){if(f=n,2<=f.length&&"'"===f.charAt(0)&&"'"===f.charAt(f.length-
1)){f=f.substr(1,f.length-2);for(n='"';0<f.length;){var v=f.match(b);if(null===v){n+=f;break}n+=v[1];n+="\\";n+='"';f=f.substr(v.index+v[0].length)}f=n+'"'}}else f=f[2]}c+=l.replace(/\(/g,"[").replace(/\)/g,"]").replace("True","true").replace("False","false").replace(/,\s*([\}\]])/g,"$1");c+=f}return c}g(2);k.a=e;k.f=function(a){return JSON.parse(c(a))};k.e=function(a,b){if(!Array.isArray(a))throw Error("Expected array, but received: "+JSON.stringify(a)+".");return a.map(b)};k.b=function(a){if("object"!==
typeof a||null==a||Array.isArray(a))throw Error("Expected JSON object, but received: "+JSON.stringify(a)+".");return a};k.c=function(a,b,c){a=a.hasOwnProperty(b)?a[b]:void 0;try{return c(a)}catch(l){throw Error("Error parsing "+JSON.stringify(b)+" property: "+l.message);}};k.d=function(a){if(!Array.isArray(a))throw Error("Expected array, received: "+JSON.stringify(a)+".");for(var b=$jscomp.makeIterator(a),d=b.next();!d.done;d=b.next())if(d=d.value,"string"!==typeof d)throw Error("Expected string, received: "+
JSON.stringify(d)+".");return a};var a=new RegExp(/('(?:[^'\\]|(?:\\.))*')/.source+"|"+/("(?:[^'\\]|(?:\\.))*")/.source),b=/^((?:[^"'\\]|(?:\\.))*)"/},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){for(var d=q.a.create(),c=q.a.create(),h=q.a.create(),f=new Float32Array(a.length),l=new Float32Array(a.length/3),n=b.length,v=0;v<n;v+=3)for(var e=0;3>e;++e)l[b[v+e]]+=1;for(v=0;v<n;v+=3){for(var e=3*b[v],w=3*b[v+1],g=3*b[v+2],t=0;3>t;++t)c[t]=a[w+t]-a[e+t],h[t]=a[g+t]-a[w+t];q.a.cross(d,c,h);q.a.normalize(d,
d);for(e=0;3>e;++e)for(g=b[v+e],w=1/l[g],g*=3,t=0;3>t;++t)f[g+t]+=w*d[t]}a=f.length;for(b=0;b<a;b+=3)d=f.subarray(b,3),q.a.normalize(d,d);return f}function d(a,b,d,c,h,f,l,n){var y=new Float32Array(d,h,3*f);g.i(v.a)(y,c);void 0===l&&(l=h+12*f);var e;void 0!==n&&(e=n*b);d=void 0===e?new Uint32Array(d,l):new Uint32Array(d,l,e);if(0!==d.length%b)throw Error("Number of indices is not a multiple of "+b+": "+d.length+".");g.i(v.a)(d,c);a.vertexPositions=y;a.indices=d}var h=g(1),f=g(6);m=g(68);var l=g(34),
n=g(21),v=g(7),q=g(2),w=g(11),p=g(16),u=g(0);k.e=function(a,b,d){g.i(w.b)(b);a.fragmentIds=g.i(w.c)(b,d,w.d)};k.a=b;k.d=d;k.b=function(a,c,h,f,l,n,v){d(a,3,c,h,f,l,n,v);a.vertexNormals=b(a.vertexPositions,a.indices)};g.d(k,"c",function(){return E});var D=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),r=function A(a,
b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return A(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var n=a.length-1;0<=n;n--)if(l=a[n])f=(3>
h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var B=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.backendOnly=!0;a.objectId=new p.a;return a}a(d,b);D(d,[{key:"initializeManifestChunk",value:function(a,b){r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",this).call(this,a);this.objectId.assign(b)}},{key:"freeSystemMemory",value:function(){this.fragmentIds=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=
100;r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this);this.priorityTier===f.b.VISIBLE&&this.source.chunkManager.scheduleUpdateChunkPriorities()}},{key:"toString",value:function(){return this.objectId.toString()}}]);return d}(h.Chunk),t=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.manifestChunk=null;a.fragmentId=null;a.vertexPositions=null;a.indices=null;a.vertexNormals=null;return a}a(d,b);D(d,
[{key:"initializeFragmentChunk",value:function(a,b,c){r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",this).call(this,a);this.manifestChunk=b;this.fragmentId=c}},{key:"freeSystemMemory",value:function(){this.fragmentId=this.vertexPositions=this.indices=this.vertexNormals=this.manifestChunk=null}},{key:"serialize",value:function(a,b){r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"serialize",this).call(this,a,b);a.objectKey=this.manifestChunk.key;var c=this.vertexPositions,
h=this.indices,f=this.vertexNormals;a.vertexPositions=c;a.indices=h;a.vertexNormals=f;a=c.buffer;b.push(a);h=h.buffer;h!==a&&b.push(h);f=f.buffer;f!==a&&f!==h&&b.push(f);this.vertexPositions=this.indices=this.vertexNormals=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength+this.indices.byteLength+this.vertexNormals.byteLength;r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this)}}]);
return d}(h.Chunk),E=function(b){function d(a,b){e(this,d);a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));a.parameters=b.parameters;return a}a(d,b);return d}(function(b){function d(a,b){e(this,d);var h=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));return(h.fragmentSource=h.registerDisposer(a.getRef(b.fragmentSource))).meshSource=h}a(d,b);D(d,[{key:"getChunk",value:function(a){var b=g.i(n.a)(a),d=this.chunks.get(b);void 0===d&&(d=this.getNewChunk_(B),d.initializeManifestChunk(b,
a),this.addChunk(d));return d}},{key:"getFragmentChunk",value:function(a,b){var d=a.key+"/"+b,c=this.fragmentSource,h=c.chunks.get(d);void 0===h&&(h=c.getNewChunk_(t),h.initializeFragmentChunk(d,a,b),c.addChunk(h));return h}}]);return d}(h.ChunkSource)),h=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.meshSource=null;return a}a(d,b);D(d,[{key:"download",value:function(a,b){return this.meshSource.downloadFragment(a,b)}}]);return d}(h.ChunkSource),
h=k([g.i(u.a)(m.a)],h),l=function(b){function d(a,b){e(this,d);var h=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));h.source=h.registerDisposer(a.getRef(b.source));h.registerDisposer(h.chunkManager.recomputeChunkPriorities.add(function(){h.updateChunkPriorities()}));return h}a(d,b);D(d,[{key:"updateChunkPriorities",value:function(){if(this.visible){var a=this.source,b=this.chunkManager;g.i(n.b)(this,function(d){d=a.getChunk(d);b.requestChunk(d,f.b.VISIBLE,100);if(d.state===f.a.SYSTEM_MEMORY_WORKER)for(var c=
$jscomp.makeIterator(d.fragmentIds),h=c.next();!h.done;h=c.next())h=a.getFragmentChunk(d,h.value),b.requestChunk(h,f.b.VISIBLE,50)})}}}]);return d}(l.a),l=k([g.i(u.a)(m.b)],l)},function(m,k,g){var e=g(24),c=g(10),a=g(7),b=g(2);k.a=function(d,h,f){f=void 0===f?a.c:f;var l=d.source.spec,n=l.dataType,v=g.i(b.d)(d.chunkDataSize),q=c.b[n],l=v*q*l.numChannels;if(l!==h.byteLength)throw Error("Raw-format chunk is "+h.byteLength+" bytes, but "+v+" * "+q+" = "+l+" bytes are expected.");switch(n){case c.a.UINT8:h=
new Uint8Array(h);break;case c.a.UINT16:h=new Uint16Array(h);g.i(a.d)(h,f);break;case c.a.UINT32:case c.a.UINT64:h=new Uint32Array(h);g.i(a.a)(h,f);break;case c.a.FLOAT32:h=new Float32Array(h);g.i(a.a)(h,f);break;default:throw Error("Unexpected data type: "+n+".");}g.i(e.a)(d,h)}},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}g.d(k,"d",function(){return d});k.a=function(a,c){return new Promise(function(h,f){if(a===b)c(h,f,b);else{var l=
new d,n=a.add(function(){l.cancel()});c(function(a){n();h(a)},function(a){n();f(a)},l)}})};var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();m=new (function(){function a(){e(this,a);this.name="CancellationError";this.message="CANCELED"}c(a,[{key:"toString",value:function(){return"CANCELED"}}]);return a}());
k.b=m;var a=function(){},b={isCanceled:!1,add:function(){return a},remove:a};k.c=b;var d=function(){function b(){e(this,b)}c(b,[{key:"cancel",value:function(){var a=this.handlers;if(null!==a&&(this.handlers=null,void 0!==a))for(var a=$jscomp.makeIterator(a),b=a.next();!b.done;b=a.next())b=b.value,b()}},{key:"add",value:function(b){var d=this,c=this.handlers;if(null===c)return b(),a;void 0===c&&(c=this.handlers=new Set);c.add(b);return function(){d.remove(b)}}},{key:"remove",value:function(a){var b=
this.handlers;null!=b&&b.delete(a)}},{key:"isCanceled",get:function(){return null===this.handlers}}]);return b}()},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}g.d(k,"a",function(){return b});g.d(k,"b",function(){return d});var a=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),b=function(){function b(){c(this,b);this.handlers=new Set;this.count=0;var a=this;this.dispatch=function(){var b=this,d=arguments;++a.count;a.handlers.forEach(function(a){a.apply(b,d)})}}
a(b,[{key:"add",value:function(a){var b=this;this.handlers.add(a);return function(){return b.remove(a)}}},{key:"remove",value:function(a){return this.handlers.delete(a)}},{key:"dispose",value:function(){this.handlers=void 0}}]);return b}(),d=function(a){function b(){c(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}e(b,
a);return b}(b)},function(m,k,g){g.d(k,"a",function(){return f});var e=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),c=new Uint32Array(2),a=[];for(m=2;36>=m;++m){k=Math.floor(32/Math.log2(m));g=Math.pow(m,k);var b=Math.floor(k/2),d=Math.pow(m,b),b=Math.pow(m,k-b),h="^[0-"+String.fromCharCode(48+Math.min(9,
m-1));10<m&&(h+="a-"+String.fromCharCode(97+m-11),h+="A-"+String.fromCharCode(65+m-11));h+="]{1,"+Math.ceil(64/Math.log2(m))+"}$";a[m]={lowDigits:k,lowBase:g,lowBase1:d,lowBase2:b,pattern:new RegExp(h)}}var f=function(){function b(a,d){a=void 0===a?0:a;d=void 0===d?0:d;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.low=a;this.high=d}e(b,[{key:"clone",value:function(){return new b(this.low,this.high)}},{key:"assign",value:function(a){this.low=a.low;this.high=
a.high}},{key:"toString",value:function(b){b=void 0===b?10:b;var d=this.low,c=this.high;if(0===c)return d.toString(b);var c=4294967296*c,h=a[b],f=h.lowBase,h=h.lowDigits,l=c%f,c=Math.floor(c/f),d=d+l,c=c+Math.floor(d/f),d=(d%f).toString(b);return c.toString(b)+"0".repeat(h-d.length)+d}},{key:"tryParseString",value:function(b,d){d=void 0===d?10:d;var c=a[d],h=c.lowDigits,f=c.lowBase,l=c.lowBase1,n=c.lowBase2;if(!c.pattern.test(b))return!1;if(b.length<=h)return this.low=parseInt(b,d),this.high=0,!0;
h=b.length-h;c=parseInt(b.substr(h),d);b=parseInt(b.substr(0,h),d);f=Math.floor(b*f/4294967296);l=c+b%4294967296*l%4294967296*n%4294967296;4294967296<l&&(++f,l-=4294967296);if(l>>>0!==l||f>>>0!==f)return!1;this.low=l;this.high=f;return!0}},{key:"parseString",value:function(a,b){if(!this.tryParseString(a,void 0===b?10:b))throw Error("Failed to parse string as uint64 value: "+JSON.stringify(a)+".");return this}},{key:"valid",value:function(){var a=this.low,b=this.high;return a>>>0===a&&b>>>0===b}},
{key:"toJSON",value:function(){return this.toString()}}],[{key:"less",value:function(a,b){return a.high<b.high||a.high===b.high&&a.low<b.low}},{key:"compare",value:function(a,b){return a.high-b.high||a.low-b.low}},{key:"equal",value:function(a,b){return a.low===b.low&&a.high===b.high}},{key:"min",value:function(a,d){return b.less(a,d)?a:d}},{key:"random",value:function(){crypto.getRandomValues(c);return new b(c[0],c[1])}},{key:"parseString",value:function(a,d){d=void 0===d?10:d;return(new b).parseString(a,
d)}}]);return b}();f.ZERO=new f(0,0)},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b,d){for(var c=0;3>c;++c)a[c]=
Number.POSITIVE_INFINITY,b[c]=Number.NEGATIVE_INFINITY;d=$jscomp.makeIterator(d);for(c=d.next();!c.done;c=d.next())for(var h=c.value.spec,c=h.lowerChunkBound,h=h.upperChunkBound,f=0;3>f;++f)a[f]=Math.min(a[f],c[f]),b[f]=Math.max(b[f],h[f])}function b(a,b,d,c){for(var h=r.FULLY_INSIDE,f=0;3>f;++f){var l;l=a[f];var n=b[f],y=d[f],e=c[f];l=l>=e||n<=y?r.FULLY_OUTSIDE:l>=y&&n<=e?r.FULLY_INSIDE:r.PARTIALLY_INSIDE;switch(l){case r.FULLY_OUTSIDE:return l;case r.PARTIALLY_INSIDE:h=l}}return h}function d(a,
b){var d=b.length,c=0;if(1<d)for(var h=0,f=0;f<d;++f){var l=b[f].spec.chunkLayout,n;n=l.size;for(var l=l.globalToLocalSpatialVector(D,a),e=0,v=0,q=1,t=0;3>t;++t)var g=n[t],q=q*g,g=g*l[t],e=Math.min(e,g),v=Math.max(v,g);n=q/(v-e);n>h&&(h=n,c=f)}return b[c]}function h(a){var b=a.voxelSize,d=void 0===a.lowerVoxelBound?p.f:a.lowerVoxelBound,c=a.upperVoxelBound,h=void 0===a.maxVoxelsPerChunkLog2?18:a.maxVoxelsPerChunkLog2;a=void 0===a.transform?p.i:a.transform;a=g.i(p.j)(p.a.create(),a);b=p.a.multiply(a,
a,b);a=p.a.fromValues(1,1,1);var f;if(void 0===c)f=p.k;else{f=p.a.create();for(var l=0;3>l;++l)f[l]=Math.pow(2,Math.floor(Math.log2(c[l]-d[l])))}for(d=0;d<h;++d){for(var c=Infinity,l=-1,n=0;3>n;++n)if(!(a[n]>=f[n])){var e=a[n]*b[n];e<c&&(c=e,l=n)}c=l;if(-1===c)break;a[c]*=2}return a}function f(a,b){b=b.transform;return void 0===b?void 0===a?p.i:a:void 0===a?b:p.b.multiply(p.b.create(),b,a)}function l(a){if(void 0!==a.chunkDataSizes)return a.chunkDataSizes;var b=void 0===a.chunkLayoutPreference?C.ISOTROPIC:
a.chunkLayoutPreference;switch(b){case C.ISOTROPIC:return[h(a)];case C.FLAT:for(var b=[],d=0;3>d;++d){var c=d,f;f=a.lowerVoxelBound;var l=a.upperVoxelBound,n=d,e=a.voxelSize,v=a.maxVoxelsPerChunkLog2,q=a.transform;p.a.subtract(D,void 0===l?p.k:l,void 0===f?p.f:f);D[n]=1;f=h({voxelSize:e,upperVoxelBound:D,maxVoxelsPerChunkLog2:v,transform:q});b[c]=f}b.push(h(a));return b}throw Error("Invalid chunk layout preference: "+b+".");}var n=g(75),v=g(19),q=g(81),w=g(10),p=g(2);m=g(0);g.d(k,"a",function(){return w.a});
g.d(k,"c",function(){return t});g.d(k,"b",function(){return E});g.d(k,"e",function(){return A});var u=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),D=p.a.create(),r;(function(a){a[a.FULLY_OUTSIDE=0]="FULLY_OUTSIDE";a[a.FULLY_INSIDE=1]="FULLY_INSIDE";a[a.PARTIALLY_INSIDE=2]="PARTIALLY_INSIDE"})(r||(r={}));
var B=[p.a.create(),p.a.create(),p.a.create(),p.a.create()],t=function(h){function f(){e(this,f);var a;a=(f.__proto__||Object.getPrototypeOf(f)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.width=-1;a.height=-1;a.hasViewportToData=!1;a.hasValidViewport=!1;a.viewportToData=p.b.create();a.viewportAxes=[p.a.create(),p.a.create(),p.a.create()];a.previousViewportAxes=[p.a.create(),p.a.create()];
a.centerDataPosition=p.a.create();a.viewportPlaneDistanceToOrigin=0;a.visibleChunkLayouts=new Map;a.visibleLayers=new Map;a.visibleSourcesStale=!0;a.pixelSize=0;p.b.identity(a.viewportToData);return a}c(f,h);u(f,[{key:"onViewportChanged",value:function(){}},{key:"maybeSetHasValidViewport",value:function(){!this.hasValidViewport&&-1!==this.width&&-1!==this.height&&this.hasViewportToData&&(this.hasValidViewport=!0,this.onHasValidViewport());if(this.hasValidViewport)this.onViewportChanged()}},{key:"onHasValidViewport",
value:function(){}},{key:"setViewportSize",value:function(a,b){return a!==this.width||b!==this.height?(this.width=a,this.height=b,this.maybeSetHasValidViewport(),!0):!1}},{key:"setViewportToDataMatrix",value:function(a){if(this.hasViewportToData&&p.b.equals(this.viewportToData,a))return!1;this.hasViewportToData=!0;var b=this.viewportToData;p.b.copy(b,a);g.i(p.e)(b);p.a.transformMat4(this.centerDataPosition,p.f,a);a=0;for(var d=this.viewportAxes,c=this.previousViewportAxes,h=0;3>h;++h){var f=d[h];
g.i(p.g)(f,p.h[h],b);0===h&&(a=p.a.length(f));p.a.normalize(f,f)}this.viewportAxes=d;this.previousViewportAxes=c;if(!g.i(q.a)(a,this.pixelSize)||.95>p.a.dot(d[0],c[0])||.95>p.a.dot(d[1],c[1]))p.a.copy(c[0],d[0]),p.a.copy(c[1],d[1]),this.visibleSourcesStale=!0,this.pixelSize=a;this.viewportPlaneDistanceToOrigin=p.a.dot(this.centerDataPosition,this.viewportAxes[2]);this.onViewportToDataMatrixChanged();this.maybeSetHasValidViewport();return!0}},{key:"onViewportToDataMatrixChanged",value:function(){}},
{key:"updateVisibleSources",value:function(){if(this.visibleSourcesStale){this.visibleSourcesStale=!1;var a=1.1*this.pixelSize,b=this.visibleChunkLayouts,c=this.viewportAxes[2],h=this.visibleLayers;b.clear();for(var f={},h=$jscomp.makeIterator(h),l=h.next();!l.done;f={smallestVoxelSize:f.smallestVoxelSize,visibleSources:f.visibleSources},l=h.next()){var l=$jscomp.makeIterator(l.value),n=l.next().value;f.visibleSources=l.next().value;f.visibleSources.length=0;var l=n.sources,e=l.length,n=void 0;f.smallestVoxelSize=
l[0][0].spec.voxelSize;for(var v=function(b){return function(d){for(var c=0;3>c;++c){var h=d[c];if(h>a&&h>b.smallestVoxelSize[c])return!0}return!1}}(f),q=function(a){return function(d,c){a.visibleSources[a.visibleSources.length++]=d;var h=d.spec.chunkLayout,f=b.get(h);void 0===f&&(f=new Map,b.set(h,f));f.set(d,c)}}(f),n=e-1;;){e=d(c,l[n]);q(e,n);if(0===n||!v(e.spec.voxelSize))break;--n}f.visibleSources.reverse()}}}},{key:"computeVisibleChunks",value:function(d,c){var h=this;this.updateVisibleSources();
for(var f=this.width,l=this.height,n=this.viewportToData,y=0;3>y;++y)B[0][y]=-p.h[0][y]*f/2-p.h[1][y]*l/2,B[1][y]=-p.h[0][y]*f/2+p.h[1][y]*l/2,B[2][y]=p.h[0][y]*f/2-p.h[1][y]*l/2,B[3][y]=p.h[0][y]*f/2+p.h[1][y]*l/2;for(f=0;4>f;++f)p.a.transformMat4(B[f],B[f],n);var e=this.centerDataPosition,q=p.a.create(),t=p.a.create(),w=p.a.create(),k=p.a.create(),x=p.a.create(),G=p.a.create(),E=[],A=[];this.visibleChunkLayouts.forEach(function(f,l){function n(){for(var a=0,b=0,d=0;3>d;++d)var c=G[d],h=q[d],f=t[d]-
h,l=x[d]*f,a=a+c*(h+l),b=b+c*(h+f-l);return a<S?!1:b<=S}function y(a){function d(){U=g.i(v.b)(E,0,k,function(a){var d=a.spec;switch(b(q,t,d.lowerChunkBound,d.upperChunkBound)){case r.PARTIALLY_INSIDE:return!0;case r.FULLY_INSIDE:A.push(a);default:return!1}})}if(0!==A.length||0!==U){for(var h=1,f=0;3>f;++f)h*=Math.max(0,t[f]-q[f]);if(0!==h&&n())if(1===h)c(l,z,q,A);else{for(var e;;)if(h=q[a],f=t[a],e=f-h,1===e)a=(a+1)%3;else break;e=h+Math.floor(.5*e);var w=(a+1)%3,p=A.length;t[a]=e;var k=U;d();y(w);
A.length=p;U=k;t[a]=f;q[a]=e;d();y(w);q[a]=h;A.length=p;U=k}}}var z=d(l),u=Array.from(f.keys()).find(function(a){return!!a.spec.stack});if(void 0!==u&&void 0!==u.spec&&"parameters"in u){f=new Map(f.entries());f.delete(u);var P=p.a.create(),C=p.a.create(),H=[u],L=u.spec,K=L.dataScaler,L=L.voxelSize[0]/K;p.a.scale(P,q,1/K);p.a.scale(C,t,1/K);u=u.parameters.positions;P=p.a.create();p.a.scale(P,e,1/K);K=Math.ceil(Math.sqrt(3*Math.pow(L/2,2)));for(C=1;C<u.length;C++){var m=p.a.fromValues(u[C][0],u[C][1],
u[C][2]),O=p.a.create();p.a.sub(O,m,P);O=p.a.dot(O,G);Math.abs(O)<=K&&(p.a.add(m,m,p.a.fromValues(L/2,L/2,L/2)),c(l,z,m,H))}}a(w,k,f.keys());p.a.set(q,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);p.a.set(t,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);l.globalToLocalSpatialVector(G,h.viewportAxes[2]);for(H=0;3>H;++H)x[H]=0<G[H]?1:0;for(var S=p.a.dot(l.globalToLocalGrid(D,h.centerDataPosition),G),H=0;4>H;++H)for(L=l.globalToLocalGrid(D,B[H]),
u=0;3>u;++u)q[u]=Math.min(q[u],Math.floor(L[u])),t[u]=Math.max(t[u],Math.floor(L[u])+1);p.a.max(q,q,w);p.a.min(t,t,k);A.length=0;E.length=0;f=$jscomp.makeIterator(f.keys());for(H=f.next();!H.done;H=f.next())switch(H=H.value,L=H.spec,b(q,t,L.lowerChunkBound,L.upperChunkBound)){case r.FULLY_INSIDE:A.push(H);break;case r.PARTIALLY_INSIDE:E.push(H)}var U=E.length;y(0)})}}]);return f}(m.e),E;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.IMAGE=1]="IMAGE";a[a.SEGMENTATION=2]="SEGMENTATION";a[a.STACK=3]="STACK";
a[a.METRIC=4]="METRIC"})(E||(E={}));var C;(function(a){a[a.ISOTROPIC=0]="ISOTROPIC";a[a.FLAT=1]="FLAT"})(C||(C={}));var A=function(){function a(b){e(this,a);var d=b.dataType,c=void 0===b.lowerVoxelBound?p.f:b.lowerVoxelBound,h=b.upperVoxelBound,f=b.chunkDataSize,l=b.voxelSize,v=b.transform,q=void 0===b.baseVoxelOffset?p.f:b.baseVoxelOffset,t=b.numChannels,k=void 0===b.lowerClipBound?p.a.multiply(p.a.create(),l,c):b.lowerClipBound,u=void 0===b.upperClipBound?p.a.multiply(p.a.create(),l,h):b.upperClipBound;
this.dataType=b.dataType;this.numChannels=t;this.voxelSize=l;this.chunkDataSize=f;this.chunkLayout=n.a.get(p.a.multiply(p.a.create(),b.chunkDataSize,l),v);this.chunkBytes=g.i(p.d)(b.chunkDataSize)*w.b[d]*t;this.lowerClipBound=k;this.upperClipBound=u;this.lowerVoxelBound=c;this.upperVoxelBound=h;this.baseVoxelOffset=q;d=this.lowerChunkBound=p.a.create();l=this.upperChunkBound=p.a.create();for(v=0;3>v;++v)d[v]=Math.floor(c[v]/f[v]),l[v]=Math.floor((h[v]-1)/f[v]+1);this.compressedSegmentationBlockSize=
b.compressedSegmentationBlockSize;this.stack=b.stack?b.stack:!1;this.dataScaler=b.dataScaler?b.dataScaler:1}u(a,[{key:"toObject",value:function(){return{transform:this.chunkLayout.transform,numChannels:this.numChannels,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,dataType:this.dataType,lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset,compressedSegmentationBlockSize:this.compressedSegmentationBlockSize,
stack:this.stack,dataScaler:this.dataScaler}}}],[{key:"make",value:function(b){return new a(Object.assign({},b,{transform:f(b.transform,b.volumeSourceOptions)}))}},{key:"fromObject",value:function(b){return new a(b)}},{key:"withDefaultCompression",value:function(b){var d=b.compressedSegmentationBlockSize,c=b.dataType,l=b.voxelSize,n=b.transform,e=b.lowerVoxelBound,v=b.upperVoxelBound,n=f(n,b.volumeSourceOptions);void 0!==d||b.volumeType!==E.SEGMENTATION||c!==w.a.UINT32&&c!==w.a.UINT64||(d=h({voxelSize:l,
transform:n,lowerVoxelBound:e,upperVoxelBound:v,maxVoxelsPerChunkLog2:9}));return new a(Object.assign({},b,{compressedSegmentationBlockSize:d,transform:n}))}},{key:"getDefaults",value:function(b){var d=Object.assign({},b,{transform:f(b.transform,b.volumeSourceOptions)});return(void 0===b.chunkDataSizes?l(d):b.chunkDataSizes).map(function(d){return a.withDefaultCompression(Object.assign({},b,{chunkDataSize:d}))})}}]);return a}();k.d="SliceView";k.f="sliceview/RenderLayer"},function(m,k,g){function e(c,
a,b,d,h,f,l){for(var n=new Map,e=Array(3),q=2,g=0;3>g;++g)var p=e[g]=Math.ceil(d[g]/a[g]),q=q*p;var g=e[0],p=e[1],e=e[2],k=d[0],D=d[1];d=d[2];var r=a[0],B=a[1],t=a[2],E=c.length,C=E,A=[0,0,0];c.resize(E+q);for(var q=f[0],G=f[1],H=f[2],y=0;y<e;++y){A[2]=Math.min(t,d-y*t);for(var x=0;x<p;++x){A[1]=Math.min(B,D-x*B);for(var L=0;L<g;++L){A[0]=Math.min(r,k-L*r);var P=c.length-E,m=$jscomp.makeIterator(l(b,h+(y*t*H+x*B*G+L*r*q),f,a,A,E,n,c)),F=m.next().value,m=m.next().value,I=c.data;I[C++]=m|F<<24;I[C++]=
P}}}}k.a=function(c,a,b,d,h,f,l,n,e){var v;if(1===h)v=0;else for(v=1;1<<v<h;)v*=2;var g=Math.ceil(v*d/32),p=c.length,k=g,D=!1,r=Array.prototype.join.call(f.subarray(0,h*e),",");d=b.get(r);void 0===d&&(D=!0,k+=h*e,d=p+g-a,b.set(r,d));c.resize(p+k);c=c.data;if(0<v)switch(v){case 1:for(a=b=0;b<g;++b)k=0,k|=n[l[a+0]]<<0,k|=n[l[a+1]]<<1,k|=n[l[a+2]]<<2,k|=n[l[a+3]]<<3,k|=n[l[a+4]]<<4,k|=n[l[a+5]]<<5,k|=n[l[a+6]]<<6,k|=n[l[a+7]]<<7,k|=n[l[a+8]]<<8,k|=n[l[a+9]]<<9,k|=n[l[a+10]]<<10,k|=n[l[a+11]]<<11,k|=
n[l[a+12]]<<12,k|=n[l[a+13]]<<13,k|=n[l[a+14]]<<14,k|=n[l[a+15]]<<15,k|=n[l[a+16]]<<16,k|=n[l[a+17]]<<17,k|=n[l[a+18]]<<18,k|=n[l[a+19]]<<19,k|=n[l[a+20]]<<20,k|=n[l[a+21]]<<21,k|=n[l[a+22]]<<22,k|=n[l[a+23]]<<23,k|=n[l[a+24]]<<24,k|=n[l[a+25]]<<25,k|=n[l[a+26]]<<26,k|=n[l[a+27]]<<27,k|=n[l[a+28]]<<28,k|=n[l[a+29]]<<29,k|=n[l[a+30]]<<30,k|=n[l[a+31]]<<31,c[p+b]=k,a+=32;break;case 2:for(a=b=0;b<g;++b)k=0,k|=n[l[a+0]]<<0,k|=n[l[a+1]]<<2,k|=n[l[a+2]]<<4,k|=n[l[a+3]]<<6,k|=n[l[a+4]]<<8,k|=n[l[a+5]]<<
10,k|=n[l[a+6]]<<12,k|=n[l[a+7]]<<14,k|=n[l[a+8]]<<16,k|=n[l[a+9]]<<18,k|=n[l[a+10]]<<20,k|=n[l[a+11]]<<22,k|=n[l[a+12]]<<24,k|=n[l[a+13]]<<26,k|=n[l[a+14]]<<28,k|=n[l[a+15]]<<30,c[p+b]=k,a+=16;break;case 4:for(a=b=0;b<g;++b)k=0,k|=n[l[a+0]]<<0,k|=n[l[a+1]]<<4,k|=n[l[a+2]]<<8,k|=n[l[a+3]]<<12,k|=n[l[a+4]]<<16,k|=n[l[a+5]]<<20,k|=n[l[a+6]]<<24,k|=n[l[a+7]]<<28,c[p+b]=k,a+=8;break;case 8:for(a=b=0;b<g;++b)k=0,k|=n[l[a+0]]<<0,k|=n[l[a+1]]<<8,k|=n[l[a+2]]<<16,k|=n[l[a+3]]<<24,c[p+b]=k,a+=4;break;case 16:for(a=
b=0;b<g;++b)k=0,k|=n[l[a+0]]<<0,k|=n[l[a+1]]<<16,c[p+b]=k,a+=2;break;case 32:for(a=b=0;b<g;++b)k=0,k|=n[l[a+0]]<<0,c[p+b]=k,a+=1}if(D)for(l=p+g,n=0,h*=e;n<h;++n)c[l++]=f[n];return[v,d]};k.b=e;k.c=function(c,a,b,d,h,f,l){var n=c.length,v=d[3];c.resize(n+v);for(var q=0;q<v;++q)c.data[n+q]=c.length,e(c,a,b,d,h+f[3]*q,f,l)}},function(m,k,g){k.b=function(e,c,a,b){for(;c<a;){var d=e[c];b(d)?++c:(--a,e[c]=e[a],e[a]=d)}return a};k.a=function(e,c){var a=e.length,b=Array(a);c=b[0]=void 0===c?1:c;for(var d=
1;d<a;++d)c*=e[d-1],b[d]=c;return b};k.c=function(e,c,a){for(var b=new e.constructor(e.length),d=0;d<c*a;d+=a)for(var h=0;h<a;h++)b[h*c+d/a]=e[d+h];return b}},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m=g(1);var b=g(6),d=g(14),h=g(8),f=g(88);g.d(k,"a",function(){return q});var l=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),
n=function p(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return p(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},v=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.backendOnly=!0;return a}a(d,b);l(d,[{key:"initialize",value:function(a){n(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",
this).call(this,a);this.requesters=new Set}},{key:"downloadSucceeded",value:function(){n(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this);var a=this.requesters,b=this.data;this.requesters=void 0;for(var a=$jscomp.makeIterator(a),c=a.next();!c.done;c=a.next())c.value.resolve(b)}},{key:"downloadFailed",value:function(a){n(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadFailed",this).call(this,a);var b=this.requesters;this.requesters=void 0;
for(var b=$jscomp.makeIterator(b),c=b.next();!c.done;c=b.next())c.value.reject(a)}},{key:"freeSystemMemory",value:function(){this.data=void 0}}]);return d}(m.Chunk),q=function(n){function q(a,b){e(this,q);var d=c(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,a));d.decodeFile=b;d.registerDisposer(a);d.registerDisposer(d.chunkManager.recomputeChunkPrioritiesLate.add(function(){d.updateChunkPriorities()}));return d}a(q,n);l(q,[{key:"updateChunkPriorities",value:function(){for(var a=this.chunkManager,
b=$jscomp.makeIterator(this.chunks.values()),d=b.next();!d.done;d=b.next()){var d=d.value,c=d.requesters;if(void 0!==c)for(var c=$jscomp.makeIterator(c),h=c.next();!h.done;h=c.next())h=h.value.getPriority(),a.requestChunk(d,h.priorityTier,h.priority)}}},{key:"download",value:function(a,b){var d=this;return g.i(h.a)(g.i(h.b)(a.key),"arraybuffer",b).then(function(b){a.data=d.decodeFile(b)})}},{key:"getData",value:function(a,c,h){var f=this,l=this.chunks.get(a);void 0===l&&(l=this.getNewChunk_(v),l.initialize(a),
this.addChunk(l));return g.i(d.a)(h,function(a,h,n){switch(l.state){case b.a.FAILED:h(l.error);return;case b.a.SYSTEM_MEMORY_WORKER:a(l.data);return}var e={resolve:a,reject:h,getPriority:c};l.requesters.add(e);n.add(function(){var a=l.requesters;void 0!==a&&(a.delete(e),f.chunkManager.scheduleUpdateChunkPriorities());h(d.b)});f.chunkManager.scheduleUpdateChunkPriorities()})}}],[{key:"get",value:function(a,b){return a.memoize.get("getFileSource:"+g.i(f.a)(b),function(){return new q(a,b)})}},{key:"getData",
value:function(a,b,d,c,h){a=q.get(a,b);d=a.getData(d,c,h);a.dispose();return d}}]);return q}(m.ChunkSourceBase)},function(m,k,g){k.a=function(e){return e.low+","+e.high};k.b=function(e,c){var a=e.segmentEquivalences;e=$jscomp.makeIterator(e.visibleSegments);for(var b=e.next();!b.done;b=e.next())if(b=b.value,a.disjointSets.isMinElement(b))for(var d=$jscomp.makeIterator(a.setElements(b)),h=d.next();!h.done;h=d.next())c(h.value,b)}},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var b=g(1),d=g(6),h=
g(12),f=g(34),l=g(21);m=g(73);var n=g(16),v=g(0);g.d(k,"b",function(){return u});k.a=function(a,b,d,c,f,l,n){g.i(h.d)(a,2,b,d,c,f,l,n)};var q=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),w=function r(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=
Object.getPrototypeOf(a),null!==a)return r(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var n=a.length-1;0<=n;n--)if(l=a[n])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var p=function(b){function d(){e(this,
d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.objectId=new n.a;a.vertexPositions=null;a.vertexAttributes=null;a.indices=null;return a}a(d,b);q(d,[{key:"initializeSkeletonChunk",value:function(a,b){w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",this).call(this,a);this.objectId.assign(b)}},{key:"freeSystemMemory",value:function(){this.vertexPositions=this.indices=null}},{key:"getVertexAttributeBytes",value:function(){var a=this.vertexPositions.byteLength,
b=this.vertexAttributes;null!=b&&b.forEach(function(b){a+=b.byteLength});return a}},{key:"serialize",value:function(a,b){w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"serialize",this).call(this,a,b);var c=this.vertexPositions,h=this.indices;a.indices=h;b.push(h.buffer);h=this.vertexAttributes;if(null!=h&&0<h.length){var f=new Uint8Array(this.getVertexAttributeBytes());f.set(new Uint8Array(c.buffer,c.byteOffset,c.byteLength));var l=a.vertexAttributeOffsets=new Uint32Array(h.length+1);
l[0]=0;var n=c.byteLength;h.forEach(function(a,b){l[b+1]=n;f.set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),n);n+=a.byteLength});b.push(f.buffer);a.vertexAttributes=f}else a.vertexAttributes=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a.vertexAttributeOffsets=Uint32Array.of(0),c.buffer!==b[0]&&b.push(c.buffer);this.vertexPositions=this.indices=this.vertexAttributes=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.indices.byteLength+this.getVertexAttributeBytes();
w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this)}}]);return d}(b.Chunk),u=function(b){function d(a,b){e(this,d);a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));a.parameters=b.parameters;return a}a(d,b);return d}(function(b){function d(){e(this,d);return c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}a(d,b);q(d,[{key:"getChunk",value:function(a){var b=g.i(l.a)(a),d=this.chunks.get(b);void 0===d&&(d=this.getNewChunk_(p),
d.initializeSkeletonChunk(b,a),this.addChunk(d));return d}}]);return d}(b.ChunkSource)),b=function(b){function h(a,b){e(this,h);var d=c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a,b));d.source=d.registerDisposer(a.getRef(b.source));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateChunkPriorities()}));return d}a(h,b);q(h,[{key:"updateChunkPriorities",value:function(){if(this.visible){var a=this.source,b=this.chunkManager;g.i(l.b)(this,function(c){c=a.getChunk(c);
b.requestChunk(c,d.b.VISIBLE,60)})}}}]);return h}(f.a),b=k([g.i(v.a)(m.a)],b)},function(m,k,g){k.a=function(e,c){e.data=new Uint32Array(c)}},function(m,k,g){var e=g(17),c=g(76),a=g(77);m=g(91);k.a=function(h,f){var l=h.source.spec;if(l.compressedSegmentationBlockSize){var n=l.dataType;b.clear();var v=h.chunkDataSize;d[0]=v[0];d[1]=v[1];d[2]=v[2];d[3]=l.numChannels;switch(n){case e.a.UINT32:g.i(c.a)(b,l.compressedSegmentationBlockSize,f,d);break;case e.a.UINT64:g.i(a.a)(b,l.compressedSegmentationBlockSize,
f,d);break;default:throw Error("Unsupported data type for compressed segmentation: "+e.a[n]);}h.data=new Uint32Array(b.view)}else h.data=f};var b=new m.a(2E4),d=Array(4)},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}
function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}g.d(k,"a",function(){return b});g.d(k,"b",function(){return d});var a=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),b=function(){function b(){c(this,b);this.refCount=1}a(b,[{key:"addRef",value:function(){++this.refCount;
return this}},{key:"dispose",value:function(){0===--this.refCount&&this.refCountReachedZero()}},{key:"refCountReachedZero",value:function(){this.disposed();var a=this.disposers;if(null!=a){for(var b=a.length;0<b;--b){var d=a[b-1];"object"===typeof d?d.dispose():d.call(this)}this.disposers=void 0}this.wasDisposed=!0}},{key:"disposed",value:function(){}},{key:"registerDisposer",value:function(a){var b=this.disposers;null==b?this.disposers=[a]:b.push(a);return a}},{key:"unregisterDisposer",value:function(a){var b=
this.disposers;if(null!=b){var d=b.indexOf(a);-1!==d&&b.splice(d,1)}return a}},{key:"registerEventListener",value:function(a,b,d,c){a.addEventListener(b,d,c);this.registerDisposer(function(){return a.removeEventListener(b,d,c)})}},{key:"registerCancellable",value:function(a){this.registerDisposer(function(){a.cancel()});return a}}]);return b}(),d=function(a){function b(a){c(this,b);var d;d=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.value=a;return d}e(b,a);return b}(b)},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}m=g(25);var c=g(15);g.d(k,"a",function(){return b});var a=function(){function a(a,
b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),b=function(b){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var a;a=(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==
typeof a&&"function"!==typeof a?this:a;a.count=0;a.dependencies=new Map;a.signChanged=new c.a;return a}e(d,b);a(d,[{key:"inc",value:function(){1===++this.count&&this.signChanged.dispatch(1)}},{key:"dec",value:function(){0===--this.count&&this.signChanged.dispatch(0)}},{key:"addDependency",value:function(a){var b=this.dependencies,d=b.get(a);void 0!==d?d.refCount+=1:(b.set(a,{refCount:1,unregister:this.signChanged.add(function(b){return b?a.inc():a.dec()})}),0<this.count&&a.inc())}},{key:"removeDependency",
value:function(a){var b=this.dependencies,d=b.get(a);if(void 0===d)throw Error("Attempted to remove non-existing dependency.");0===--d.refCount&&(b.delete(a),d.unregister(),this.count&&a.dec())}},{key:"disposed",value:function(){for(var a=this.count,b=$jscomp.makeIterator(this.dependencies),d=b.next();!d.done;d=b.next()){var d=$jscomp.makeIterator(d.value),c=d.next().value;d.next().value.unregister();a&&c.dec()}this.dependencies.clear()}},{key:"value",get:function(){return this.count}}]);return d}(m.a)},
function(m,k,g){var e=e||{};e.Utils=e.Utils||{};e.Utils.crcTable=null;e.Utils.GUNZIP_MAGIC_COOKIE1=31;e.Utils.GUNZIP_MAGIC_COOKIE2=139;e.Utils.getStringAt=function(c,a,b){for(var d="",h;a<b;a+=1)h=c.getUint8(a),0!==h&&(d+=String.fromCharCode(h));return d};e.Utils.getByteAt=function(c,a){return c.getInt8(a)};e.Utils.getShortAt=function(c,a,b){return c.getInt16(a,b)};e.Utils.getIntAt=function(c,a,b){return c.getInt32(a,b)};e.Utils.getFloatAt=function(c,a,b){return c.getFloat32(a,b)};e.Utils.getDoubleAt=
function(c,a,b){return c.getFloat64(a,b)};e.Utils.getLongAt=function(c,a,b){var d,h=[],f=0;for(d=0;8>d;d+=1)h[d]=e.Utils.getByteAt(c,a+d,b);for(d=h.length-1;0<=d;d--)f=256*f+h[d];return f};e.Utils.toArrayBuffer=function(c){var a,b,d;a=new ArrayBuffer(c.length);b=new Uint8Array(a);for(d=0;d<c.length;d+=1)b[d]=c[d];return a};e.Utils.isString=function(c){return"string"===typeof c||c instanceof String};e.Utils.formatNumber=function(c,a){c=e.Utils.isString(c)?Number(c):c;c=a?c.toPrecision(5):c.toPrecision(7);
return parseFloat(c)};e.Utils.makeCRCTable=function(){for(var c,a=[],b=0;256>b;b++){c=b;for(var d=0;8>d;d++)c=c&1?3988292384^c>>>1:c>>>1;a[b]=c}return a};e.Utils.crc32=function(c){for(var a=e.Utils.crcTable||(e.Utils.crcTable=e.Utils.makeCRCTable()),b=-1,d=0;d<c.byteLength;d++)b=b>>>8^a[(b^c.getUint8(d))&255];return(b^-1)>>>0};"undefined"!==typeof m&&m.exports&&(m.exports=e.Utils)},function(m,k,g){k=g(5).assign;var e=g(99),c=g(100);g=g(45);var a={};k(a,e,c,g);m.exports=a},function(m,k,g){m.exports=
{2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}Object.defineProperty(k,"__esModule",{value:!0});m=g(1);k=g(60);var c=g(3),a=g(9),b=g(36),d=g(13),h=g(8),f=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),l=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&
"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var n=a.length-1;0<=n;n--)if(l=a[n])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f},n=new Map;n.set("npz",b.a);n.set("jpeg",a.a);n.set("raw",d.a);c=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a;a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.chunkDecoder=n.get(a.parameters.encoding);return a}e(b,a);f(b,[{key:"download",value:function(a,b){for(var d=this,c=this.parameters,f=c.urlPrefix+"/"+c.key+"/"+c.channel+"/"+(c.encoding+"/"+c.resolution),l=this.computeChunkBounds(a),n=a.chunkDataSize,e=0;3>e;++e)f+="/"+l[e]+","+(l[e]+n[e]);c.neariso&&(f+="/neariso/");return g.i(h.a)(g.i(h.c)(c.baseUrls,f),"arraybuffer",b).then(function(b){return d.chunkDecoder(a,b)})}}]);return b}(c.ParameterizedVolumeChunkSource);
c=l([g.i(m.registerChunkSource)(k.a)],c)},function(m,k,g){Object.defineProperty(k,"__esModule",{value:!0});m=g(0);g.d(k,"rpc",function(){return e});var e=new m.g(self)},function(m,k,g){var e=g(33),c=g(8),a=g(14);k.b=function(a){return h[a]};k.a=function(h,l,n){n=void 0===n?a.c:n;var f=void 0;return new Promise(function(v,k){function q(a){null===f?--b:(f=g.i(c.c)(d[h],l.path,l.method),f.responseType=l.responseType,f.setRequestHeader("Authorization",a.tokenType+" "+a.accessToken),f.onloadend=function(){if(null===
f)--b;else{var d=this.status;200<=d&&300>d?(--b,n.remove(w),v(this.response)):401===d?g.i(e.a)(a).then(q):504===d?g.i(e.a)().then(q):(--b,n.remove(w),k(c.d.fromXhr(this)))}},f.send(l.payload))}var w=function(){var b=f;f=null;null!=b&&b.abort();k(a.b)};n.add(w);g.i(e.a)().then(q)})};var b=0,d=[],h=["prod"];d[0]=["https://brainmaps.googleapis.com"]},function(m,k,g){g.d(k,"b",function(){return e});k.a=function(b){if(null!==c&&(null===a||null==b||b.generationId!==a.generationId))return c;a=null;c=e.getNewTokenPromise(b);
c.then(function(b){a=b});return c};var e=new function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");},c=null,a=null},function(m,k,g){function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g(69);g(80);g(70);var a=g(26);m=g(0);g.d(k,"a",function(){return d});var b=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),d=function(d){function h(b,d){if(!(this instanceof
h))throw new TypeError("Cannot call a class as a function");var c=e(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,b,d));c.visibilityCount=new a.a;c.chunkManager=b.get(d.chunkManager);c.visibleSegments=b.get(d.visibleSegments);c.segmentEquivalences=b.get(d.segmentEquivalences);b=function(){c.chunkManager.scheduleUpdateChunkPriorities()};c.registerDisposer(c.visibleSegments.changed.add(b));c.registerDisposer(c.segmentEquivalences.changed.add(b));c.visibilityCount.signChanged.add(b);return c}
c(h,d);b(h,[{key:"visible",get:function(){return 0<this.visibilityCount.value}}]);return h}(m.b)},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){b=b.match(C);if(null===b||void 0===b[1])throw Error('Data source URL must have the form "<protocol>://<path>".');var d=b[1];a=a.get(d);if(void 0===a)throw Error("Unsupported data source: "+JSON.stringify(d)+".");return[a,b[2],d]}function d(a,d,c,h){var f=$jscomp.makeIterator(b(t,d));d=f.next().value;
f=f.next().value;return d.getMesh(a,f,c,h)}function h(a,d,c,h){var f=$jscomp.makeIterator(b(E,d));d=f.next().value;f=f.next().value;return d.getMeshVertexAttributes(a,f,c,h)}function f(a){var b=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b=Math.min(b,c),d=Math.max(d,c);return[b,d]}function l(a,b,c,l){for(var n=[d(a,b.meshSourceUrl,c,l)],e=$jscomp.makeIterator(b.attributeSourceUrls),y=e.next();!y.done;y=e.next())n.push(h(a,
y.value,c,l));return Promise.all(n).then(function(a){function d(a,b,d){for(var c=a.length,l=0;l<c;++l){var n=a[l],e=b[l],y=d,v=$jscomp.makeIterator(f(e)),q=v.next().value,v=v.next().value;h.info.vertexAttributes.push({name:n.name,source:y,numComponents:n.numComponents,dataType:n.dataType,min:q,max:v});h.vertexAttributes.push(e)}}var c=a[0],h={info:{numVertices:c.info.numVertices,numTriangles:c.info.numTriangles,vertexAttributes:[]},vertexPositions:c.vertexPositions,indices:c.indices,vertexNormals:c.vertexNormals,
vertexAttributes:[]};d(c.info.vertexAttributes,c.vertexAttributes);b.attributeSourceUrls.forEach(function(b,h){h=a[h+1];if(h.numVertices!==c.info.numVertices)throw Error("Vertex attribute source "+JSON.stringify(b)+" specifies attributes for "+h.numVertices+" vertices, but mesh has "+c.info.numVertices+" vertices.");d(h.attributeInfo,h.attributes,b)});return h})}var n=g(1),v=g(6),q=g(12),w=g(72),p=g(11),u=g(26);m=g(0);k.b=function(a,b){t.set(a,b)};k.a=function(a,b){E.set(a,b)};var D=function(){function a(a,
b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),r=function G(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return G(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};k=this&&this.__decorate||function(a,
b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var n=a.length-1;0<=n;n--)if(l=a[n])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var B=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.data=null;return a}a(d,b);D(d,[{key:"freeSystemMemory",value:function(){this.data=
null}},{key:"serialize",value:function(a,b){r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"serialize",this).call(this,a,b);var c=this.data,h=c.vertexPositions,f=c.indices,l=c.vertexNormals,c=c.vertexAttributes;a.vertexPositions=h;a.indices=f;a.vertexNormals=l;a.vertexAttributes=c;a=new Set;a.add(h.buffer);a.add(f.buffer);a.add(l.buffer);h=$jscomp.makeIterator(c);for(f=h.next();!f.done;f=h.next())a.add(f.value.buffer);b.push.apply(b,[].concat($jscomp.arrayFromIterable(a)));this.data=
null}},{key:"downloadSucceeded",value:function(){for(var a=this.data,b=a.vertexAttributes,a=this.gpuMemoryBytes=a.vertexPositions.byteLength+a.indices.byteLength+a.vertexNormals.byteLength,b=$jscomp.makeIterator(b),c=b.next();!c.done;c=b.next())a+=c.value.byteLength;this.systemMemoryBytes=this.gpuMemoryBytes=a;r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this)}}]);return d}(n.Chunk),t=new Map,E=new Map,C=/^(?:([a-zA-Z-+_]+):\/\/)?(.*)$/,n=function(b){function d(a,
b){e(this,d);a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));a.parameters=b.parameters;a.info=b.info;return a}a(d,b);D(d,[{key:"getChunk",value:function(){var a=w.a,b=this.chunks.get(a);void 0===b&&(b=this.getNewChunk_(B),b.initialize(a),this.addChunk(b));return b}},{key:"download",value:function(a,b){var d=this;return l(this.chunkManager,this.parameters,function(){return{priorityTier:a.priorityTier,priority:a.priority}},b).then(function(b){if(g.i(p.a)(b.info)!==g.i(p.a)(d.info))throw Error("Mesh info has changed.");
void 0===b.vertexNormals&&(b.vertexNormals=g.i(q.a)(b.vertexPositions,b.indices));a.data=b})}}]);return d}(n.ChunkSource),n=k([g.i(m.a)(w.b)],n),n=function(b){function d(a,b){e(this,d);var h=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));h.visibilityCount=new u.a;h.chunkManager=a.get(b.chunkManager);h.source=h.registerDisposer(a.getRef(b.source));h.registerDisposer(h.chunkManager.recomputeChunkPriorities.add(function(){h.updateChunkPriorities()}));h.visibilityCount.signChanged.add(function(){h.chunkManager.scheduleUpdateChunkPriorities()});
return h}a(d,b);D(d,[{key:"updateChunkPriorities",value:function(){if(this.visible){var a=this.chunkManager,b=this.source.getChunk();a.requestChunk(b,v.b.VISIBLE,50)}}},{key:"visible",get:function(){return 0<this.visibilityCount.value}}]);return d}(m.b),n=k([g.i(m.a)(w.c)],n);g.i(m.c)(w.d,function(a,b){var d=this.getRef(a.chunkManager);try{return l(d,a.parameters,function(){return{priorityTier:v.b.VISIBLE,priority:1E3}},b).then(function(a){return{value:a.info}})}finally{d.dispose()}})},function(m,
k,g){var e=g(24),c=g(17),a=g(2),b=g(87),d=g(28);g.n(d);k.a=function(h,f){f=g.i(b.a)(g.i(d.inflate)(new Uint8Array(f)));var l=h.chunkDataSize,n=h.source,v=n.spec.numChannels,q=f.shape;if(4!==q.length||q[0]!==v||q[1]!==l[2]||q[2]!==l[1]||q[3]!==l[0])throw Error("Shape "+JSON.stringify(q)+" does not match chunkDataSize "+g.i(a.l)(l));l=f.dataType.dataType;n=n.spec;if(l!==n.dataType)throw Error("Data type "+c.a[l]+" does not match expected data type "+c.a[n.dataType]);g.i(e.a)(h,f.data)}},function(m,
k,g){var e=g(28);g.n(e);k.a=function(c){c=c instanceof ArrayBuffer?new Uint8Array(c):new Uint8Array(c.buffer,c.byteOffset,c.byteLength);var a=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);return 2<a.length&&31===a[0]&&139===a[1]?g.i(e.inflate)(c):c}},function(m,k,g){k.glMatrix=g(4);k.mat2=g(92);k.mat2d=g(93);k.mat3=g(39);k.mat4=g(94);k.quat=g(95);k.vec2=g(96);k.vec3=g(40);k.vec4=g(41)},function(m,k,g){var e=g(4);k={create:function(){var c=new e.ARRAY_TYPE(9);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c},fromMat4:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c},clone:function(c){var a=new e.ARRAY_TYPE(9);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a},copy:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c},fromValues:function(c,a,b,d,h,f,l,n,v){var q=new e.ARRAY_TYPE(9);q[0]=c;q[1]=
a;q[2]=b;q[3]=d;q[4]=h;q[5]=f;q[6]=l;q[7]=n;q[8]=v;return q},set:function(c,a,b,d,h,f,l,n,e,q){c[0]=a;c[1]=b;c[2]=d;c[3]=h;c[4]=f;c[5]=l;c[6]=n;c[7]=e;c[8]=q;return c},identity:function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c},transpose:function(c,a){if(c===a){var b=a[1],d=a[2],h=a[5];c[1]=a[3];c[2]=a[6];c[3]=b;c[5]=a[7];c[6]=d;c[7]=h}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c},invert:function(c,a){var b=
a[0],d=a[1],h=a[2],f=a[3],l=a[4],n=a[5],e=a[6],q=a[7];a=a[8];var g=a*l-n*q,k=-a*f+n*e,u=q*f-l*e,m=b*g+d*k+h*u;if(!m)return null;m=1/m;c[0]=g*m;c[1]=(-a*d+h*q)*m;c[2]=(n*d-h*l)*m;c[3]=k*m;c[4]=(a*b-h*e)*m;c[5]=(-n*b+h*f)*m;c[6]=u*m;c[7]=(-q*b+d*e)*m;c[8]=(l*b-d*f)*m;return c},adjoint:function(c,a){var b=a[0],d=a[1],h=a[2],f=a[3],l=a[4],n=a[5],e=a[6],q=a[7];a=a[8];c[0]=l*a-n*q;c[1]=h*q-d*a;c[2]=d*n-h*l;c[3]=n*e-f*a;c[4]=b*a-h*e;c[5]=h*f-b*n;c[6]=f*q-l*e;c[7]=d*e-b*q;c[8]=b*l-d*f;return c},determinant:function(c){var a=
c[3],b=c[4],d=c[5],h=c[6],f=c[7],l=c[8];return c[0]*(l*b-d*f)+c[1]*(-l*a+d*h)+c[2]*(f*a-b*h)},multiply:function(c,a,b){var d=a[0],h=a[1],f=a[2],l=a[3],n=a[4],e=a[5],q=a[6],g=a[7];a=a[8];var k=b[0],u=b[1],m=b[2],r=b[3],B=b[4],t=b[5],E=b[6],C=b[7];b=b[8];c[0]=k*d+u*l+m*q;c[1]=k*h+u*n+m*g;c[2]=k*f+u*e+m*a;c[3]=r*d+B*l+t*q;c[4]=r*h+B*n+t*g;c[5]=r*f+B*e+t*a;c[6]=E*d+C*l+b*q;c[7]=E*h+C*n+b*g;c[8]=E*f+C*e+b*a;return c}};k.mul=k.multiply;k.translate=function(c,a,b){var d=a[0],h=a[1],f=a[2],l=a[3],n=a[4],
e=a[5],q=a[6],g=a[7];a=a[8];var k=b[0];b=b[1];c[0]=d;c[1]=h;c[2]=f;c[3]=l;c[4]=n;c[5]=e;c[6]=k*d+b*l+q;c[7]=k*h+b*n+g;c[8]=k*f+b*e+a;return c};k.rotate=function(c,a,b){var d=a[0],h=a[1],f=a[2],l=a[3],n=a[4],e=a[5],g=a[6],k=a[7];a=a[8];var p=Math.sin(b);b=Math.cos(b);c[0]=b*d+p*l;c[1]=b*h+p*n;c[2]=b*f+p*e;c[3]=b*l-p*d;c[4]=b*n-p*h;c[5]=b*e-p*f;c[6]=g;c[7]=k;c[8]=a;return c};k.scale=function(c,a,b){var d=b[0];b=b[1];c[0]=d*a[0];c[1]=d*a[1];c[2]=d*a[2];c[3]=b*a[3];c[4]=b*a[4];c[5]=b*a[5];c[6]=a[6];c[7]=
a[7];c[8]=a[8];return c};k.fromTranslation=function(c,a){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=a[0];c[7]=a[1];c[8]=1;return c};k.fromRotation=function(c,a){var b=Math.sin(a);a=Math.cos(a);c[0]=a;c[1]=b;c[2]=0;c[3]=-b;c[4]=a;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};k.fromScaling=function(c,a){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=a[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};k.fromMat2d=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=0;c[6]=a[4];c[7]=a[5];c[8]=1;return c};k.fromQuat=
function(c,a){var b=a[0],d=a[1],h=a[2];a=a[3];var f=b+b,l=d+d,n=h+h,b=b*f,e=d*f,d=d*l,g=h*f,k=h*l,h=h*n,f=a*f,l=a*l;a*=n;c[0]=1-d-h;c[3]=e-a;c[6]=g+l;c[1]=e+a;c[4]=1-b-h;c[7]=k-f;c[2]=g-l;c[5]=k+f;c[8]=1-b-d;return c};k.normalFromMat4=function(c,a){var b=a[0],d=a[1],h=a[2],f=a[3],l=a[4],n=a[5],e=a[6],g=a[7],k=a[8],p=a[9],u=a[10],m=a[11],r=a[12],B=a[13],t=a[14];a=a[15];var E=b*n-d*l,C=b*e-h*l,A=b*g-f*l,G=d*e-h*n,H=d*g-f*n,y=h*g-f*e,x=k*B-p*r,L=k*t-u*r,k=k*a-m*r,P=p*t-u*B,p=p*a-m*B,u=u*a-m*t,m=E*u-
C*p+A*P+G*k-H*L+y*x;if(!m)return null;m=1/m;c[0]=(n*u-e*p+g*P)*m;c[1]=(e*k-l*u-g*L)*m;c[2]=(l*p-n*k+g*x)*m;c[3]=(h*p-d*u-f*P)*m;c[4]=(b*u-h*k+f*L)*m;c[5]=(d*k-b*p-f*x)*m;c[6]=(B*y-t*H+a*G)*m;c[7]=(t*A-r*y-a*C)*m;c[8]=(r*H-B*A+a*E)*m;return c};k.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"};k.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+
Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};k.add=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c};k.subtract=function(c,a,b){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c};k.sub=k.subtract;k.multiplyScalar=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;
c[5]=a[5]*b;c[6]=a[6]*b;c[7]=a[7]*b;c[8]=a[8]*b;return c};k.multiplyScalarAndAdd=function(c,a,b,d){c[0]=a[0]+b[0]*d;c[1]=a[1]+b[1]*d;c[2]=a[2]+b[2]*d;c[3]=a[3]+b[3]*d;c[4]=a[4]+b[4]*d;c[5]=a[5]+b[5]*d;c[6]=a[6]+b[6]*d;c[7]=a[7]+b[7]*d;c[8]=a[8]+b[8]*d;return c};k.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]&&c[4]===a[4]&&c[5]===a[5]&&c[6]===a[6]&&c[7]===a[7]&&c[8]===a[8]};k.equals=function(c,a){var b=c[0],d=c[1],h=c[2],f=c[3],l=c[4],n=c[5],g=c[6],q=c[7],k=c[8],
p=a[0],m=a[1],D=a[2],r=a[3],B=a[4],t=a[5];c=c[6];var E=a[7];a=a[8];return Math.abs(b-p)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(p))&&Math.abs(d-m)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(h-D)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(f-r)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(r))&&Math.abs(l-B)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(n-t)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(g-c)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(c))&&
Math.abs(q-E)<=e.EPSILON*Math.max(1,Math.abs(q),Math.abs(E))&&Math.abs(k-a)<=e.EPSILON*Math.max(1,Math.abs(k),Math.abs(a))};m.exports=k},function(m,k,g){var e=g(4),c={create:function(){var a=new e.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new e.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,d){var c=new e.ARRAY_TYPE(3);c[0]=a;c[1]=b;c[2]=d;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,d,c){a[0]=b;a[1]=
d;a[2]=c;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}};c.sub=c.subtract;c.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a};c.mul=c.multiply;c.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a};c.div=c.divide;c.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};c.floor=function(a,b){a[0]=
Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};c.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};c.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};c.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};c.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};c.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;
a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;return a};c.distance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(d*d+c*c+a*a)};c.dist=c.distance;c.squaredDistance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return d*d+c*c+a*a};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];
a[1]=-b[1];a[2]=-b[2];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};c.normalize=function(a,b){var d=b[0],c=b[1],f=b[2],d=d*d+c*c+f*f;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};c.cross=function(a,b,d){var c=b[0],f=b[1];b=b[2];var l=d[0],n=d[1];d=d[2];a[0]=f*d-b*n;a[1]=b*l-c*d;a[2]=c*n-f*l;return a};c.lerp=function(a,b,d,c){var h=b[0],l=b[1];b=b[2];a[0]=h+c*(d[0]-h);a[1]=l+c*(d[1]-
l);a[2]=b+c*(d[2]-b);return a};c.hermite=function(a,b,d,c,f,l){var h=l*l,e=h*(2*l-3)+1,g=h*(l-2)+l,k=h*(l-1);l=h*(3-2*l);a[0]=b[0]*e+d[0]*g+c[0]*k+f[0]*l;a[1]=b[1]*e+d[1]*g+c[1]*k+f[1]*l;a[2]=b[2]*e+d[2]*g+c[2]*k+f[2]*l;return a};c.bezier=function(a,b,d,c,f,l){var h=1-l,e=h*h,g=l*l,k=e*h,e=3*l*e,h=3*g*h;l*=g;a[0]=b[0]*k+d[0]*e+c[0]*h+f[0]*l;a[1]=b[1]*k+d[1]*e+c[1]*h+f[1]*l;a[2]=b[2]*k+d[2]*e+c[2]*h+f[2]*l;return a};c.random=function(a,b){b=b||1;var d=2*e.RANDOM()*Math.PI,c=2*e.RANDOM()-1,f=Math.sqrt(1-
c*c)*b;a[0]=Math.cos(d)*f;a[1]=Math.sin(d)*f;a[2]=c*b;return a};c.transformMat4=function(a,b,d){var c=b[0],f=b[1];b=b[2];var l=d[3]*c+d[7]*f+d[11]*b+d[15],l=l||1;a[0]=(d[0]*c+d[4]*f+d[8]*b+d[12])/l;a[1]=(d[1]*c+d[5]*f+d[9]*b+d[13])/l;a[2]=(d[2]*c+d[6]*f+d[10]*b+d[14])/l;return a};c.transformMat3=function(a,b,d){var c=b[0],f=b[1];b=b[2];a[0]=c*d[0]+f*d[3]+b*d[6];a[1]=c*d[1]+f*d[4]+b*d[7];a[2]=c*d[2]+f*d[5]+b*d[8];return a};c.transformQuat=function(a,b,d){var c=b[0],f=b[1],l=b[2];b=d[0];var n=d[1],
e=d[2];d=d[3];var g=d*c+n*l-e*f,k=d*f+e*c-b*l,p=d*l+b*f-n*c,c=-b*c-n*f-e*l;a[0]=g*d+c*-b+k*-e-p*-n;a[1]=k*d+c*-n+p*-b-g*-e;a[2]=p*d+c*-e+g*-n-k*-b;return a};c.rotateX=function(a,b,d,c){var h=[],l=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];l[0]=h[0];l[1]=h[1]*Math.cos(c)-h[2]*Math.sin(c);l[2]=h[1]*Math.sin(c)+h[2]*Math.cos(c);a[0]=l[0]+d[0];a[1]=l[1]+d[1];a[2]=l[2]+d[2];return a};c.rotateY=function(a,b,d,c){var h=[],l=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];l[0]=h[2]*Math.sin(c)+h[0]*
Math.cos(c);l[1]=h[1];l[2]=h[2]*Math.cos(c)-h[0]*Math.sin(c);a[0]=l[0]+d[0];a[1]=l[1]+d[1];a[2]=l[2]+d[2];return a};c.rotateZ=function(a,b,d,c){var h=[],l=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];l[0]=h[0]*Math.cos(c)-h[1]*Math.sin(c);l[1]=h[0]*Math.sin(c)+h[1]*Math.cos(c);l[2]=h[2];a[0]=l[0]+d[0];a[1]=l[1]+d[1];a[2]=l[2]+d[2];return a};c.forEach=function(){var a=c.create();return function(b,d,c,f,l,n){d||(d=3);c||(c=0);for(f=f?Math.min(f*d+c,b.length):b.length;c<f;c+=d)a[0]=b[c],a[1]=b[c+
1],a[2]=b[c+2],l(a,a,n),b[c]=a[0],b[c+1]=a[1],b[c+2]=a[2];return b}}();c.angle=function(a,b){a=c.fromValues(a[0],a[1],a[2]);b=c.fromValues(b[0],b[1],b[2]);c.normalize(a,a);c.normalize(b,b);b=c.dot(a,b);return 1<b?0:Math.acos(b)};c.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};c.equals=function(a,b){var d=a[0],c=a[1];a=a[2];var f=b[0],l=b[1];b=b[2];return Math.abs(d-f)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&
Math.abs(c-l)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(a-b)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};m.exports=c},function(m,k,g){var e=g(4),c={create:function(){var a=new e.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new e.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,d,c){var h=new e.ARRAY_TYPE(4);h[0]=a;h[1]=b;h[2]=d;h[3]=c;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},
set:function(a,b,d,c,f){a[0]=b;a[1]=d;a[2]=c;a[3]=f;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};c.sub=c.subtract;c.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};c.mul=c.multiply;c.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};c.div=c.divide;c.ceil=function(a,
b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};c.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};c.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};c.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};c.round=function(a,b){a[0]=
Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};c.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};c.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;a[3]=b[3]+d[3]*c;return a};c.distance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1],f=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(d*d+c*c+f*f+a*a)};c.dist=c.distance;c.squaredDistance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1],f=b[2]-a[2];a=b[3]-a[3];return d*
d+c*c+f*f+a*a};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0],d=a[1],c=a[2];a=a[3];return Math.sqrt(b*b+d*d+c*c+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0],d=a[1],c=a[2];a=a[3];return b*b+d*d+c*c+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};c.normalize=function(a,b){var d=b[0],c=b[1],f=b[2];b=b[3];var l=d*d+c*c+f*f+b*b;0<l&&(l=
1/Math.sqrt(l),a[0]=d*l,a[1]=c*l,a[2]=f*l,a[3]=b*l);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};c.lerp=function(a,b,d,c){var h=b[0],l=b[1],n=b[2];b=b[3];a[0]=h+c*(d[0]-h);a[1]=l+c*(d[1]-l);a[2]=n+c*(d[2]-n);a[3]=b+c*(d[3]-b);return a};c.random=function(a,b){b=b||1;a[0]=e.RANDOM();a[1]=e.RANDOM();a[2]=e.RANDOM();a[3]=e.RANDOM();c.normalize(a,a);c.scale(a,a,b);return a};c.transformMat4=function(a,b,d){var c=b[0],f=b[1],l=b[2];b=b[3];a[0]=d[0]*c+d[4]*f+d[8]*l+d[12]*
b;a[1]=d[1]*c+d[5]*f+d[9]*l+d[13]*b;a[2]=d[2]*c+d[6]*f+d[10]*l+d[14]*b;a[3]=d[3]*c+d[7]*f+d[11]*l+d[15]*b;return a};c.transformQuat=function(a,b,d){var c=b[0],f=b[1],l=b[2],n=d[0],e=d[1],g=d[2];d=d[3];var k=d*c+e*l-g*f,p=d*f+g*c-n*l,m=d*l+n*f-e*c,c=-n*c-e*f-g*l;a[0]=k*d+c*-n+p*-g-m*-e;a[1]=p*d+c*-e+m*-n-k*-g;a[2]=m*d+c*-g+k*-e-p*-n;a[3]=b[3];return a};c.forEach=function(){var a=c.create();return function(b,d,c,f,l,n){d||(d=4);c||(c=0);for(f=f?Math.min(f*d+c,b.length):b.length;c<f;c+=d)a[0]=b[c],a[1]=
b[c+1],a[2]=b[c+2],a[3]=b[c+3],l(a,a,n),b[c]=a[0],b[c+1]=a[1],b[c+2]=a[2],b[c+3]=a[3];return b}}();c.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};c.equals=function(a,b){var d=a[0],c=a[1],f=a[2];a=a[3];var l=b[0],n=b[1],g=b[2];b=b[3];return Math.abs(d-l)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(c-n)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))&&Math.abs(f-g)<=e.EPSILON*
Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(a-b)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};m.exports=c},function(m,k,g){var e=e||{};e.Utils=e.Utils||g(27);e.NIFTI1=e.NIFTI1||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=
this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.isHDR=!1;this.extensionFlag=[0,0,0,0];this.extensionCode=this.extensionSize=0};e.NIFTI1.TYPE_NONE=0;e.NIFTI1.TYPE_BINARY=1;e.NIFTI1.TYPE_UINT8=2;e.NIFTI1.TYPE_INT16=4;e.NIFTI1.TYPE_INT32=8;e.NIFTI1.TYPE_FLOAT32=16;e.NIFTI1.TYPE_COMPLEX64=
32;e.NIFTI1.TYPE_FLOAT64=64;e.NIFTI1.TYPE_RGB24=128;e.NIFTI1.TYPE_INT8=256;e.NIFTI1.TYPE_UINT16=512;e.NIFTI1.TYPE_UINT32=768;e.NIFTI1.TYPE_INT64=1024;e.NIFTI1.TYPE_UINT64=1280;e.NIFTI1.TYPE_FLOAT128=1536;e.NIFTI1.TYPE_COMPLEX128=1792;e.NIFTI1.TYPE_COMPLEX256=2048;e.NIFTI1.XFORM_UNKNOWN=0;e.NIFTI1.XFORM_SCANNER_ANAT=1;e.NIFTI1.XFORM_ALIGNED_ANAT=2;e.NIFTI1.XFORM_TALAIRACH=3;e.NIFTI1.XFORM_MNI_152=4;e.NIFTI1.SPATIAL_UNITS_MASK=7;e.NIFTI1.TEMPORAL_UNITS_MASK=56;e.NIFTI1.UNITS_UNKNOWN=0;e.NIFTI1.UNITS_METER=
1;e.NIFTI1.UNITS_MM=2;e.NIFTI1.UNITS_MICRON=3;e.NIFTI1.UNITS_SEC=8;e.NIFTI1.UNITS_MSEC=16;e.NIFTI1.UNITS_USEC=24;e.NIFTI1.UNITS_HZ=32;e.NIFTI1.UNITS_PPM=40;e.NIFTI1.UNITS_RADS=48;e.NIFTI1.MAGIC_COOKIE=348;e.NIFTI1.STANDARD_HEADER_SIZE=348;e.NIFTI1.MAGIC_NUMBER_LOCATION=344;e.NIFTI1.MAGIC_NUMBER=[110,43,49];e.NIFTI1.MAGIC_NUMBER2=[110,105,49];e.NIFTI1.EXTENSION_HEADER_SIZE=8;e.NIFTI1.prototype.readHeader=function(c){c=new DataView(c);var a=e.Utils.getIntAt(c,0,this.littleEndian),b,d;a!==e.NIFTI1.MAGIC_COOKIE&&
(this.littleEndian=!0,a=e.Utils.getIntAt(c,0,this.littleEndian));if(a!==e.NIFTI1.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.dim_info=e.Utils.getByteAt(c,39);for(b=0;8>b;b+=1)a=40+2*b,this.dims[b]=e.Utils.getShortAt(c,a,this.littleEndian);this.intent_p1=e.Utils.getFloatAt(c,56,this.littleEndian);this.intent_p2=e.Utils.getFloatAt(c,60,this.littleEndian);this.intent_p3=e.Utils.getFloatAt(c,64,this.littleEndian);this.intent_code=e.Utils.getShortAt(c,68,this.littleEndian);
this.datatypeCode=e.Utils.getShortAt(c,70,this.littleEndian);this.numBitsPerVoxel=e.Utils.getShortAt(c,72,this.littleEndian);this.slice_start=e.Utils.getShortAt(c,74,this.littleEndian);for(b=0;8>b;b+=1)a=76+4*b,this.pixDims[b]=e.Utils.getFloatAt(c,a,this.littleEndian);this.vox_offset=e.Utils.getFloatAt(c,108,this.littleEndian);this.scl_slope=e.Utils.getFloatAt(c,112,this.littleEndian);this.scl_inter=e.Utils.getFloatAt(c,116,this.littleEndian);this.slice_end=e.Utils.getShortAt(c,120,this.littleEndian);
this.slice_code=e.Utils.getByteAt(c,122);this.xyzt_units=e.Utils.getByteAt(c,123);this.cal_max=e.Utils.getFloatAt(c,124,this.littleEndian);this.cal_min=e.Utils.getFloatAt(c,128,this.littleEndian);this.slice_duration=e.Utils.getFloatAt(c,132,this.littleEndian);this.toffset=e.Utils.getFloatAt(c,136,this.littleEndian);this.description=e.Utils.getStringAt(c,148,228);this.aux_file=e.Utils.getStringAt(c,228,252);this.qform_code=e.Utils.getShortAt(c,252,this.littleEndian);this.sform_code=e.Utils.getShortAt(c,
254,this.littleEndian);this.quatern_b=e.Utils.getFloatAt(c,256,this.littleEndian);this.quatern_c=e.Utils.getFloatAt(c,260,this.littleEndian);this.quatern_d=e.Utils.getFloatAt(c,264,this.littleEndian);this.qoffset_x=e.Utils.getFloatAt(c,268,this.littleEndian);this.qoffset_y=e.Utils.getFloatAt(c,272,this.littleEndian);this.qoffset_z=e.Utils.getFloatAt(c,276,this.littleEndian);for(b=0;3>b;b+=1)for(d=0;4>d;d+=1)a=280+4*(4*b+d),this.affine[b][d]=e.Utils.getFloatAt(c,a,this.littleEndian);this.affine[3][0]=
0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.intent_name=e.Utils.getStringAt(c,328,344);this.magic=e.Utils.getStringAt(c,344,348);this.isHDR=this.magic===e.NIFTI1.MAGIC_NUMBER2;c.byteLength>e.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=e.Utils.getByteAt(c,348),this.extensionFlag[1]=e.Utils.getByteAt(c,349),this.extensionFlag[2]=e.Utils.getByteAt(c,350),this.extensionFlag[3]=e.Utils.getByteAt(c,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(c),this.extensionCode=
this.getExtensionCode(c)))};e.NIFTI1.prototype.toFormattedString=function(){var c=e.Utils.formatNumber,a;a=""+("Dim Info = "+this.dim_info+"\n");a+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";a+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";a+="Intent Code = "+this.intent_code+"\n";a+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+
")\n";a+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n";a+="Slice Start = "+this.slice_start+"\n";a+="Voxel Dimensions (1-8): "+c(this.pixDims[0])+", "+c(this.pixDims[1])+", "+c(this.pixDims[2])+", "+c(this.pixDims[3])+", "+c(this.pixDims[4])+", "+c(this.pixDims[5])+", "+c(this.pixDims[6])+", "+c(this.pixDims[7])+"\n";a+="Image Offset = "+this.vox_offset+"\n";a+="Data Scale:  Slope = "+c(this.scl_slope)+"  Intercept = "+c(this.scl_inter)+"\n";a+="Slice End = "+this.slice_end+"\n";a+="Slice Code = "+
this.slice_code+"\n";a+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(e.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(e.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";a+="Display Range:  Max = "+c(this.cal_max)+"  Min = "+c(this.cal_min)+"\n";a+="Slice Duration = "+this.slice_duration+"\n";a+="Time Axis Shift = "+this.toffset+"\n";a+='Description: "'+this.description+'"\n';a+='Auxiliary File: "'+this.aux_file+'"\n';a+="Q-Form Code = "+this.qform_code+" ("+
this.getTransformCodeString(this.qform_code)+")\n";a+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";a+="Quaternion Parameters:  b = "+c(this.quatern_b)+"  c = "+c(this.quatern_c)+"  d = "+c(this.quatern_d)+"\n";a+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";a+="S-Form Parameters X: "+c(this.affine[0][0])+", "+c(this.affine[0][1])+", "+c(this.affine[0][2])+", "+c(this.affine[0][3])+"\n";a+="S-Form Parameters Y: "+
c(this.affine[1][0])+", "+c(this.affine[1][1])+", "+c(this.affine[1][2])+", "+c(this.affine[1][3])+"\n";a+="S-Form Parameters Z: "+c(this.affine[2][0])+", "+c(this.affine[2][1])+", "+c(this.affine[2][2])+", "+c(this.affine[2][3])+"\n";a+='Intent Name: "'+this.intent_name+'"\n';this.extensionFlag[0]&&(a+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n");return a};e.NIFTI1.prototype.getDatatypeCodeString=function(c){return c===e.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":
c===e.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":c===e.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":c===e.NIFTI1.TYPE_FLOAT32?"4-Byte Float":c===e.NIFTI1.TYPE_FLOAT64?"8-Byte Float":c===e.NIFTI1.TYPE_RGB24?"RGB":c===e.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":c===e.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":c===e.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":c===e.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":c===e.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"};e.NIFTI1.prototype.getTransformCodeString=
function(c){return c===e.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":c===e.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":c===e.NIFTI1.XFORM_TALAIRACH?"Talairach":c===e.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"};e.NIFTI1.prototype.getUnitsCodeString=function(c){return c===e.NIFTI1.UNITS_METER?"Meters":c===e.NIFTI1.UNITS_MM?"Millimeters":c===e.NIFTI1.UNITS_MICRON?"Microns":c===e.NIFTI1.UNITS_SEC?"Seconds":c===e.NIFTI1.UNITS_MSEC?"Milliseconds":c===e.NIFTI1.UNITS_USEC?"Microseconds":c===e.NIFTI1.UNITS_HZ?"Hz":c===e.NIFTI1.UNITS_PPM?
"PPM":c===e.NIFTI1.UNITS_RADS?"Rads":"Unknown"};e.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])};e.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(c,a,b,d,h,f,l,n,e,g){var q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],k=b;q[3][0]=q[3][1]=q[3][2]=0;q[3][3]=1;b=1-(c*c+a*a+k*k);1E-7>b?(b=1/Math.sqrt(c*c+a*
a+k*k),c*=b,a*=b,k*=b,b=0):b=Math.sqrt(b);l=0<l?l:1;n=0<n?n:1;e=0<e?e:1;0>g&&(e=-e);q[0][0]=(b*b+c*c-a*a-k*k)*l;q[0][1]=2*(c*a-b*k)*n;q[0][2]=2*(c*k+b*a)*e;q[1][0]=2*(c*a+b*k)*l;q[1][1]=(b*b+a*a-c*c-k*k)*n;q[1][2]=2*(a*k-b*c)*e;q[2][0]=2*(c*k-b*a)*l;q[2][1]=2*(a*k+b*c)*n;q[2][2]=(b*b+k*k-a*a-c*c)*e;q[0][3]=d;q[1][3]=h;q[2][3]=f;return q};e.NIFTI1.prototype.convertNiftiSFormToNEMA=function(c){var a,b,d,h,f,l,n,e,g,k,p,m,D,r,B,t;B=[[0,0,0],[0,0,0],[0,0,0]];t=[[0,0,0],[0,0,0],[0,0,0]];a=c[0][0];b=c[0][1];
d=c[0][2];h=c[1][0];f=c[1][1];l=c[1][2];n=c[2][0];e=c[2][1];g=c[2][2];c=Math.sqrt(a*a+h*h+n*n);if(0===c)return null;a/=c;h/=c;n/=c;c=Math.sqrt(b*b+f*f+e*e);if(0===c)return null;b/=c;f/=c;e/=c;c=a*b+h*f+n*e;if(1E-4<Math.abs(c)){b-=c*a;f-=c*h;e-=c*n;c=Math.sqrt(b*b+f*f+e*e);if(0===c)return null;b/=c;f/=c;e/=c}c=Math.sqrt(d*d+l*l+g*g);0===c?(d=h*e-n*f,l=n*b-e*a,g=a*f-h*b):(d/=c,l/=c,g/=c);c=a*d+h*l+n*g;if(1E-4<Math.abs(c)){d-=c*a;l-=c*h;g-=c*n;c=Math.sqrt(d*d+l*l+g*g);if(0===c)return null;d/=c;l/=c;
g/=c}c=b*d+f*l+e*g;if(1E-4<Math.abs(c)){d-=c*b;l-=c*f;g-=c*e;c=Math.sqrt(d*d+l*l+g*g);if(0===c)return null;d/=c;l/=c;g/=c}B[0][0]=a;B[0][1]=b;B[0][2]=d;B[1][0]=h;B[1][1]=f;B[1][2]=l;B[2][0]=n;B[2][1]=e;B[2][2]=g;n=this.nifti_mat33_determ(B);if(0===n)return null;r=-666;a=h=f=l=1;b=2;d=3;for(e=1;3>=e;e+=1)for(g=1;3>=g;g+=1)if(e!==g)for(k=1;3>=k;k+=1)if(e!==k&&g!==k)for(t[0][0]=t[0][1]=t[0][2]=t[1][0]=t[1][1]=t[1][2]=t[2][0]=t[2][1]=t[2][2]=0,p=-1;1>=p;p+=2)for(m=-1;1>=m;m+=2)for(D=-1;1>=D;D+=2)t[0][e-
1]=p,t[1][g-1]=m,t[2][k-1]=D,c=this.nifti_mat33_determ(t),0<c*n&&(c=this.nifti_mat33_mul(t,B),c=c[0][0]+c[1][1]+c[2][2],c>r&&(r=c,a=e,b=g,d=k,h=p,f=m,l=D));B=t=c=n=e=g=0;switch(a*h){case 1:B="X";n="+";break;case -1:B="X";n="-";break;case 2:B="Y";n="+";break;case -2:B="Y";n="-";break;case 3:B="Z";n="+";break;case -3:B="Z",n="-"}switch(b*f){case 1:t="X";e="+";break;case -1:t="X";e="-";break;case 2:t="Y";e="+";break;case -2:t="Y";e="-";break;case 3:t="Z";e="+";break;case -3:t="Z",e="-"}switch(d*l){case 1:c=
"X";g="+";break;case -1:c="X";g="-";break;case 2:c="Y";g="+";break;case -2:c="Y";g="-";break;case 3:c="Z";g="+";break;case -3:c="Z",g="-"}return B+t+c+n+e+g};e.NIFTI1.prototype.nifti_mat33_mul=function(c,a){var b=[[0,0,0],[0,0,0],[0,0,0]],d,h;for(d=0;3>d;d+=1)for(h=0;3>h;h+=1)b[d][h]=c[d][0]*a[0][h]+c[d][1]*a[1][h]+c[d][2]*a[2][h];return b};e.NIFTI1.prototype.nifti_mat33_determ=function(c){var a,b,d,h,f,l,e,g;a=c[0][0];b=c[0][1];d=c[0][2];h=c[1][0];f=c[1][1];l=c[1][2];e=c[2][0];g=c[2][1];c=c[2][2];
return a*f*c-a*g*l-h*b*c+h*g*d+e*b*l-e*f*d};e.NIFTI1.prototype.getExtensionLocation=function(){return e.NIFTI1.MAGIC_COOKIE+4};e.NIFTI1.prototype.getExtensionSize=function(c){return e.Utils.getIntAt(c,this.getExtensionLocation(),this.littleEndian)};e.NIFTI1.prototype.getExtensionCode=function(c){return e.Utils.getIntAt(c,this.getExtensionLocation()+4,this.littleEndian)};"undefined"!==typeof m&&m.exports&&(m.exports=e.NIFTI1)},function(m,k,g){function e(d,f){if(65537>f&&(d.subarray&&b||!d.subarray&&
a))return String.fromCharCode.apply(null,c.shrinkBuf(d,f));for(var h="",e=0;e<f;e++)h+=String.fromCharCode(d[e]);return h}var c=g(5),a=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch(h){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){b=!1}var d=new c.Buf8(256);for(m=0;256>m;m++)d[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;d[254]=d[254]=1;k.string2buf=function(a){var b,d,h,e,g,k=a.length,p=0;for(e=0;e<k;e++)d=a.charCodeAt(e),55296===(d&64512)&&e+1<k&&(h=a.charCodeAt(e+
1),56320===(h&64512)&&(d=65536+(d-55296<<10)+(h-56320),e++)),p+=128>d?1:2048>d?2:65536>d?3:4;b=new c.Buf8(p);for(e=g=0;g<p;e++)d=a.charCodeAt(e),55296===(d&64512)&&e+1<k&&(h=a.charCodeAt(e+1),56320===(h&64512)&&(d=65536+(d-55296<<10)+(h-56320),e++)),128>d?b[g++]=d:(2048>d?b[g++]=192|d>>>6:(65536>d?b[g++]=224|d>>>12:(b[g++]=240|d>>>18,b[g++]=128|d>>>12&63),b[g++]=128|d>>>6&63),b[g++]=128|d&63);return b};k.buf2binstring=function(a){return e(a,a.length)};k.binstring2buf=function(a){for(var b=new c.Buf8(a.length),
d=0,h=b.length;d<h;d++)b[d]=a.charCodeAt(d);return b};k.buf2string=function(a,b){var c,h,f,g=b||a.length,k=Array(2*g);for(b=c=0;b<g;)if(h=a[b++],128>h)k[c++]=h;else if(f=d[h],4<f)k[c++]=65533,b+=f-1;else{for(h&=2===f?31:3===f?15:7;1<f&&b<g;)h=h<<6|a[b++]&63,f--;1<f?k[c++]=65533:65536>h?k[c++]=h:(h-=65536,k[c++]=55296|h>>10&1023,k[c++]=56320|h&1023)}return e(k,c)};k.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||0===c?b:c+d[a[c]]>
b?c:b}},function(m,k,g){m.exports=function(e,c,a,b){var d=e&65535|0;e=e>>>16&65535|0;for(var h;0!==a;){h=2E3<a?2E3:a;a-=h;do d=d+c[b++]|0,e=e+d|0;while(--h);d%=65521;e%=65521}return d|e<<16|0}},function(m,k,g){m.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,
Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(m,k,g){var e=function(){for(var c,a=[],b=0;256>b;b++){c=b;for(var d=0;8>d;d++)c=c&1?3988292384^c>>>1:c>>>1;a[b]=c}return a}();m.exports=function(c,a,b,d){b=d+b;for(c^=-1;d<b;d++)c=c>>>8^e[(c^a[d])&255];return c^-1}},function(m,k,g){m.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=
null;this.data_type=2;this.adler=0}},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){a&&(b.change_spec={change_stack_id:a.changeStackId},a.timeStamp&&(b.change_spec.time_stamp=a.timeStamp),a.skipEquivalences&&(b.change_spec.skip_equivalences=a.skipEquivalences))}function d(a,b){return g.i(n.e)(a,b,"fragmentKey")}function h(a,b){g.i(B.b)(b);var d=g.i(B.c)(b,"fragmentKey",B.d);b=g.i(B.c)(b,"supervoxelId",B.d);if(d.length!==b.length)throw Error("Expected fragmentKey and supervoxelId arrays to have the same length.");
a.fragmentIds=b.map(function(a,b){return a+"\x00"+d[b]})}Object.defineProperty(k,"__esModule",{value:!0});g(57);m=g(1);var f=g(32),l=g(58),n=g(12),v=g(22),q=g(3),w=g(23),p=g(9),u=g(13),D=g(7),r=g(2),B=g(11);g.d(k,"SkeletonSource",function(){return C});var t=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();
k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var e=a.length-1;0<=e;e--)if(l=a[e])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var E=new Map([[l.a.RAW,u.a],[l.a.JPEG,p.a],[l.a.COMPRESSED_SEGMENTATION,w.a]]),q=function(d){function h(){e(this,h);var a=c(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,
arguments));a.chunkDecoder=E.get(a.parameters.encoding);return a}a(h,d);t(h,[{key:"applyEncodingParams",value:function(a){var b=this.parameters.encoding;switch(b){case l.a.RAW:a.subvolume_format="RAW";break;case l.a.JPEG:a.subvolume_format="SINGLE_IMAGE";a.image_format_options={image_format:"JPEG",jpeg_quality:70};break;case l.a.COMPRESSED_SEGMENTATION:a.subvolume_format="RAW";a.image_format_options={compressed_segmentation_block_size:g.i(r.l)(this.spec.compressedSegmentationBlockSize)};break;default:throw Error("Invalid encoding: "+
b);}}},{key:"download",value:function(a,d){var c=this,h=this.parameters,l,e=this.computeChunkBounds(a),n=a.chunkDataSize;l="/v1/volumes/"+h.volumeId+"/subvolume:binary";e={geometry:{corner:g.i(r.l)(e),size:g.i(r.l)(n),scale:h.scaleIndex}};this.applyEncodingParams(e);b(h.changeSpec,e);l={method:"POST",payload:JSON.stringify(e),path:l,responseType:"arraybuffer"};return g.i(f.a)(h.instance,l,d).then(function(b){return c.chunkDecoder(a,b)})}}]);return h}(q.ParameterizedVolumeChunkSource),q=k([g.i(m.registerChunkSource)(l.b)],
q),q=function(l){function k(){e(this,k);var a=c(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments));a.manifestDecoder=void 0!==a.parameters.changeSpec?h:d;var b;b=a.parameters.changeSpec;b=void 0!==b?"&header.changeStackId="+b.changeStackId+"&return_supervoxel_ids=true":"";a.listFragmentsParams=b;return a}a(k,l);t(k,[{key:"download",value:function(a,b){var d=this,c=this.parameters,h={method:"GET",path:"/v1/objects/"+c.volumeId+"/meshes/"+(c.meshName+":listfragments?object_id="+a.objectId)+
this.listFragmentsParams,responseType:"json"};return g.i(f.a)(c.instance,h,b).then(function(b){return d.manifestDecoder(a,b)})}},{key:"downloadFragment",value:function(a,d){var c=this.parameters,h,l=a.fragmentId;if(void 0!==c.changeSpec){var e=l.indexOf("\x00");h=l.substring(0,e);l=l.substring(e+1)}else h=a.manifestChunk.objectId.toString();e="/v1/objects/"+c.volumeId+("/meshes/"+c.meshName)+"/fragment:binary";h={fragment_key:l,object_id:h};b(c.changeSpec,h);h={method:"POST",path:e,payload:JSON.stringify(h),
responseType:"arraybuffer"};return g.i(f.a)(c.instance,h,d).then(function(b){var d=new DataView(b),c=d.getUint32(0,!0);if(0!==d.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");g.i(n.b)(a,b,D.b.LITTLE,8,c)})}}]);return k}(n.c),q=k([g.i(m.registerChunkSource)(l.c)],q),C=function(d){function h(){e(this,h);return c(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}a(h,d);t(h,[{key:"download",value:function(a,d){var c=this.parameters,h={object_id:""+a.objectId},
l="/v1/objects/"+c.volumeId+("/meshes/"+c.meshName)+"/skeleton:binary";b(c.changeSpec,h);h={method:"POST",path:l,payload:JSON.stringify(h),responseType:"arraybuffer"};return g.i(f.a)(c.instance,h,d).then(function(b){var d=new DataView(b),c=d.getUint32(0,!0);if(0!==d.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");var h=d.getUint32(8,!0);if(0!==d.getUint32(12,!0))throw Error("The number of edges should not exceed 2^32-1.");g.i(v.a)(a,b,D.b.LITTLE,16,c,void 0,h)})}}]);
return h}(v.b),C=k([g.i(m.registerChunkSource)(l.d)],C)},function(m,k,g){function e(d){d=(new TextDecoder).decode(g.i(b.a)(d)).trim().split(/\n+/);if(!d)throw Error("CSV file is empty.");for(var c=d[0].split(","),f=c.map(function(b){return{name:b.trim(),dataType:a.a.FLOAT32,numComponents:1}}),l=d.length-1,e=c.length,c=c.map(function(){return new Float32Array(l)}),k=0;k<l;++k)for(var q=d[k+1].split(","),w=0;w<e;++w)c[w][k]=parseFloat(q[w]);return{numVertices:l,attributeInfo:f,attributes:c}}Object.defineProperty(k,
"__esModule",{value:!0});var c=g(20);m=g(35);var a=g(10),b=g(37);g.i(m.a)("csv",{description:"Comma separated value text file",getMeshVertexAttributes:function(a,b,f,l){return c.a.getData(a.addRef(),e,b,f,l)}})},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(k,"__esModule",{value:!0});m=g(1);var b=g(22),d=g(59),h=g(3),f=g(23),l=g(9),n=g(74),v=g(8),q=g(79);g.d(k,"SkeletonSource",function(){return D});var w=function(){function a(a,b){for(var d=
0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var e=a.length-1;0<=e;e--)if(l=a[e])f=(3>h?l(f):3<h?l(b,d,f):l(b,
d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var p=new Map([[d.a.JPEG,l.a]]),u=function(b){function h(a,b){e(this,h);a=c(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,a,b));a.parameters=b.parameters;return a}a(h,b);w(h,[{key:"download",value:function(a,b){var d=this.parameters,c;c=this.computeChunkBounds(a);c=this.getPath(c,a.chunkDataSize);var h=this.getDecoder(d);return g.i(v.a)(g.i(v.c)(d.baseUrls,c),"arraybuffer",b).then(function(b){return h(a,b)})}},{key:"getPath",value:function(a,
b){var c=this.parameters;return c.encoding===d.b.JPEG?"/api/node/"+c.nodeKey+"/"+c.dataInstanceKey+"/raw/0_1_2/"+(b[0]+"_"+b[1]+"_"+b[2]+"/")+(a[0]+"_"+a[1]+"_"+a[2]+"/jpeg"):"/api/node/"+c.nodeKey+"/"+c.dataInstanceKey+"/raw/0_1_2/"+(b[0]+"_"+b[1]+"_"+b[2]+"/")+(a[0]+"_"+a[1]+"_"+a[2]+"?compression=googlegzip")}},{key:"getDecoder",value:function(a){return a.encoding===d.b.JPEG?l.a:f.a}}]);return h}(h.ParameterizedVolumeChunkSource),u=k([g.i(m.registerChunkSource)(d.c)],u),h=function(b){function d(){e(this,
d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.chunkDecoder=p.get(a.parameters.encoding);return a}a(d,b);w(d,[{key:"download",value:function(a,b){var d=this,c=this.parameters,h=a.chunkGridPosition;a.chunkDataSize=this.spec.chunkDataSize;h="/api/node/"+c.nodeKey+"/"+c.dataInstanceKey+"/tile/"+(c.dims+"/"+c.level+"/")+(h[0]+"_"+h[1]+"_"+h[2]);return g.i(v.a)(g.i(v.c)(c.baseUrls,h),"arraybuffer",b).then(function(b){return d.chunkDecoder(a,b)})}}]);return d}(h.ParameterizedVolumeChunkSource),
h=k([g.i(m.registerChunkSource)(d.d)],h),D=function(b){function d(){e(this,d);return c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}a(d,b);w(d,[{key:"download",value:function(a,b){var d=this.parameters,c="/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/key/"+a.objectId+"_swc";return g.i(v.a)(g.i(v.c)(d.baseUrls,c),"text",b).then(function(b){g.i(n.a)(a,b)})}}]);return d}(b.b),D=k([g.i(m.registerChunkSource)(d.e)],D),b=function(b){function d(){e(this,d);return c(this,(d.__proto__||
Object.getPrototypeOf(d)).apply(this,arguments))}a(d,b);w(d,[{key:"getColor",value:function(a){(a=this.parameters.colors.get(a))||(a=new Float32Array([0,0,0,0]));return a}}]);return d}(q.a),b=k([g.i(m.registerChunkSource)(d.f)],b)},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function a(a){g.i(D.isCompressed)(a)&&(a=g.i(D.decompress)(a));var b=new B;b.uncompressedData=a;a=g.i(D.readHeader)(a);if(null===a)throw Error("Failed to parse NIFTI header.");b.header=a;return b}function b(b,d,c,h){return f.a.getData(b,a,d,c,h)}function d(a,d,c){return b(a,d,function(){return{priorityTier:h.b.VISIBLE,priority:1E3}},c).then(function(a){return a.header})}
Object.defineProperty(k,"__esModule",{value:!0});m=g(1);var h=g(6),f=g(20),l=g(61),n=g(3),v=g(13),q=g(17),w=g(7),p=g(2),u=g(0),D=g(97);g.n(D);g.d(k,"NiftiFileData",function(){return B});var r=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,
f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var e=a.length-1;0<=e;e--)if(l=a[e])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var B=function C(){c(this,C)},t=new Map([[l.a.INT8,{dataType:q.a.UINT8,volumeType:q.b.IMAGE}],[l.a.UINT8,{dataType:q.a.UINT8,volumeType:q.b.IMAGE}],[l.a.INT16,{dataType:q.a.UINT16,volumeType:q.b.IMAGE}],[l.a.UINT16,{dataType:q.a.UINT16,
volumeType:q.b.IMAGE}],[l.a.INT32,{dataType:q.a.UINT32,volumeType:q.b.SEGMENTATION}],[l.a.UINT32,{dataType:q.a.UINT32,volumeType:q.b.SEGMENTATION}],[l.a.INT64,{dataType:q.a.UINT64,volumeType:q.b.SEGMENTATION}],[l.a.UINT64,{dataType:q.a.UINT64,volumeType:q.b.SEGMENTATION}],[l.a.FLOAT32,{dataType:q.a.FLOAT32,volumeType:q.b.IMAGE}]]);g.i(u.c)(l.b,function(a,b){return d(this.getRef(a.chunkManager),a.url,b).then(function(a){var b=t.get(a.datatypeCode);if(void 0===b)throw Error("Unsupported data type: "+
(l.a[a.datatypeCode]||a.datatypeCode)+".");if(1!==a.dims[4])throw Error("Time series data not supported.");var d=1;switch(a.xyzt_units&D.NIFTI1.SPATIAL_UNITS_MASK){case D.NIFTI1.UNITS_METER:d=1E9;break;case D.NIFTI1.UNITS_MM:d=1E6;break;case D.NIFTI1.UNITS_MICRON:d=1E3}var c=a.quatern_b,h=a.quatern_c,f=a.quatern_d,e=Math.sqrt(1-c*c-h*h-f*f),n=-1===a.pixDims[0]?-1:1,g=a.description,k;k=a.affine;k=p.b.fromValues(k[0][0],k[1][0],k[2][0],k[3][0],k[0][1],k[1][1],k[2][1],k[3][1],k[0][2],k[1][2],k[2][2],
k[3][2],k[0][3],k[1][3],k[2][3],k[3][3]);return{value:{description:g,affine:k,dataType:b.dataType,numChannels:a.dims[5],volumeType:b.volumeType,voxelSize:p.a.fromValues(d*a.pixDims[1],d*a.pixDims[2],d*a.pixDims[3]),volumeSize:p.a.fromValues(a.dims[1],a.dims[2],a.dims[3]),qoffset:p.a.fromValues(d*a.qoffset_x,d*a.qoffset_y,d*a.qoffset_z),qform_code:a.qform_code,sform_code:a.sform_code,qfac:n,quatern:p.c.fromValues(c,h,f,e)}}})});n=function(a){function d(){c(this,d);var a=(d.__proto__||Object.getPrototypeOf(d)).apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}e(d,a);r(d,[{key:"download",value:function(a,d){a.chunkDataSize=this.spec.chunkDataSize;return b(this.chunkManager.addRef(),this.parameters.url,function(){return{priorityTier:a.priorityTier,priority:a.priority}},d).then(function(b){var d=g.i(D.readImage)(b.header,b.uncompressedData);g.i(v.a)(a,d,b.header.littleEndian?w.b.LITTLE:w.b.BIG)})}}]);
return d}(n.ParameterizedVolumeChunkSource);n=k([g.i(m.registerChunkSource)(l.c)],n)},function(m,k,g){Object.defineProperty(k,"__esModule",{value:!0});g(30)},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){return g.i(f.e)(a,b,"fragments")}function d(a,b){var d=(new DataView(b)).getUint32(0,!0);g.i(f.b)(a,b,w.b.LITTLE,4,d)}Object.defineProperty(k,"__esModule",{value:!0});m=g(1);var h=g(62),f=g(12),l=g(3),n=g(23),v=g(9),q=g(13),w=g(7),p=g(8);k.decodeManifestChunk=b;k.decodeFragmentChunk=d;var u=function(){function a(a,
b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var e=a.length-1;0<=e;e--)if(l=a[e])f=(3>h?l(f):3<h?
l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var D=new Map;D.set(h.a.RAW,q.a);D.set(h.a.JPEG,v.a);D.set(h.a.COMPRESSED_SEGMENTATION,n.a);l=function(b){function d(){e(this,d);var a=c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.chunkDecoder=D.get(a.parameters.encoding);return a}a(d,b);u(d,[{key:"download",value:function(a,b){var d=this,c=this.parameters,h;h=this.computeChunkBounds(a);var f=a.chunkDataSize;h=c.path+"/"+h[0]+"-"+(h[0]+f[0])+"_"+(h[1]+"-"+
(h[1]+f[1])+"_")+(h[2]+"-"+(h[2]+f[2]));return g.i(p.a)(g.i(p.c)(c.baseUrls,h),"arraybuffer",b).then(function(b){return d.chunkDecoder(a,b)})}}]);return d}(l.ParameterizedVolumeChunkSource);l=k([g.i(m.registerChunkSource)(h.b)],l);l=function(h){function f(){e(this,f);return c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}a(f,h);u(f,[{key:"download",value:function(a,d){var c=this.parameters,h=c.path+"/"+a.objectId+":"+c.lod;return g.i(p.a)(g.i(p.c)(c.baseUrls,h),"json",d).then(function(d){return b(a,
d)})}},{key:"downloadFragment",value:function(a,b){var c=this.parameters,h=c.path+"/"+a.fragmentId;return g.i(p.a)(g.i(p.c)(c.baseUrls,h),"arraybuffer",b).then(function(b){return d(a,b)})}}]);return f}(f.c);l=k([g.i(m.registerChunkSource)(h.c)],l)},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==
typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){var d=(new DataView(b)).getUint32(0,!0);g.i(h.b)(a,b,p.b.LITTLE,4,d)}Object.defineProperty(k,"__esModule",{value:!0});m=g(1);var d=g(63),h=g(12),f=g(22),l=g(3),
n=g(9),v=g(36),q=g(13),w=g(10),p=g(7),u=g(8);k.decodeFragmentChunk=b;g.d(k,"MeshSource",function(){return B});g.d(k,"SkeletonSource",function(){return t});var D=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,
d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var e=a.length-1;0<=e;e--)if(l=a[e])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var r=new Map;r.set(d.a.NPZ,v.a);r.set(d.a.JPEG,n.a);r.set(d.a.RAW,q.a);var l=function(b){function h(){e(this,h);var a=c(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments));a.chunkDecoder=r.get(a.parameters.encoding);a.encoding=d.a[a.parameters.encoding].toLowerCase();
return a}a(h,b);D(h,[{key:"download",value:function(a,b){for(var d=this,c=this.parameters,h="/neuroglancer/"+this.encoding+"/"+c.key,f=this.computeChunkBounds(a),l=a.chunkDataSize,e=0;3>e;++e)h+="/"+f[e]+","+(f[e]+l[e]);return g.i(u.a)(g.i(u.c)(c.baseUrls,h),"arraybuffer",b).then(function(b){return d.chunkDecoder(a,b)})}}]);return h}(l.ParameterizedVolumeChunkSource),l=k([g.i(m.registerChunkSource)(d.b)],l),B=function(d){function h(){e(this,h);return c(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,
arguments))}a(h,d);D(h,[{key:"download",value:function(a){a.fragmentIds=[""];return Promise.resolve(void 0)}},{key:"downloadFragment",value:function(a,d){var c=this.parameters,h="/neuroglancer/mesh/"+c.key+"/"+a.manifestChunk.objectId;return g.i(u.a)(g.i(u.c)(c.baseUrls,h),"arraybuffer",d).then(function(d){return b(a,d)})}}]);return h}(h.c),B=k([g.i(m.registerChunkSource)(d.c)],B),t=function(b){function d(){e(this,d);return c(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}a(d,
b);D(d,[{key:"download",value:function(a,b){var d=this.parameters,c="/neuroglancer/skeleton/"+d.key+"/"+a.objectId;return g.i(u.a)(g.i(u.c)(d.baseUrls,c),"arraybuffer",b).then(function(b){for(var c=d.vertexAttributes,h=new DataView(b),l=h.getUint32(0,!0),h=h.getUint32(4,!0),e=8+12*l,n=[],c=$jscomp.makeIterator(c.values()),k=c.next();!k.done;k=c.next()){var k=k.value,k=w.b[k.dataType]*k.numComponents,y=k*l,q=new Uint8Array(b,e,y);switch(k){case 2:g.i(p.d)(q,p.b.LITTLE);break;case 4:case 8:g.i(p.a)(q,
p.b.LITTLE)}n.push(q);e+=y}a.vertexAttributes=n;g.i(f.a)(a,b,p.b.LITTLE,8,l,e,h)})}}]);return d}(f.b),t=k([g.i(m.registerChunkSource)(d.d)],t)},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(k,"__esModule",
{value:!0});m=g(1);k=g(64);var c=g(3),a=g(9),b=g(2),d=g(8),h=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),f=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,
b,d,c);else for(var e=a.length-1;0<=e;e--)if(l=a[e])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f},l=new Map;l.set("jpg",a.a);c=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a;a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.chunkDecoder=
l.get(a.parameters.encoding);return a}e(c,a);h(c,[{key:"download",value:function(a,c){var h=this,f=this.parameters,l=a.chunkGridPosition,e=1/Math.pow(2,f.level);a.chunkDataSize=this.spec.chunkDataSize;var n=a.chunkDataSize[0]*Math.pow(2,f.level),k=a.chunkDataSize[1]*Math.pow(2,f.level),q=b.a.create();q[0]=l[0]*n;q[1]=l[1]*k;q[2]=l[2];l="/render-ws/v1/owner/"+f.owner+"/project/"+f.project+"/stack/"+f.stack+"/z/"+q[2]+"/box/"+q[0]+","+q[1]+","+n+","+k+","+e+"/jpeg-image";return g.i(d.a)(g.i(d.c)(f.baseUrls,
l),"arraybuffer",c).then(function(b){return h.chunkDecoder(a,b)})}}]);return c}(c.ParameterizedVolumeChunkSource);c=f([g.i(m.registerChunkSource)(k.a)],c)},function(m,k,g){function e(b){return g.i(a.a)(g.i(d.a)(b))}Object.defineProperty(k,"__esModule",{value:!0});var c=g(20),a=g(65);m=g(35);var b=g(10),d=g(37);g.i(m.b)("vtk",{description:"VTK",getMesh:function(a,d,l,n){return c.a.getData(a.addRef(),e,d,l,n).then(function(a){var d={info:{numTriangles:a.numTriangles,numVertices:a.numVertices,vertexAttributes:[]},
indices:a.indices,vertexPositions:a.vertexPositions,vertexAttributes:[]};a=$jscomp.makeIterator(a.vertexAttributes);for(var c=a.next();!c.done;c=a.next())c=c.value,d.info.vertexAttributes.push({name:c.name,dataType:b.a.FLOAT32,numComponents:c.numComponents}),d.vertexAttributes.push(c.data);return d})}})},function(m,k,g){m=g(33);k=g(0);var e=g(31),c=null;m.b.getNewTokenPromise=function(a){var b={};null!=a&&(b.invalidToken=a);a=new Promise(function(a,b){c=a});e.rpc.invoke("brainmaps.requestToken",b);
return a};g.i(k.d)("brainmaps.receiveToken",function(a){c(a.authResult)})},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}var a=g(32);g.d(k,"a",function(){return d});g.d(k,"b",function(){return f});g.d(k,"c",function(){return l});g.d(k,"d",function(){return n});var b=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),d;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(d||
(d={}));var h=function(){function a(){c(this,a)}b(a,null,[{key:"stringify",value:function(a){return void 0===a?"":a.changeStackId+"/"+a.timeStamp+"/"+a.skipEquivalences}}]);return a}(),f=function(){function f(){c(this,f)}b(f,null,[{key:"stringify",value:function(b){return"brainmaps-"+g.i(a.b)(b.instance)+":volume/"+b.volumeId+"/"+(b.scaleIndex+"/"+d[b.encoding]+"/")+(""+h.stringify(b.changeSpec))}}]);return f}();f.RPC_ID="brainmaps/VolumeChunkSource";var l=function(){function d(){c(this,d)}b(d,null,
[{key:"stringify",value:function(b){return"brainmaps:"+g.i(a.b)(b.instance)+":mesh/"+(b.volumeId+"/"+b.meshName+"/")+(""+h.stringify(b.changeSpec))}}]);return d}();l.RPC_ID="brainmaps/MeshSource";var n=function(a){function b(){c(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}e(b,a);return b}(l);n.RPC_ID="brainmaps/SkeletonSource"},
function(m,k,g){function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}g.d(k,"b",function(){return d});g.d(k,"c",function(){return h});g.d(k,"a",function(){return f});g.d(k,"d",function(){return l});g.d(k,"e",function(){return n});g.d(k,"f",function(){return v});var b=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&
a(b,c);return b}}(),d;(function(a){a[a.JPEG=0]="JPEG";a[a.COMPRESSED_SEGMENTATION=1]="COMPRESSED_SEGMENTATION"})(d||(d={}));m=function w(){a(this,w)};var h=function(d){function h(){a(this,h);return e(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}c(h,d);b(h,null,[{key:"stringify",value:function(a){return"dvid:volume:"+a.baseUrls[0]+"/"+a.nodeKey+"/"+a.dataInstanceKey}}]);return h}(m);h.RPC_ID="dvid/VolumeChunkSource";var f;(function(a){a[a.JPEG=0]="JPEG"})(f||(f={}));var l=function(d){function h(){a(this,
h);return e(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}c(h,d);b(h,null,[{key:"stringify",value:function(a){return"dvid:volume:"+a.baseUrls[0]+"/"+a.nodeKey+"/"+a.dataInstanceKey+"/"+a.dims+"/"+a.level+"/"+f[a.encoding]}}]);return h}(m);l.RPC_ID="dvid/TileChunkSource";var n=function(d){function h(){a(this,h);return e(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}c(h,d);b(h,null,[{key:"stringify",value:function(a){return"dvid:skeleton:"+a.baseUrls[0]+"/"+
a.nodeKey+"/"+a.dataInstanceKey}}]);return h}(m);n.RPC_ID="dvid/SkeletonSource";var v=function(){function d(){a(this,d)}b(d,null,[{key:"stringify",value:function(a){return"dvid://stack/"+a.stackID}}]);return d}();v.RPC_ID="dvid/StackChunkSource"},function(m,k,g){g.d(k,"a",function(){return c});var e=function(){function a(a,d){for(var b=0;b<d.length;b++){var c=d[b];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&
a(b.prototype,d);c&&a(b,c);return b}}(),c=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}e(a,null,[{key:"stringify",value:function(a){return"ndstore:volume:"+a.baseUrls[0]+"/"+a.key+"/"+a.channel+"/"+a.resolution+"/"+a.encoding}}]);return a}();c.RPC_ID="ndstore/VolumeChunkSource"},function(m,k,g){g.d(k,"a",function(){return c});g.d(k,"c",function(){return a});var e=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=
c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}();k.b="nifti/getNiftiVolumeInfo";var c;(function(a){a[a.NONE=0]="NONE";a[a.BINARY=1]="BINARY";a[a.UINT8=2]="UINT8";a[a.INT16=4]="INT16";a[a.INT32=8]="INT32";a[a.FLOAT32=16]="FLOAT32";a[a.COMPLEX64=32]="COMPLEX64";a[a.FLOAT64=64]="FLOAT64";a[a.RGB24=128]="RGB24";a[a.INT8=256]="INT8";a[a.UINT16=512]="UINT16";a[a.UINT32=768]="UINT32";a[a.INT64=
1024]="INT64";a[a.UINT64=1280]="UINT64";a[a.FLOAT128=1536]="FLOAT128";a[a.COMPLEX128=1792]="COMPLEX128";a[a.COMPLEX256=2048]="COMPLEX256"})(c||(c={}));var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}e(a,null,[{key:"stringify",value:function(a){return"nifti:"+a.url}}]);return a}();a.RPC_ID="nifti/VolumeChunkSource"},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}g.d(k,"a",
function(){return a});g.d(k,"b",function(){return b});g.d(k,"c",function(){return d});var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),a;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(a||(a={}));var b=function(){function a(){e(this,a)}c(a,null,
[{key:"stringify",value:function(a){return"precomputed:volume:"+a.baseUrls[0]+"/"+a.path}}]);return a}();b.RPC_ID="precomputed/VolumeChunkSource";var d=function(){function a(){e(this,a)}c(a,null,[{key:"stringify",value:function(a){return"precomputed:mesh:"+a.baseUrls[0]+"/"+a.path+"/"+a.lod}}]);return a}();d.RPC_ID="precomputed/MeshSource"},function(m,k,g){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}g.d(k,"a",function(){return a});g.d(k,"b",function(){return b});
g.d(k,"c",function(){return d});g.d(k,"d",function(){return h});var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),a;(function(a){a[a.JPEG=0]="JPEG";a[a.NPZ=1]="NPZ";a[a.RAW=2]="RAW"})(a||(a={}));var b=function(){function b(){e(this,b)}c(b,null,[{key:"stringify",value:function(b){return"python:volume:"+
b.baseUrls[0]+"/"+b.key+"/"+a[b.encoding]}}]);return b}();b.RPC_ID="python/VolumeChunkSource";var d=function(){function a(){e(this,a)}c(a,null,[{key:"stringify",value:function(a){return"python:mesh:"+a.baseUrls[0]+"/"+a.key}}]);return a}();d.RPC_ID="python/MeshSource";var h=function(){function a(){e(this,a)}c(a,null,[{key:"stringify",value:function(a){return"python:skeleton:"+a.baseUrls[0]+"/"+a.key}}]);return a}();h.RPC_ID="python/SkeletonSource"},function(m,k,g){function e(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}g.d(k,"a",function(){return b});var a=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||
!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),b=function(b){function d(){c(this,d);var a=(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}e(d,b);a(d,null,[{key:"stringify",value:function(a){return"render:tile:"+a.baseUrls[0]+"/"+
a.owner+"/"+a.project+"/"+a.stack+"/"+a.level+"/"+a.encoding}}]);return d}(function h(){c(this,h)});b.RPC_ID="render/TileChunkSource"},function(m,k,g){k.a=function(a){var b=(new TextDecoder).decode(new Uint8Array(a.buffer,a.byteOffset,Math.min(a.byteLength,1E3))).match(e);if(null===b)throw Error("Failed to parse VTK file header.");var d=b[0].length,c=b[4],h=b[3],b={version:b[1],comment:b[2],datasetType:c,dataFormat:h};a=new Uint8Array(a.buffer,a.byteOffset+d,a.byteLength-d);if("ASCII"===h){h=v.get(c);
if(void 0===h)throw Error("VTK dataset type "+JSON.stringify(c)+" is not supported.");return h(b,a)}throw Error("VTK data format "+JSON.stringify(h)+" is not supported.");};var e=/^[ \t]*#[ \t]+vtk[ \t]+DataFile[ \t]+Version[ \t]+([^\s]+)[ \t]*\n(.*)\n[ \t]*(ASCII|BINARY)[ \t]*\n[ \t]*DATASET[ \t]+([^ ]+)[ \t]*\n/,c=/^[ \t]*POINT_DATA[ \t]+([0-9]+)[ \t]*$/,a=/^[ \t]*POINTS[ \t]+([0-9]+)[ \t]+([^\s]+)[ \t]*$/,b=/^[ \t]*SCALARS[ \t]+([^\s]+)[ \t]+([^\s]+)(?:[ \t]+([0-9]+))?[ \t]*$/,d=/^[ \t]*LOOKUP_TABLE[ \t]+([^\s]+)[ \t]*$/,
h=/^[ \t]*POLYGONS[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,f=/^[ \t]*3[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,l=/^[ \t]*$/,n=function w(a,b,d,c,h,f){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.header=a;this.numVertices=b;this.vertexPositions=d;this.numTriangles=c;this.indices=h;this.vertexAttributes=f},v=new Map([["POLYDATA",function(e,g){function k(a,b,d,c){c=RegExp("^[ \t]*"+"([^s]+)[ \t]+".repeat(d-1)+"([^s]+)[ \t]*$");if(m-C<b)throw Error("VTK data ended unexpectedly while parsing "+
a+".");for(var h=new Float32Array(b*d),f=0,l=0;l<b;++l){var e=t[C++],n=e.match(c);if(null===n)throw Error("Failed to parse "+a+" line "+l+": "+JSON.stringify(e)+".");for(e=0;e<d;++e)h[f++]=parseFloat(n[e+1])}return h}function v(a,b){if(void 0!==y)throw Error("POINTS specified more than once.");A=a;G=k("POINTS",a,3,b)}function p(a,b){if(void 0!==y)throw Error("VERTICES specified more than once.");if(m-C<a)throw Error("VTK data ended unexpectedly");if(b!==4*a)throw Error("Only triangular faces are supported.");
H=a;y=new Uint32Array(3*a);for(var d=b=0;d<a;++d){var c=t[C++].match(f);if(null===c)throw Error("Failed to parse indices for face "+d);y[b++]=parseInt(c[1],10);y[b++]=parseInt(c[2],10);y[b++]=parseInt(c[3],10)}}function w(a){if(A!==a)throw Error("Number of vertices specified in POINT_DATA section ("+a+") must match number of points ("+A+").");for(;C<m;)if(a=t[C],a.match(l))++C;else{var c;c=a.match(b);if(null!==c){var h;h=void 0===c[3]?1:parseInt(c[3],10);++C;a=c[1];c=c[2];if(C===m)throw Error("Expected LOOKUP_TABLE directive.");
var f=t[C++],e=f.match(d);if(null===e)throw Error("Expected LOOKUP_TABLE directive in "+JSON.stringify(f)+".");f=e[1];e=k("SCALARS("+a+")",A,h,c);x.push({name:a,data:e,numComponents:h,dataType:c,tableName:f})}}}for(var t=(new TextDecoder).decode(g).split("\n"),m=t.length,C=0,A=-1,G=void 0,H=-1,y=void 0,x=[];C<m;)if(g=t[C],g.match(l))++C;else{var L=void 0,L=g.match(a);if(null!==L)++C,v(parseInt(L[1],10),L[2]);else if(L=g.match(h),null!==L)++C,p(parseInt(L[1],10),parseInt(L[2],10));else{L=g.match(c);
if(null!==L){++C;w(parseInt(L[1],10));break}throw Error("Failed to parse VTK line "+JSON.stringify(g)+".");}}if(void 0===G)throw Error("Vertex positions not specified.");if(void 0===y)throw Error("Indices not specified.");return new n(e,A,G,H,y,x)}]])},function(m,k,g){g.d(k,"a",function(){return c});var e=function(){function a(a,d){for(var b=0;b<d.length;b++){var c=d[b];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,
d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),c=function(){function a(b,d,c,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.a0=b;this.a1=d;this.b=c;this.c=f}e(a,[{key:"computeDotProduct",value:function(a,d){var b=this.a0,c=this.a1;return b[0]*(a&255)+b[1]*(a>>8&255)+b[2]*(a>>16&255)+b[3]*(a>>24&255)+(c[0]*(d&255)+c[1]*(d>>8&255)+c[2]*(d>>16&255)+c[3]*(d>>24&255))}},{key:"compute",value:function(a,d){var b=this.b,c=this.c;a=this.computeDotProduct(a,d);return(a+
a*a%4093*c+b)%4093}},{key:"toString",value:function(){return"new HashFunction(Float32Array.of("+this.a0+"), Float32Array.of("+this.a1+"), "+this.b+", "+this.c+")"}}],[{key:"generate",value:function(){function b(){return Math.floor(4093*Math.random())}return new a(Float32Array.of(b(),b(),b(),b()),Float32Array.of(b(),b(),b(),b()),b(),b())}}]);return a}()},function(m,k,g){function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==
typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var b=g(66),d=g(16);g.d(k,"a",function(){return w});var h=
function t(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return t(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},f=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),l=0,n=0,v=0,
q=0;m=function(){function c(b){b=void 0===b?c.generateHashFunctions(3):b;a(this,c);this.loadFactor=.9;this.size=0;this.growFactor=1.2;this.maxHeight=8192;this.emptyHigh=this.emptyLow=4294967295;this.maxAttempts=this.maxRehashAttempts=5;this.maxWidth=4096/this.entryStride;this.generation=0;this.mungedEmptyKey=-1;this.hashFunctions=b;this.allocate(4,1)}f(c,[{key:"updateHashFunctions",value:function(a){this.hashFunctions=c.generateHashFunctions(a);this.mungedEmptyKey=-1}},{key:"tableWithMungedEmptyKey",
value:function(a){for(var b=this.hashFunctions.length,d=Array(b),c=0;c<b;++c)d[c]=this.getHash(c,this.emptyLow,this.emptyHigh);c=this.mungedEmptyKey;if(-1===c)a:for(;;){for(var c=16777216*Math.random()>>>0,h=0;h<b;++h)for(var f=this.getHash(h,c,c),l=0;l<b;++l)if(d[l]===f)continue a;this.mungedEmptyKey=c;break}for(var h=this.table,f=this.emptyLow,l=this.emptyHigh,e=0;e<b;++e){var n=d[e];h[n]===f&&h[n+1]===l&&(h[n]=c,h[n+1]=c)}try{a(h)}finally{for(a=0;a<b;++a)e=d[a],h[e]===c&&h[e+1]===c&&(h[e]=f,h[e+
1]=l)}}},{key:"getHash",value:function(a,b,d){a=this.hashFunctions[a];var c=this.width,h=this.height,c=a[0].compute(b,d)%c;b=a[1].compute(b,d)%h;return this.entryStride*(b*this.width+c)}},{key:"keys",value:function(a){function b(b,y){for(;;)switch(c){case 0:a=void 0===a?new d.a:a,v=p,t=v.emptyLow,q=v.emptyHigh,k=v.entryStride,g=p,n=g.table,e=0,l=n.length;case 1:if(!(e<l)){c=3;break}f=n[e];h=n[e+1];if(f===t&&h===q){c=4;break}a.low=f;a.high=h;c=5;return{value:a,done:!1};case 5:if(void 0===y){c=6;break}c=
-1;throw y;case 6:case 4:case 2:e+=k;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f,l,e,n,g,k,q,t,v,p=this,w={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();w[Symbol.iterator]=function(){return this};return w}},{key:"indexOfPair",value:function(a,b){var d=this.table,c=this.emptyHigh;if(a===this.emptyLow&&b===c)return-1;for(var c=0,h=this.hashFunctions.length;c<
h;++c){var f=this.getHash(c,a,b);if(d[f]===a&&d[f+1]===b)return f}return-1}},{key:"indexOf",value:function(a){return this.indexOfPair(a.low,a.high)}},{key:"chooseAnotherEmptyKey",value:function(){for(var a=this.emptyLow,b=this.emptyHigh,d=this.table,c=this.entryStride,h,f;h=4294967296*Math.random()>>>0,f=4294967296*Math.random()>>>0,h===a&&f===b||this.hasPair(h,f););this.emptyLow=h;this.emptyHigh=f;for(var l=0,e=d.length;l<e;l+=c)d[l]===a&&d[l+1]===b&&(d[l]=h,d[l+1]=f)}},{key:"has",value:function(a){return-1!==
this.indexOf(a)}},{key:"hasPair",value:function(a,b){return-1!==this.indexOfPair(a,b)}},{key:"delete",value:function(a){a=this.indexOf(a);if(-1!==a){var b=this.table;b[a]=this.emptyLow;b[a+1]=this.emptyHigh;++this.generation;this.size--;return!0}return!1}},{key:"clearTable",value:function(){for(var a=this.table,b=this.entryStride,d=this.emptyLow,c=this.emptyHigh,h=a.length,f=0;f<h;f+=b)a[f]=d,a[f+1]=c}},{key:"clear",value:function(){if(0===this.size)return!1;this.size=0;++this.generation;this.clearTable();
return!0}},{key:"swapPending",value:function(a,b){var d=l,c=n;this.storePending(a,b);a[b]=d;a[b+1]=c}},{key:"storePending",value:function(a,b){l=a[b];n=a[b+1]}},{key:"backupPending",value:function(){v=l;q=n}},{key:"restorePending",value:function(){l=v;n=q}},{key:"tryToInsert",value:function(){for(var a=0,b=this.emptyLow,d=this.emptyHigh,c=this.maxAttempts,h=this.table,f=this.hashFunctions.length,e=Math.floor(Math.random()*f);;){var g=this.getHash(e,l,n);this.swapPending(h,g);if(l===b&&n===d)return!0;
if(++a===c)break;e=(e+Math.floor(Math.random()*(f-1))+1)%f}return!1}},{key:"allocate",value:function(a,b){var d=a*b;this.width=a;this.height=b;this.table=new Uint32Array(d*this.entryStride);this.maxAttempts=d;this.clearTable();this.capacity=d*this.loadFactor;this.mungedEmptyKey=-1}},{key:"rehash",value:function(a,b,d){this.allocate(b,d);this.updateHashFunctions(this.hashFunctions.length);b=this.emptyLow;d=this.emptyHigh;for(var c=this.entryStride,h=0,f=a.length;h<f;h+=c){var l=a[h+1];if(a[h]!==b||
l!==d)if(this.storePending(a,h),!this.tryToInsert())return!1}return!0}},{key:"grow",value:function(a){for(var b=this.table,d=this.width,c=this.height,h=this.maxWidth,f=this.maxHeight;;){var l=d*c,d=Math.min(h,Math.ceil(a/this.height));d*c<a&&(c=Math.min(f,Math.ceil(a/d)));var e=d*c;if(e<a&&e===l)throw Error("Maximum table size exceeded");for(l=0;l<this.maxRehashAttempts;++l)if(this.rehash(b,d,c))return;a=Math.ceil(this.growFactor*a)}}},{key:"insertInternal",value:function(){++this.generation;l===
this.emptyLow&&n===this.emptyHigh&&this.chooseAnotherEmptyKey();++this.size>this.capacity&&(this.backupPending(),this.grow(Math.ceil(this.growFactor*this.width*this.height)),this.restorePending());for(;!this.tryToInsert();)this.backupPending(),this.grow(this.width*this.height),this.restorePending()}}],[{key:"generateHashFunctions",value:function(a){a=void 0===a?3:a;for(var d=[],c=0;c<a;++c){var h=[b.a.generate(),b.a.generate()];d.push(h)}return d}}]);return c}();var w=function(b){function d(){a(this,
d);return e(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,b);$jscomp.initSymbol();$jscomp.initSymbolIterator();f(d,[{key:"add",value:function(a){var b=a.low;a=a.high;if(this.hasPair(b,a))return!1;l=b;n=a;this.insertInternal();return!0}},{key:Symbol.iterator,value:function(){return this.keys()}}]);return d}(m);w.prototype.entryStride=2;var p=0,u=0,D=0,r=0;(function(b){function g(){a(this,g);return e(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}c(g,b);
$jscomp.initSymbol();$jscomp.initSymbolIterator();f(g,[{key:"set",value:function(a,b){var d=a.low;a=a.high;if(this.hasPair(d,a))return!1;l=d;n=a;p=b.low;u=b.high;this.insertInternal();return!0}},{key:"get",value:function(a,b){a=this.indexOf(a);if(-1===a)return!1;var d=this.table;b.low=d[a+2];b.high=d[a+3];return!0}},{key:"swapPending",value:function(a,b){var d=p,c=u;h(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"swapPending",this).call(this,a,b);a[b+2]=d;a[b+3]=c}},{key:"storePending",
value:function(a,b){h(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"storePending",this).call(this,a,b);p=a[b+2];u=a[b+3]}},{key:"backupPending",value:function(){h(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"backupPending",this).call(this);D=p;r=u}},{key:"restorePending",value:function(){h(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"restorePending",this).call(this);p=D;u=r}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(a){function b(b,
y){for(;;)switch(c){case 0:a=void 0===a?[new d.a,new d.a]:a,w=m,z=w.emptyLow,p=w.emptyHigh,v=w.entryStride,t=m,q=t.table,k=$jscomp.makeIterator(a),g=k.next().value,n=k.next().value,e=0,l=q.length;case 1:if(!(e<l)){c=3;break}f=q[e];h=q[e+1];if(f===z&&h===p){c=4;break}g.low=f;g.high=h;n.low=q[e+2];n.high=q[e+3];c=5;return{value:a,done:!1};case 5:if(void 0===y){c=6;break}c=-1;throw y;case 6:case 4:case 2:e+=v;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f,l,e,n,g,k,q,t,v,p,z,
w,m=this,r={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();r[Symbol.iterator]=function(){return this};return r}}]);return g})(m).prototype.entryStride=4},function(m,k,g){k.b="mesh/MeshLayer";k.a="mesh/FragmentSource"},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var c=g(82),a=g(11),b=g(15),d=g(16);m=g(0);var h=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),f=function w(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,
b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return w(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var e=a.length-1;0<=e;e--)if(l=a[e])f=(3>h?l(f):3<h?l(b,d,f):l(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};
var l=function(l){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var a;a=(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.disjointSets=new c.a;a.changed=new b.b;return a}e(n,l);h(n,[{key:"disposed",value:function(){this.changed=this.disjointSets=void 0;f(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),
"disposed",this).call(this)}},{key:"link",value:function(a,b){if(this.disjointSets.link(a,b)){var d=this.rpc;d&&d.invoke("DisjointUint64Sets.add",{id:this.rpcId,al:a.low,ah:a.high,bl:b.low,bh:b.high});this.changed.dispatch()}}},{key:"get",value:function(a){return this.disjointSets.get(a)}},{key:"clear",value:function(){if(this.disjointSets.clear()){var a=this.rpc;a&&a.invoke("DisjointUint64Sets.clear",{id:this.rpcId});this.changed.dispatch()}}},{key:"setElements",value:function(a){return this.disjointSets.setElements(a)}},
{key:"toJSON",value:function(){return this.disjointSets.toJSON()}},{key:"restoreState",value:function(b){var c=this;this.clear();if(void 0!==b){var h=[new d.a,new d.a];g.i(a.e)(b,function(b){g.i(a.e)(b,function(a,b){h[b%2].parseString(String(a),10);0!==b&&c.link(h[0],h[1])})})}}},{key:"size",get:function(){return this.disjointSets.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new this;b.initializeCounterpart(a);return b}}]);return n}(m.b),l=k([g.i(m.a)("DisjointUint64Sets")],l),n=new d.a,
v=new d.a;g.i(m.d)("DisjointUint64Sets.add",function(a){var b=this.get(a.id);n.low=a.al;n.high=a.ah;v.low=a.bl;v.high=a.bh;b.disjointSets.link(n,v)&&b.changed.dispatch()});g.i(m.d)("DisjointUint64Sets.clear",function(a){a=this.get(a.id);a.disjointSets.clear()&&a.changed.dispatch()})},function(m,k,g){m=g(71);k=g(0);g.i(k.d)(m.a,function(e){var c=this.get(e.id);e.visible?c.visibilityCount.inc():c.visibilityCount.dec()})},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var c=g(26);(function(a){function b(a){a=void 0===a?new c.a:a;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d;d=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&
"function"!==typeof d?this:d;d.visibilityCount=a;return d}e(b,a);return b})(g(0).e);k.a="shared_visibility_count.onVisibilityChange"},function(m,k,g){var e=function(){function c(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}();k.c="single_mesh/SingleMeshLayer";k.b="single_mesh/SingleMeshSource";k.d="single_mesh/getSingleMeshInfo";
k.a="";(function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");}e(c,null,[{key:"stringify",value:function(a){return"single_mesh:"+JSON.stringify(a)}}]);return c})().RPC_ID="single_mesh/SingleMeshSource"},function(m,k,g){k.a="skeleton/SkeletonLayer"},function(m,k,g){function e(a){var b=[],d=/^[ \t]*(\d+)[ \t]+(\d+)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-?\d*(?:\.\d+)?)[ \t]+(-1|\d+)[ \t]*$/;a.split("\n").forEach(function(a){if(a=
a.match(d)){var h=b[parseInt(a[1],10)-1]=new c;h.type=parseInt(a[2],10);h.x=parseFloat(a[3]);h.y=parseFloat(a[4]);h.z=parseFloat(a[5]);h.radius=parseFloat(a[6]);h.parent=parseInt(a[7],10)-1}});return b}k.a=function(a,b){b=e(b);if(2>b.length)throw Error("ERROR parsing swc file");var d=new Float32Array(3*b.length),c=new Uint32Array(2*(b.length-1));b.forEach(function(a,b){d[3*b]=a.z;d[3*b+1]=a.y;d[3*b+2]=a.x;-1!==a.parent&&(c[2*(b-1)]=b,c[2*b-1]=a.parent)});a.indices=c;a.vertexPositions=d};var c=function b(){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");}},function(m,k,g){var e=g(2);g.d(k,"a",function(){return a});var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),a=function(){function a(b,c){c=void 0===c?e.i:c;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.size=
e.a.clone(b);this.transform=e.b.clone(c);this.invTransform=e.b.invert(e.b.create(),c)}c(a,[{key:"toObject",value:function(a){a.size=this.size;a.transform=this.transform}},{key:"localSpatialToGlobal",value:function(a,b){return e.a.transformMat4(a,b,this.transform)}},{key:"globalToLocalSpatial",value:function(a,b){return e.a.transformMat4(a,b,this.invTransform)}},{key:"globalToLocalGrid",value:function(a,b){this.globalToLocalSpatial(a,b);e.a.divide(a,a,this.size);return a}},{key:"localSpatialVectorToGlobal",
value:function(a,b){return g.i(e.g)(a,b,this.transform)}},{key:"globalToLocalSpatialVector",value:function(a,b){return g.i(e.g)(a,b,this.invTransform)}},{key:"assignLocalSpatialToGlobalMat4",value:function(a){return e.b.copy(a,this.transform)}}],[{key:"get",value:function(b,c){c=void 0===c?e.i:c;var d=a.cache,h=JSON.stringify([Array.from(b),Array.from(c)]),n=d.get(h);void 0===n&&(n=new a(b,c),d.set(h,n));return n}},{key:"fromObject",value:function(b){return a.get(b.size,b.transform)}}]);return a}();
a.cache=new Map},function(m,k,g){function e(a,e,k,w,p,m,D,r){var n=p[0],q=p[1],v=p[2];p=w[0];var u=w[1];w=w[2];var A=k[0],G=k[1],H=k[2],H=H-G*q,G=G-A*n;if(0===n*q*v)return[0,0];k=p*u*w+31;if(void 0===b||b.length<k)b=new Uint32Array(k),d=new Uint32Array(1*k),h=new Uint32Array(1*k),f=new Uint32Array(k),l=new Uint32Array(k);k=b.subarray(0,k);k.fill(0);for(var y=d,x=h,L=f,P=l,J=0,F=a[e]+1>>>0,I=0,N=p-n,M=p*u-p*q,R=0;R<v;++R,e+=H,I+=M)for(var z=0;z<q;++z,e+=G,I+=N)for(var K=0;K<n;++K,e+=A){var U=a[e];
U!==F&&(F=y[1*J]=U,L[J]=J++);k[I++]=J}L.subarray(0,J).sort(function(a,b){return y[a]-y[b]});a=-1;n=y[1*L[0]]+1>>>0;for(q=0;q<J;++q)v=L[q],A=y[1*v],A!==n&&(++a,n=x[1*a]=A),P[v+1]=a;++a;return g.i(c.a)(r,m,D,p*u*w,a,x,k,P,1)}var c=g(18),a=g(19);k.a=function(b,d,h,f,l,k){l=void 0===l?0:l;k=void 0===k?g.i(a.a)(f,1):k;return g.i(c.c)(b,d,h,f,l,k,e)};var b,d,h,f,l},function(m,k,g){function e(a,e,k,w,p,m,D,r){var n=p[0],q=p[1],v=p[2];p=w[0];var u=w[1];w=w[2];var A=k[0],G=k[1],H=k[2],H=H-G*q,G=G-A*n;if(0===
n*q*v)return[0,0];k=p*u*w+31;if(void 0===b||b.length<k)b=new Uint32Array(k),d=new Uint32Array(2*k),h=new Uint32Array(2*k),f=new Uint32Array(k),l=new Uint32Array(k);k=b.subarray(0,k);k.fill(0);for(var y=d,x=h,L=f,P=l,J=0,F=a[e]+1>>>0,I=0,N=0,M=p-n,R=p*u-p*q,z=0;z<v;++z,e+=H,N+=R)for(var K=0;K<q;++K,e+=G,N+=M)for(var U=0;U<n;++U,e+=A){var O=a[e],S=a[e+1];if(O!==F||S!==I)F=y[2*J]=O,I=y[2*J+1]=S,L[J]=J++;k[N++]=J}L.subarray(0,J).sort(function(a,b){var c=y[2*a],d=y[2*b];return y[2*a+1]-y[2*b+1]||c-d});
a=-1;n=y[2*L[0]]+1>>>0;for(q=G=0;q<J;++q){v=L[q];H=2*v;A=y[H];H=y[H+1];if(A!==n||H!==G)++a,G=2*a,n=x[G]=A,G=x[G+1]=H;P[v+1]=a}++a;return g.i(c.a)(r,m,D,p*u*w,a,x,k,P,2)}var c=g(18),a=g(19);k.a=function(b,d,h,f,l,k){l=void 0===l?0:l;k=void 0===k?g.i(a.a)(f,2):k;return g.i(c.c)(b,d,h,f,l,k,e)};var b,d,h,f,l},function(m,k,g){var e=g(107);g.n(e);var c=g(19),a=g(2);k.a=function(b,d,h){var f=new e.JpegDecoder;f.parse(b);if(f.width*f.height!==d[0]*d[1]*d[2])throw Error("JPEG data does not have the expected dimensions: width="+
f.width+", height="+f.height+", chunkDataSize="+a.a.str(d));if(f.numComponents!==h)throw Error("JPEG data does not have the expected number of components: components="+f.numComponents+", expected="+h);if(1===f.numComponents)return f.getData(f.width,f.height,!1);if(3===f.numComponents)return b=f.getData(f.width,f.height,!1),g.i(c.c)(b,f.width*f.height,3);throw Error("JPEG data has an unsupported number of components: components="+f.numComponents);}},function(m,k,g){function e(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}m=g(3);var b=g(2);g.d(k,"a",function(){return h});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),h=function(b){function d(a,b){e(this,d);a=c(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b));a.parameters=b.parameters;return a}a(d,b);return d}(function(h){function f(a,b){e(this,
f);a=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,a,b));a.spec.stack=!0;return a}a(f,h);d(f,[{key:"download",value:function(a,c){var d=this;this.computeChunkBounds(a);return(new Promise(function(c,h){setTimeout(function(){try{a.data=d.getColor(g.i(b.l)(a.chunkGridPosition)),c(a)}catch(u){h(u)}},0)})).then(function(a){a.downloadCancellationToken=void 0;a.downloadSucceeded()},function(b){a.downloadCancellationToken===c&&(a.downloadCancellationToken=void 0,a.downloadFailed(b),console.log("Error retrieving chunk "+
a+": "+b))})}},{key:"getColor",value:function(a){return new Float32Array([Math.random(),Math.random(),Math.random(),1])}}]);return f}(m.VolumeChunkSource))},function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var c=g(67);
m=g(0);var a=g(15),b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function n(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return n(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};
k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,f=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,d,c);else for(var n=a.length-1;0<=n;n--)if(e=a[n])f=(3>h?e(f):3<h?e(b,d,f):e(b,d))||f;return 3<h&&f&&Object.defineProperty(b,d,f),f};var h=f=function(h){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var b;b=(n.__proto__||Object.getPrototypeOf(n)).apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.hashTable=new c.a;b.changed=new a.a;return b}e(n,h);$jscomp.initSymbol();$jscomp.initSymbolIterator();b(n,[{key:"disposed",value:function(){d(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposed",this).call(this);this.changed=this.hashTable=void 0}},{key:"add_",value:function(a){return this.hashTable.add(a)}},{key:"add",
value:function(a){if(this.add_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.add",{id:this.rpcId,value:a});this.changed.dispatch(a,!0)}}},{key:"has",value:function(a){return this.hashTable.has(a)}},{key:Symbol.iterator,value:function(){return this.hashTable.keys()}},{key:"delete_",value:function(a){return this.hashTable.delete(a)}},{key:"delete",value:function(a){if(this.delete_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.delete",{id:this.rpcId,value:a});this.changed.dispatch(a,!1)}}},{key:"clear",value:function(){if(this.hashTable.clear()){var a=
this.rpc;a&&a.invoke("Uint64Set.clear",{id:this.rpcId});this.changed.dispatch(null,!1)}}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this),d=b.next();!d.done;d=b.next())a.push(d.value.toString());return a}},{key:"size",get:function(){return this.hashTable.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new f;b.initializeCounterpart(a);return b}}]);return n}(m.b),h=f=k([g.i(m.a)("Uint64Set")],h);g.i(m.d)("Uint64Set.add",function(a){var b=this.get(a.id);b.add_(a.value)&&
b.changed.dispatch()});g.i(m.d)("Uint64Set.delete",function(a){var b=this.get(a.id);b.delete_(a.value)&&b.changed.dispatch()});g.i(m.d)("Uint64Set.clear",function(a){a=this.get(a.id);a.hashTable.clear()&&a.changed.dispatch()});var f},function(m,k,g){k.a=function(e,c){return e===c?!0:1E-6>Math.abs(e-c)/Math.min(Math.abs(e),Math.abs(c))}},function(m,k,g){function e(a){for(var b=a,d=a[h];d!==a;)a=d,d=a[h];for(a=b[h];d!==a;)b[h]=d,b=a,a=b[h];return d}function c(a){function b(b,e){for(;;)switch(d){case 0:h=
!0,c=a;case 1:if(!h&&c===a){d=3;break}d=4;return{value:c,done:!1};case 4:if(void 0===e){d=5;break}d=-1;throw e;case 5:c=c[f];case 2:h=!1;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,c,h,e={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}var a=g(16);g.d(k,"a",function(){return v});var b=function(){function a(a,b){for(var d=
0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();$jscomp.initSymbol();var d=Symbol("disjoint_sets:rank");$jscomp.initSymbol();var h=Symbol("disjoint_sets:parent");$jscomp.initSymbol();var f=Symbol("disjoint_sets:next");$jscomp.initSymbol();var l=Symbol("disjoint_sets:prev");$jscomp.initSymbol();var n=Symbol("disjoint_sets:min"),v=function(){function g(){if(!(this instanceof
g))throw new TypeError("Cannot call a class as a function");this.map=new Map;this.generation=0}$jscomp.initSymbol();$jscomp.initSymbolIterator();b(g,[{key:"get",value:function(a){var b=this.map.get(a.toString());return void 0===b?a:e(b)[n]}},{key:"isMinElement",value:function(b){var d=this.get(b);return d===b||a.a.equal(d,b)}},{key:"makeSet",value:function(a){var b=a.toString(),c=this.map,g=c.get(b);return void 0===g?(a=g=a.clone(),a[h]=a,a[d]=0,a[f]=a[l]=a,g[n]=g,c.set(b,g),g):e(g)}},{key:"link",
value:function(b,c){b=this.makeSet(b);c=this.makeSet(c);if(b===c)return!1;this.generation++;var e;e=b;var g=c,k=e[d],v=g[d];k>v?g[h]=e:(e[h]=g,k===v&&(g[d]=v+1),e=g);var g=b,k=c,v=g[l],t=k[l];k[l]=v;v[f]=k;g[l]=t;t[f]=g;b=b[n];c=c[n];e[n]=a.a.less(b,c)?b:c;return!0}},{key:"setElements",value:function(a){function b(b,g){for(;;)switch(d){case 0:l=a.toString();e=n.map.get(l);if(void 0!==e){d=1;break}d=3;return{value:a,done:!1};case 3:if(void 0===g){d=4;break}d=-1;throw g;case 4:d=2;break;case 1:f=$jscomp.makeIterator(c(e));
case 5:if((h=f.next(b)).done){d=6;break}d=7;return{value:h.value,done:!1};case 7:if(void 0===g){d=8;break}d=-1;throw g;case 8:d=5;break;case 6:case 2:d=-1;default:return{value:void 0,done:!0}}}var d=0,h,f,e,l,n=this,g={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();g[Symbol.iterator]=function(){return this};return g}},{key:"clear",value:function(){var a=this.map;if(0===a.size)return!1;
++this.generation;a.clear();return!0}},{key:"mappings",value:function(a){function b(b,g){for(;;)switch(d){case 0:a=void 0===a?Array(2):a,f=$jscomp.makeIterator(l.map.values()),h=f.next();case 1:if(h.done){d=3;break}c=h.value;a[0]=c;a[1]=e(c)[n];d=4;return{value:a,done:!1};case 4:if(void 0===g){d=5;break}d=-1;throw g;case 5:case 2:h=f.next();d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,c,h,f,l=this,g={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},
return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();g[Symbol.iterator]=function(){return this};return g}},{key:Symbol.iterator,value:function(){return this.mappings()}},{key:"toJSON",value:function(){for(var b=[],d=$jscomp.makeIterator(this.map.values()),f=d.next();!f.done;f=d.next()){var e=f.value;if(e[h]===e){for(var f=[],e=$jscomp.makeIterator(c(e)),l=e.next();!l.done;l=e.next())f.push(l.value);f.sort(a.a.compare);b.push(f)}}b.sort(function(b,d){return a.a.compare(b[0],
d[0])});return b.map(function(a){return a.map(function(a){return a.toString()})})}},{key:"size",get:function(){return this.map.size}}]);return g}()},function(m,k,g){k.a=function(e){for(var c=0,a=e.length,b=0;b<a;++b)c=31*c+e.charCodeAt(b)|0;return c}},function(m,k,g){var e=function(){function c(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,
d);return a}}();m=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");}e(c,null,[{key:"insertAfter",value:function(a,b){var d=a.next0;b.next0=d;b.prev0=a;a.next0=b;d.prev0=b}},{key:"insertBefore",value:function(a,b){var d=a.prev0;b.prev0=d;b.next0=a;a.prev0=b;d.next0=b}},{key:"front",value:function(a){var b=a.next0;return b===a?null:b}},{key:"back",value:function(a){var b=a.prev0;return b===a?null:b}},{key:"pop",value:function(a){var b=a.next0,
d=a.prev0;b.prev0=d;d.next0=b;a.next0=null;a.prev0=null;return a}},{key:"iterator",value:function(a){function b(b,h){for(;;)switch(d){case 0:c=a.next0;case 1:if(c===a){d=3;break}d=4;return{value:c,done:!1};case 4:if(void 0===h){d=5;break}d=-1;throw h;case 5:case 2:c=c.next0;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,c,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();
f[Symbol.iterator]=function(){return this};return f}},{key:"reverseIterator",value:function(a){function b(b,h){for(;;)switch(d){case 0:c=a.prev0;case 1:if(c===a){d=3;break}d=4;return{value:c,done:!1};case 4:if(void 0===h){d=5;break}d=-1;throw h;case 5:case 2:c=c.prev0;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,c,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();
f[Symbol.iterator]=function(){return this};return f}},{key:"initializeHead",value:function(a){a.next0=a.prev0=a}}]);return c}();k.a=m},function(m,k,g){var e=function(){function c(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}();m=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
}e(c,null,[{key:"insertAfter",value:function(a,b){var c=a.next1;b.next1=c;b.prev1=a;a.next1=b;c.prev1=b}},{key:"insertBefore",value:function(a,b){var c=a.prev1;b.prev1=c;b.next1=a;a.prev1=b;c.next1=b}},{key:"front",value:function(a){var b=a.next1;return b===a?null:b}},{key:"back",value:function(a){var b=a.prev1;return b===a?null:b}},{key:"pop",value:function(a){var b=a.next1,c=a.prev1;b.prev1=c;c.next1=b;a.next1=null;a.prev1=null;return a}},{key:"iterator",value:function(a){function b(b,d){for(;;)switch(c){case 0:h=
a.next1;case 1:if(h===a){c=3;break}c=4;return{value:h,done:!1};case 4:if(void 0===d){c=5;break}c=-1;throw d;case 5:case 2:h=h.next1;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}},{key:"reverseIterator",value:function(a){function b(b,d){for(;;)switch(c){case 0:h=
a.prev1;case 1:if(h===a){c=3;break}c=4;return{value:h,done:!1};case 4:if(void 0===d){c=5;break}c=-1;throw d;case 5:case 2:h=h.prev1;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}},{key:"initializeHead",value:function(a){a.next1=a.prev1=a}}]);return c}();k.a=m},
function(m,k,g){function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var a=g(25),b=g(11);g.d(k,"a",function(){return f});var d=function n(a,b,c){null===
a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return n(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=function(f){function n(){c(this,n);
var a=(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}e(n,f);h(n,[{key:"get",value:function(a,c){"string"!==typeof a&&(a=g.i(b.a)(a));return d(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"get",this).call(this,a,c)}},{key:"getUncounted",value:function(b,c){return this.get(b,function(){return new a.b(c())}).value}}]);return n}(function(){function a(){c(this,
a);this.map=new Map}h(a,[{key:"get",value:function(a,b){var c=this.map,d=c.get(a);void 0===d?(d=b(),d.registerDisposer(function(){c.delete(a)}),c.set(a,d)):d.addRef();return d}}]);return a}())},function(m,k,g){m=g(10);var e=g(7),c=g(11);k.a=function(b){if(147!==b[0]||78!==b[1]||85!==b[2]||77!==b[3]||80!==b[4]||89!==b[5])throw Error("Data does not match npy format.");var d=b[6],h=b[7];if(1!==d||0!==h)throw Error("Unsupported npy version "+d+"."+h);var d=(new DataView(b.buffer,b.byteOffset,b.byteLength)).getUint16(8,
!0),h=(new TextDecoder("utf-8")).decode(b.subarray(10,d+10)),f,d=d+10;try{f=g.i(c.f)(h)}catch(B){throw Error("Failed to parse npy header: "+B);}var e=f.descr,h=f.shape,n=1;if(!Array.isArray(h))throw Error("Invalid shape ${JSON.stringify(shape)}");for(var k=$jscomp.makeIterator(h),m=k.next();!m.done;m=k.next()){m=m.value;if("number"!==typeof m)throw Error("Invalid shape ${JSON.stringify(shape)}");n*=m}k=a.get(e);if(void 0===k)throw Error("Unsupported numpy data type "+JSON.stringify(e));e=k.arrayConstructor;
n*=k.javascriptElementsPerArrayElement;if(e.BYTES_PER_ELEMENT*n+d!==b.byteLength)throw Error("Expected length does not match length of data");b=new e(b.buffer,b.byteOffset+d,n);k.fixEndianness(b);return new l(b,h,k,!0===f.fortran_order)};var a=new Map;a.set("|u1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:m.a.UINT8});a.set("|i1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,
dataType:m.a.UINT8});k={};for(var b=$jscomp.makeIterator([["<",e.b.LITTLE],[">",e.b.BIG]]),d=b.next();!d.done;k={endianness:k.endianness},d=b.next()){var h=$jscomp.makeIterator(d.value),d=h.next().value;k.endianness=h.next().value;for(var h=$jscomp.makeIterator(["u","i"]),f=h.next();!f.done;f=h.next())f=f.value,a.set(""+d+f+"2",{arrayConstructor:Uint16Array,elementBytes:2,fixEndianness:function(a){return function(b){g.i(e.d)(b,a.endianness)}}(k),javascriptElementsPerArrayElement:1,dataType:m.a.UINT16}),
a.set(""+d+f+"4",{arrayConstructor:Uint32Array,elementBytes:4,fixEndianness:function(a){return function(b){g.i(e.a)(b,a.endianness)}}(k),javascriptElementsPerArrayElement:1,dataType:m.a.UINT32}),a.set(""+d+f+"8",{arrayConstructor:Uint32Array,elementBytes:8,fixEndianness:function(a){return function(b){g.i(e.a)(b,a.endianness)}}(k),javascriptElementsPerArrayElement:2,dataType:m.a.UINT64});a.set(d+"f4",{arrayConstructor:Float32Array,elementBytes:4,fixEndianness:function(a){return function(b){g.i(e.a)(b,
a.endianness)}}(k),javascriptElementsPerArrayElement:1,dataType:m.a.FLOAT32})}var l=function v(a,b,c,d){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.data=a;this.shape=b;this.dataType=c;this.fortranOrder=d}},function(m,k,g){k.a=function(a){if(a instanceof Object){var b=a[e];void 0===b&&(b=a[e]=c++);return"o"+b}return""+JSON.stringify(a)};$jscomp.initSymbol();var e=Symbol("objectId"),c=0},function(m,k,g){var e=function(){function c(a,b){for(var c=0;c<b.length;c++){var h=
b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}();m=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.compare=a}e(c,[{key:"meld",value:function(a,b){if(null===b)return a;if(null===a)return b;var c=this.compare;c(b,a)&&(c=a,a=b,b=c);c=a.child0;b.next0=c;b.prev0=a;null!==c&&(c.prev0=b);a.child0=b;return a}},{key:"combineChildren",
value:function(a){var b=a.child0;if(null===b)return null;for(a=null;;){var c=b.next0,h;null===c?h=null:(h=c.next0,b=this.meld(b,c));b.next0=a;a=b;if(null===h)break;b=h}h=a;for(a=a.next0;null!==a;)b=a.next0,h=this.meld(h,a),a=b;h.prev0=null;h.next0=null;return h}},{key:"removeMin",value:function(a){var b=this.combineChildren(a);a.next0=null;a.prev0=null;a.child0=null;return b}},{key:"remove",value:function(a,b){if(a===b)return this.removeMin(a);var c=b.prev0,h=b.next0;c.child0===b?c.child0=h:c.next0=
h;null!==h&&(h.prev0=c);a=this.meld(a,this.combineChildren(b));b.next0=null;b.prev0=null;b.child0=null;return a}},{key:"entries",value:function(a){function b(b,d){for(;;)switch(c){case 0:if(null===a){c=1;break}g=a.child0;c=2;return{value:a,done:!1};case 2:if(void 0===d){c=3;break}c=-1;throw d;case 3:case 4:if(null===g){c=5;break}e=g.next0;f=$jscomp.makeIterator(k.entries(g));case 6:if((h=f.next(b)).done){c=7;break}c=8;return{value:h.value,done:!1};case 8:if(void 0===d){c=9;break}c=-1;throw d;case 9:c=
6;break;case 7:g=e;c=4;break;case 5:case 1:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f,e,g,k=this,q={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();q[Symbol.iterator]=function(){return this};return q}},{key:"removedEntries",value:function(a){function b(b,d){for(;;)switch(c){case 0:if(null===a){c=1;break}g=a.child0;a.child0=null;a.next0=null;a.prev0=null;c=2;return{value:a,done:!1};
case 2:if(void 0===d){c=3;break}c=-1;throw d;case 3:case 4:if(null===g){c=5;break}e=g.next0;g.child0=null;g.next0=null;g.prev0=null;f=$jscomp.makeIterator(k.entries(g));case 6:if((h=f.next(b)).done){c=7;break}c=8;return{value:h.value,done:!1};case 8:if(void 0===d){c=9;break}c=-1;throw d;case 9:c=6;break;case 7:g=e;c=4;break;case 5:case 1:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f,e,g,k=this,q={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();q[Symbol.iterator]=function(){return this};return q}}]);return c}();k.a=m},function(m,k,g){var e=function(){function c(a,b){for(var c=0;c<b.length;c++){var h=b[c];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}();m=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.compare=a}e(c,[{key:"meld",
value:function(a,b){if(null===b)return a;if(null===a)return b;var c=this.compare;c(b,a)&&(c=a,a=b,b=c);c=a.child1;b.next1=c;b.prev1=a;null!==c&&(c.prev1=b);a.child1=b;return a}},{key:"combineChildren",value:function(a){var b=a.child1;if(null===b)return null;for(a=null;;){var c=b.next1,h;null===c?h=null:(h=c.next1,b=this.meld(b,c));b.next1=a;a=b;if(null===h)break;b=h}h=a;for(a=a.next1;null!==a;)b=a.next1,h=this.meld(h,a),a=b;h.prev1=null;h.next1=null;return h}},{key:"removeMin",value:function(a){var b=
this.combineChildren(a);a.next1=null;a.prev1=null;a.child1=null;return b}},{key:"remove",value:function(a,b){if(a===b)return this.removeMin(a);var c=b.prev1,h=b.next1;c.child1===b?c.child1=h:c.next1=h;null!==h&&(h.prev1=c);a=this.meld(a,this.combineChildren(b));b.next1=null;b.prev1=null;b.child1=null;return a}},{key:"entries",value:function(a){function b(b,d){for(;;)switch(c){case 0:if(null===a){c=1;break}g=a.child1;c=2;return{value:a,done:!1};case 2:if(void 0===d){c=3;break}c=-1;throw d;case 3:case 4:if(null===
g){c=5;break}e=g.next1;f=$jscomp.makeIterator(k.entries(g));case 6:if((h=f.next(b)).done){c=7;break}c=8;return{value:h.value,done:!1};case 8:if(void 0===d){c=9;break}c=-1;throw d;case 9:c=6;break;case 7:g=e;c=4;break;case 5:case 1:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f,e,g,k=this,q={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();q[Symbol.iterator]=function(){return this};
return q}},{key:"removedEntries",value:function(a){function b(b,d){for(;;)switch(c){case 0:if(null===a){c=1;break}g=a.child1;a.child1=null;a.next1=null;a.prev1=null;c=2;return{value:a,done:!1};case 2:if(void 0===d){c=3;break}c=-1;throw d;case 3:case 4:if(null===g){c=5;break}e=g.next1;g.child1=null;g.next1=null;g.prev1=null;f=$jscomp.makeIterator(k.entries(g));case 6:if((h=f.next(b)).done){c=7;break}c=8;return{value:h.value,done:!1};case 8:if(void 0===d){c=9;break}c=-1;throw d;case 9:c=6;break;case 7:g=
e;c=4;break;case 5:case 1:c=-1;default:return{value:void 0,done:!0}}}var c=0,h,f,e,g,k=this,q={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();q[Symbol.iterator]=function(){return this};return q}}]);return c}();k.a=m},function(m,k,g){g.d(k,"a",function(){return c});var e=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,h){c&&a(b.prototype,c);h&&a(b,h);return b}}(),c=function(){function a(b){b=void 0===b?16:b;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=new Uint32Array(b)}e(a,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Uint32Array(Math.max(a,2*b.length));c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=
new Uint32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,c){this.data.copyWithin(a,c,this.length);this.length-=c-a}},{key:"view",get:function(){var a=this.data;return new Uint32Array(a.buffer,a.byteOffset,this.length)}}]);return a}()},function(m,k,g){var e=g(4);k={create:function(){var c=new e.ARRAY_TYPE(4);c[0]=1;c[1]=0;c[2]=0;c[3]=1;return c},clone:function(c){var a=
new e.ARRAY_TYPE(4);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a},copy:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},identity:function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;return c},fromValues:function(c,a,b,d){var h=new e.ARRAY_TYPE(4);h[0]=c;h[1]=a;h[2]=b;h[3]=d;return h},set:function(c,a,b,d,h){c[0]=a;c[1]=b;c[2]=d;c[3]=h;return c},transpose:function(c,a){if(c===a){var b=a[1];c[1]=a[2];c[2]=b}else c[0]=a[0],c[1]=a[2],c[2]=a[1],c[3]=a[3];return c},invert:function(c,a){var b=a[0],
d=a[1],h=a[2];a=a[3];var f=b*a-h*d;if(!f)return null;f=1/f;c[0]=a*f;c[1]=-d*f;c[2]=-h*f;c[3]=b*f;return c},adjoint:function(c,a){var b=a[0];c[0]=a[3];c[1]=-a[1];c[2]=-a[2];c[3]=b;return c},determinant:function(c){return c[0]*c[3]-c[2]*c[1]},multiply:function(c,a,b){var d=a[0],h=a[1],f=a[2];a=a[3];var e=b[0],g=b[1],k=b[2];b=b[3];c[0]=d*e+f*g;c[1]=h*e+a*g;c[2]=d*k+f*b;c[3]=h*k+a*b;return c}};k.mul=k.multiply;k.rotate=function(c,a,b){var d=a[0],h=a[1],f=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=
d*b+f*e;c[1]=h*b+a*e;c[2]=d*-e+f*b;c[3]=h*-e+a*b;return c};k.scale=function(c,a,b){var d=a[1],h=a[2],f=a[3],e=b[0];b=b[1];c[0]=a[0]*e;c[1]=d*e;c[2]=h*b;c[3]=f*b;return c};k.fromRotation=function(c,a){var b=Math.sin(a);a=Math.cos(a);c[0]=a;c[1]=b;c[2]=-b;c[3]=a;return c};k.fromScaling=function(c,a){c[0]=a[0];c[1]=0;c[2]=0;c[3]=a[1];return c};k.str=function(c){return"mat2("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"};k.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+
Math.pow(c[3],2))};k.LDU=function(c,a,b,d){c[2]=d[2]/d[0];b[0]=d[0];b[1]=d[1];b[3]=d[3]-c[2]*b[1];return[c,a,b]};k.add=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};k.subtract=function(c,a,b){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};k.sub=k.subtract;k.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]};k.equals=function(c,a){var b=c[0],d=c[1],h=c[2];c=c[3];var f=a[0],l=a[1],g=a[2];a=a[3];return Math.abs(b-
f)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))&&Math.abs(d-l)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(h-g)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(c-a)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(a))};k.multiplyScalar=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};k.multiplyScalarAndAdd=function(c,a,b,d){c[0]=a[0]+b[0]*d;c[1]=a[1]+b[1]*d;c[2]=a[2]+b[2]*d;c[3]=a[3]+b[3]*d;return c};m.exports=k},function(m,k,g){var e=g(4);k={create:function(){var c=
new e.ARRAY_TYPE(6);c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c},clone:function(c){var a=new e.ARRAY_TYPE(6);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a},copy:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];return c},identity:function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c},fromValues:function(c,a,b,d,h,f){var l=new e.ARRAY_TYPE(6);l[0]=c;l[1]=a;l[2]=b;l[3]=d;l[4]=h;l[5]=f;return l},set:function(c,a,b,d,h,f,e){c[0]=a;c[1]=b;
c[2]=d;c[3]=h;c[4]=f;c[5]=e;return c},invert:function(c,a){var b=a[0],d=a[1],h=a[2],f=a[3],e=a[4];a=a[5];var g=b*f-d*h;if(!g)return null;g=1/g;c[0]=f*g;c[1]=-d*g;c[2]=-h*g;c[3]=b*g;c[4]=(h*a-f*e)*g;c[5]=(d*e-b*a)*g;return c},determinant:function(c){return c[0]*c[3]-c[1]*c[2]},multiply:function(c,a,b){var d=a[0],h=a[1],f=a[2],e=a[3],g=a[4];a=a[5];var k=b[0],q=b[1],m=b[2],p=b[3],u=b[4];b=b[5];c[0]=d*k+f*q;c[1]=h*k+e*q;c[2]=d*m+f*p;c[3]=h*m+e*p;c[4]=d*u+f*b+g;c[5]=h*u+e*b+a;return c}};k.mul=k.multiply;
k.rotate=function(c,a,b){var d=a[0],h=a[1],f=a[2],e=a[3],g=a[4];a=a[5];var k=Math.sin(b);b=Math.cos(b);c[0]=d*b+f*k;c[1]=h*b+e*k;c[2]=d*-k+f*b;c[3]=h*-k+e*b;c[4]=g;c[5]=a;return c};k.scale=function(c,a,b){var d=a[1],h=a[2],f=a[3],e=a[4],g=a[5],k=b[0];b=b[1];c[0]=a[0]*k;c[1]=d*k;c[2]=h*b;c[3]=f*b;c[4]=e;c[5]=g;return c};k.translate=function(c,a,b){var d=a[0],h=a[1],f=a[2],e=a[3],g=a[4];a=a[5];var k=b[0];b=b[1];c[0]=d;c[1]=h;c[2]=f;c[3]=e;c[4]=d*k+f*b+g;c[5]=h*k+e*b+a;return c};k.fromRotation=function(c,
a){var b=Math.sin(a);a=Math.cos(a);c[0]=a;c[1]=b;c[2]=-b;c[3]=a;c[4]=0;c[5]=0;return c};k.fromScaling=function(c,a){c[0]=a[0];c[1]=0;c[2]=0;c[3]=a[1];c[4]=0;c[5]=0;return c};k.fromTranslation=function(c,a){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=a[0];c[5]=a[1];return c};k.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};k.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};k.add=
function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];return c};k.subtract=function(c,a,b){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];return c};k.sub=k.subtract;k.multiplyScalar=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;return c};k.multiplyScalarAndAdd=function(c,a,b,d){c[0]=a[0]+b[0]*d;c[1]=a[1]+b[1]*d;c[2]=a[2]+b[2]*d;c[3]=a[3]+b[3]*d;c[4]=a[4]+b[4]*d;
c[5]=a[5]+b[5]*d;return c};k.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]&&c[4]===a[4]&&c[5]===a[5]};k.equals=function(c,a){var b=c[0],d=c[1],h=c[2],f=c[3],l=c[4];c=c[5];var g=a[0],k=a[1],q=a[2],m=a[3],p=a[4];a=a[5];return Math.abs(b-g)<=e.EPSILON*Math.max(1,Math.abs(b),Math.abs(g))&&Math.abs(d-k)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-q)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(f-m)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&
Math.abs(l-p)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(c-a)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(a))};m.exports=k},function(m,k,g){var e=g(4),c={scalar:{},SIMD:{},create:function(){var a=new e.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new e.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];
b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,c,h,f,l,g,k,q,m,p,u,D,r,B,t){var d=new e.ARRAY_TYPE(16);d[0]=a;d[1]=b;d[2]=c;d[3]=h;d[4]=f;d[5]=l;d[6]=g;d[7]=k;d[8]=q;d[9]=m;d[10]=p;d[11]=u;d[12]=D;d[13]=r;d[14]=B;d[15]=t;return d},set:function(a,
b,c,h,f,e,g,k,q,m,p,u,D,r,B,t,E){a[0]=b;a[1]=c;a[2]=h;a[3]=f;a[4]=e;a[5]=g;a[6]=k;a[7]=q;a[8]=m;a[9]=p;a[10]=u;a[11]=D;a[12]=r;a[13]=B;a[14]=t;a[15]=E;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};c.scalar.transpose=function(a,b){if(a===b){var c=b[1],h=b[2],f=b[3],e=b[6],g=b[7],k=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=h;a[9]=e;a[11]=b[14];a[12]=f;a[13]=g;
a[14]=k}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};c.SIMD.transpose=function(a,b){var c,h,f,e,g,k;c=SIMD.Float32x4.load(b,0);h=SIMD.Float32x4.load(b,4);f=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);e=SIMD.Float32x4.shuffle(c,h,0,1,4,5);g=SIMD.Float32x4.shuffle(f,b,0,1,4,5);k=SIMD.Float32x4.shuffle(e,g,0,2,4,6);e=SIMD.Float32x4.shuffle(e,g,1,3,5,7);
SIMD.Float32x4.store(a,0,k);SIMD.Float32x4.store(a,4,e);e=SIMD.Float32x4.shuffle(c,h,2,3,6,7);g=SIMD.Float32x4.shuffle(f,b,2,3,6,7);c=SIMD.Float32x4.shuffle(e,g,0,2,4,6);h=SIMD.Float32x4.shuffle(e,g,1,3,5,7);SIMD.Float32x4.store(a,8,c);SIMD.Float32x4.store(a,12,h);return a};c.transpose=e.USE_SIMD?c.SIMD.transpose:c.scalar.transpose;c.scalar.invert=function(a,b){var c=b[0],h=b[1],f=b[2],e=b[3],g=b[4],k=b[5],q=b[6],m=b[7],p=b[8],u=b[9],D=b[10],r=b[11],B=b[12],t=b[13],E=b[14];b=b[15];var C=c*k-h*g,A=
c*q-f*g,G=c*m-e*g,H=h*q-f*k,y=h*m-e*k,x=f*m-e*q,L=p*t-u*B,P=p*E-D*B,J=p*b-r*B,F=u*E-D*t,I=u*b-r*t,N=D*b-r*E,M=C*N-A*I+G*F+H*J-y*P+x*L;if(!M)return null;M=1/M;a[0]=(k*N-q*I+m*F)*M;a[1]=(f*I-h*N-e*F)*M;a[2]=(t*x-E*y+b*H)*M;a[3]=(D*y-u*x-r*H)*M;a[4]=(q*J-g*N-m*P)*M;a[5]=(c*N-f*J+e*P)*M;a[6]=(E*G-B*x-b*A)*M;a[7]=(p*x-D*G+r*A)*M;a[8]=(g*I-k*J+m*L)*M;a[9]=(h*J-c*I-e*L)*M;a[10]=(B*y-t*G+b*C)*M;a[11]=(u*G-p*y-r*C)*M;a[12]=(k*P-g*F-q*L)*M;a[13]=(c*F-h*P+f*L)*M;a[14]=(t*A-B*H-E*C)*M;a[15]=(p*H-u*A+D*C)*M;return a};
c.SIMD.invert=function(a,b){var c,h,f,e,g,k,m,w;g=SIMD.Float32x4.load(b,0);k=SIMD.Float32x4.load(b,4);m=SIMD.Float32x4.load(b,8);w=SIMD.Float32x4.load(b,12);b=SIMD.Float32x4.shuffle(g,k,0,1,4,5);h=SIMD.Float32x4.shuffle(m,w,0,1,4,5);c=SIMD.Float32x4.shuffle(b,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,b,1,3,5,7);b=SIMD.Float32x4.shuffle(g,k,2,3,6,7);e=SIMD.Float32x4.shuffle(m,w,2,3,6,7);f=SIMD.Float32x4.shuffle(b,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,b,1,3,5,7);b=SIMD.Float32x4.mul(f,e);b=SIMD.Float32x4.swizzle(b,
1,0,3,2);g=SIMD.Float32x4.mul(h,b);k=SIMD.Float32x4.mul(c,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,b),g);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);b=SIMD.Float32x4.mul(h,f);b=SIMD.Float32x4.swizzle(b,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),g);w=SIMD.Float32x4.mul(c,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,b));w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),w);w=SIMD.Float32x4.swizzle(w,
2,3,0,1);b=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),e);b=SIMD.Float32x4.swizzle(b,1,0,3,2);f=SIMD.Float32x4.swizzle(f,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,b),g);m=SIMD.Float32x4.mul(c,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(f,b));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,b),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);b=SIMD.Float32x4.mul(c,h);b=SIMD.Float32x4.swizzle(b,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),m);w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,
b),w);b=SIMD.Float32x4.swizzle(b,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,b),m);w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(f,b));b=SIMD.Float32x4.mul(c,e);b=SIMD.Float32x4.swizzle(b,1,0,3,2);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,b));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,b),m);b=SIMD.Float32x4.swizzle(b,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,b),k);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(h,b));b=SIMD.Float32x4.mul(c,f);b=SIMD.Float32x4.swizzle(b,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,
b),k);w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(h,b));b=SIMD.Float32x4.swizzle(b,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,b));w=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,b),w);c=SIMD.Float32x4.mul(c,g);c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c);c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c);b=SIMD.Float32x4.reciprocalApproximation(c);c=SIMD.Float32x4.sub(SIMD.Float32x4.add(b,b),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(b,b)));c=SIMD.Float32x4.swizzle(c,0,0,0,0);if(!c)return null;
SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(c,g));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(c,k));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(c,m));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(c,w));return a};c.invert=e.USE_SIMD?c.SIMD.invert:c.scalar.invert;c.scalar.adjoint=function(a,b){var c=b[0],h=b[1],f=b[2],e=b[3],g=b[4],k=b[5],m=b[6],w=b[7],p=b[8],u=b[9],D=b[10],r=b[11],B=b[12],t=b[13],E=b[14];b=b[15];a[0]=k*(D*b-r*E)-u*(m*b-w*E)+t*(m*r-w*D);a[1]=-(h*(D*b-r*E)-u*(f*b-e*E)+t*(f*r-e*D));a[2]=
h*(m*b-w*E)-k*(f*b-e*E)+t*(f*w-e*m);a[3]=-(h*(m*r-w*D)-k*(f*r-e*D)+u*(f*w-e*m));a[4]=-(g*(D*b-r*E)-p*(m*b-w*E)+B*(m*r-w*D));a[5]=c*(D*b-r*E)-p*(f*b-e*E)+B*(f*r-e*D);a[6]=-(c*(m*b-w*E)-g*(f*b-e*E)+B*(f*w-e*m));a[7]=c*(m*r-w*D)-g*(f*r-e*D)+p*(f*w-e*m);a[8]=g*(u*b-r*t)-p*(k*b-w*t)+B*(k*r-w*u);a[9]=-(c*(u*b-r*t)-p*(h*b-e*t)+B*(h*r-e*u));a[10]=c*(k*b-w*t)-g*(h*b-e*t)+B*(h*w-e*k);a[11]=-(c*(k*r-w*u)-g*(h*r-e*u)+p*(h*w-e*k));a[12]=-(g*(u*E-D*t)-p*(k*E-m*t)+B*(k*D-m*u));a[13]=c*(u*E-D*t)-p*(h*E-f*t)+B*(h*
D-f*u);a[14]=-(c*(k*E-m*t)-g*(h*E-f*t)+B*(h*m-f*k));a[15]=c*(k*D-m*u)-g*(h*D-f*u)+p*(h*m-f*k);return a};c.SIMD.adjoint=function(a,b){var c,h,f,e,g,k,m,w;c=SIMD.Float32x4.load(b,0);h=SIMD.Float32x4.load(b,4);f=SIMD.Float32x4.load(b,8);e=SIMD.Float32x4.load(b,12);k=SIMD.Float32x4.shuffle(c,h,0,1,4,5);g=SIMD.Float32x4.shuffle(f,e,0,1,4,5);b=SIMD.Float32x4.shuffle(k,g,0,2,4,6);g=SIMD.Float32x4.shuffle(g,k,1,3,5,7);k=SIMD.Float32x4.shuffle(c,h,2,3,6,7);h=SIMD.Float32x4.shuffle(f,e,2,3,6,7);c=SIMD.Float32x4.shuffle(k,
h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,k,1,3,5,7);k=SIMD.Float32x4.mul(c,h);k=SIMD.Float32x4.swizzle(k,1,0,3,2);f=SIMD.Float32x4.mul(g,k);e=SIMD.Float32x4.mul(b,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),f);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,k),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);k=SIMD.Float32x4.mul(g,c);k=SIMD.Float32x4.swizzle(k,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),f);w=SIMD.Float32x4.mul(b,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);
f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(h,k));w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,k),w);w=SIMD.Float32x4.swizzle(w,2,3,0,1);k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,3,0,1),h);k=SIMD.Float32x4.swizzle(k,1,0,3,2);c=SIMD.Float32x4.swizzle(c,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,k),f);m=SIMD.Float32x4.mul(b,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,k));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,k),m);m=SIMD.Float32x4.swizzle(m,2,3,0,
1);k=SIMD.Float32x4.mul(b,g);k=SIMD.Float32x4.swizzle(k,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),m);w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,k),w);k=SIMD.Float32x4.swizzle(k,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,k),m);w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(c,k));k=SIMD.Float32x4.mul(b,h);k=SIMD.Float32x4.swizzle(k,1,0,3,2);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(c,k));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,k),m);k=SIMD.Float32x4.swizzle(k,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,
k),e);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(g,k));k=SIMD.Float32x4.mul(b,c);k=SIMD.Float32x4.swizzle(k,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),e);w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(g,k));k=SIMD.Float32x4.swizzle(k,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(h,k));w=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,k),w);SIMD.Float32x4.store(a,0,f);SIMD.Float32x4.store(a,4,e);SIMD.Float32x4.store(a,8,m);SIMD.Float32x4.store(a,12,w);return a};c.adjoint=e.USE_SIMD?c.SIMD.adjoint:
c.scalar.adjoint;c.determinant=function(a){var b=a[0],c=a[1],h=a[2],e=a[3],g=a[4],k=a[5],m=a[6],q=a[7],w=a[8],p=a[9],u=a[10],D=a[11],r=a[12],B=a[13],t=a[14];a=a[15];return(b*k-c*g)*(u*a-D*t)-(b*m-h*g)*(p*a-D*B)+(b*q-e*g)*(p*t-u*B)+(c*m-h*k)*(w*a-D*r)-(c*q-e*k)*(w*t-u*r)+(h*q-e*m)*(w*B-p*r)};c.SIMD.multiply=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var k=SIMD.Float32x4.load(c,0),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,
0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),b))));SIMD.Float32x4.store(a,0,k);k=SIMD.Float32x4.load(c,4);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),g),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),b))));SIMD.Float32x4.store(a,4,k);k=SIMD.Float32x4.load(c,8);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),b))));SIMD.Float32x4.store(a,8,k);c=SIMD.Float32x4.load(c,12);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,
0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,12,d);return a};c.scalar.multiply=function(a,b,c){var d=b[0],e=b[1],g=b[2],k=b[3],m=b[4],q=b[5],w=b[6],p=b[7],u=b[8],D=b[9],r=b[10],B=b[11],t=b[12],E=b[13],C=b[14];b=b[15];var A=c[0],G=c[1],H=c[2],y=c[3];a[0]=A*d+G*m+H*u+y*t;a[1]=A*e+G*q+H*D+y*E;a[2]=A*g+G*
w+H*r+y*C;a[3]=A*k+G*p+H*B+y*b;A=c[4];G=c[5];H=c[6];y=c[7];a[4]=A*d+G*m+H*u+y*t;a[5]=A*e+G*q+H*D+y*E;a[6]=A*g+G*w+H*r+y*C;a[7]=A*k+G*p+H*B+y*b;A=c[8];G=c[9];H=c[10];y=c[11];a[8]=A*d+G*m+H*u+y*t;a[9]=A*e+G*q+H*D+y*E;a[10]=A*g+G*w+H*r+y*C;a[11]=A*k+G*p+H*B+y*b;A=c[12];G=c[13];H=c[14];y=c[15];a[12]=A*d+G*m+H*u+y*t;a[13]=A*e+G*q+H*D+y*E;a[14]=A*g+G*w+H*r+y*C;a[15]=A*k+G*p+H*B+y*b;return a};c.multiply=e.USE_SIMD?c.SIMD.multiply:c.scalar.multiply;c.mul=c.multiply;c.scalar.translate=function(a,b,c){var d=
c[0],e=c[1];c=c[2];var g,k,m,q,w,p,u,D,r,B,t,E;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(g=b[0],k=b[1],m=b[2],q=b[3],w=b[4],p=b[5],u=b[6],D=b[7],r=b[8],B=b[9],t=b[10],E=b[11],a[0]=g,a[1]=k,a[2]=m,a[3]=q,a[4]=w,a[5]=p,a[6]=u,a[7]=D,a[8]=r,a[9]=B,a[10]=t,a[11]=E,a[12]=g*d+w*e+r*c+b[12],a[13]=k*d+p*e+B*c+b[13],a[14]=m*d+u*e+t*c+b[14],a[15]=q*d+D*e+E*c+b[15]);return a};c.SIMD.translate=function(a,b,c){var d=
SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8),k=SIMD.Float32x4.load(b,12);c=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(c,0,0,0,0));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(c,1,1,1,1));g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(c,2,2,2,2));b=SIMD.Float32x4.add(d,SIMD.Float32x4.add(e,SIMD.Float32x4.add(g,
k)));SIMD.Float32x4.store(a,12,b);return a};c.translate=e.USE_SIMD?c.SIMD.translate:c.scalar.translate;c.scalar.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};c.SIMD.scale=function(a,b,c){var d;c=SIMD.Float32x4(c[0],c[1],c[2],0);d=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(d,
SIMD.Float32x4.swizzle(c,0,0,0,0)));d=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(c,1,1,1,1)));d=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(c,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};c.scale=e.USE_SIMD?c.SIMD.scale:c.scalar.scale;c.rotate=function(a,b,c,h){var d=h[0],g=h[1];h=h[2];var k=Math.sqrt(d*d+g*g+h*h),m,q,w,p,u,D,r,B,t,E,C,A,G,H,y,x,L,P,J,F;if(Math.abs(k)<e.EPSILON)return null;
k=1/k;d*=k;g*=k;h*=k;m=Math.sin(c);q=Math.cos(c);w=1-q;c=b[0];k=b[1];p=b[2];u=b[3];D=b[4];r=b[5];B=b[6];t=b[7];E=b[8];C=b[9];A=b[10];G=b[11];H=d*d*w+q;y=g*d*w+h*m;x=h*d*w-g*m;L=d*g*w-h*m;P=g*g*w+q;J=h*g*w+d*m;F=d*h*w+g*m;d=g*h*w-d*m;g=h*h*w+q;a[0]=c*H+D*y+E*x;a[1]=k*H+r*y+C*x;a[2]=p*H+B*y+A*x;a[3]=u*H+t*y+G*x;a[4]=c*L+D*P+E*J;a[5]=k*L+r*P+C*J;a[6]=p*L+B*P+A*J;a[7]=u*L+t*P+G*J;a[8]=c*F+D*d+E*g;a[9]=k*F+r*d+C*g;a[10]=p*F+B*d+A*g;a[11]=u*F+t*d+G*g;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
return a};c.scalar.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],g=b[5],k=b[6],m=b[7],q=b[8],w=b[9],p=b[10],u=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+q*d;a[5]=g*c+w*d;a[6]=k*c+p*d;a[7]=m*c+u*d;a[8]=q*c-e*d;a[9]=w*c-g*d;a[10]=p*c-k*d;a[11]=u*c-m*d;return a};c.SIMD.rotateX=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],
a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var e=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),SIMD.Float32x4.mul(b,d)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),SIMD.Float32x4.mul(e,d)));return a};c.rotateX=e.USE_SIMD?c.SIMD.rotateX:c.scalar.rotateX;c.scalar.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],g=b[1],k=b[2],m=b[3],q=b[8],w=b[9],p=b[10],u=b[11];b!==a&&(a[4]=b[4],
a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-q*d;a[1]=g*c-w*d;a[2]=k*c-p*d;a[3]=m*c-u*d;a[8]=e*d+q*c;a[9]=g*d+w*c;a[10]=k*d+p*c;a[11]=m*d+u*c;return a};c.SIMD.rotateY=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var e=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,
c),SIMD.Float32x4.mul(b,d)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,d),SIMD.Float32x4.mul(b,c)));return a};c.rotateY=e.USE_SIMD?c.SIMD.rotateY:c.scalar.rotateY;c.scalar.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],g=b[1],k=b[2],m=b[3],q=b[4],w=b[5],p=b[6],u=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+q*d;a[1]=g*c+w*d;a[2]=k*c+p*d;a[3]=m*c+u*d;a[4]=q*c-e*d;a[5]=w*c-g*d;a[6]=p*c-k*
d;a[7]=u*c-m*d;return a};c.SIMD.rotateZ=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var e=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),SIMD.Float32x4.mul(b,d)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),SIMD.Float32x4.mul(e,d)));return a};c.rotateZ=e.USE_SIMD?
c.SIMD.rotateZ:c.scalar.rotateZ;c.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};c.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromRotation=function(a,b,c){var d=c[0],f=c[1];c=c[2];var g=Math.sqrt(d*d+f*f+c*c),k;if(Math.abs(g)<e.EPSILON)return null;g=1/g;d*=g;
f*=g;c*=g;g=Math.sin(b);b=Math.cos(b);k=1-b;a[0]=d*d*k+b;a[1]=f*d*k+c*g;a[2]=c*d*k-f*g;a[3]=0;a[4]=d*f*k-c*g;a[5]=f*f*k+b;a[6]=c*f*k+d*g;a[7]=0;a[8]=d*c*k+f*g;a[9]=f*c*k-d*g;a[10]=c*c*k+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=
0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],g=b[2],k=b[3],m=d+d,q=e+e,w=g+g;b=d*m;var p=d*q,d=d*w,u=e*q,e=e*w,g=g*w,m=k*m,q=k*q,k=k*w;a[0]=1-(u+g);a[1]=p+k;a[2]=d-q;a[3]=0;a[4]=
p-k;a[5]=1-(b+g);a[6]=e+m;a[7]=0;a[8]=d+q;a[9]=e-m;a[10]=1-(b+u);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};c.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};c.getRotation=function(a,b){var c=b[0]+b[5]+b[10];0<c?(c=2*Math.sqrt(c+1),a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-b[0]-
b[10]),a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a};c.fromRotationTranslationScale=function(a,b,c,h){var d=b[0],e=b[1],g=b[2],k=b[3],m=d+d,w=e+e,p=g+g;b=d*m;var u=d*w,d=d*p,D=e*w,e=e*p,g=g*p,m=k*m,w=k*w,k=k*p,p=h[0],r=h[1];h=h[2];a[0]=(1-(D+g))*p;a[1]=(u+k)*p;a[2]=(d-w)*p;a[3]=0;a[4]=(u-k)*r;a[5]=(1-(b+g))*r;a[6]=(e+m)*r;a[7]=0;a[8]=(d+w)*h;a[9]=(e-m)*h;a[10]=(1-
(b+D))*h;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};c.fromRotationTranslationScaleOrigin=function(a,b,c,h,e){var d=b[0],f=b[1],g=b[2],k=b[3],m=d+d,p=f+f,u=g+g;b=d*m;var D=d*p,d=d*u,r=f*p,f=f*u,g=g*u,m=k*m,p=k*p,k=k*u,u=h[0],B=h[1];h=h[2];var t=e[0],E=e[1];e=e[2];a[0]=(1-(r+g))*u;a[1]=(D+k)*u;a[2]=(d-p)*u;a[3]=0;a[4]=(D-k)*B;a[5]=(1-(b+g))*B;a[6]=(f+m)*B;a[7]=0;a[8]=(d+p)*h;a[9]=(f-m)*h;a[10]=(1-(b+r))*h;a[11]=0;a[12]=c[0]+t-(a[0]*t+a[4]*E+a[8]*e);a[13]=c[1]+E-(a[1]*t+a[5]*E+a[9]*e);
a[14]=c[2]+e-(a[2]*t+a[6]*E+a[10]*e);a[15]=1;return a};c.fromQuat=function(a,b){var c=b[0],h=b[1],e=b[2];b=b[3];var g=c+c,k=h+h,m=e+e,c=c*g,q=h*g,h=h*k,w=e*g,p=e*k,e=e*m,g=b*g,k=b*k;b*=m;a[0]=1-h-e;a[1]=q+b;a[2]=w-k;a[3]=0;a[4]=q-b;a[5]=1-c-e;a[6]=p+g;a[7]=0;a[8]=w+k;a[9]=p-g;a[10]=1-c-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.frustum=function(a,b,c,h,e,g,k){var d=1/(c-b),f=1/(e-h),l=1/(g-k);a[0]=2*g*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*f;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(e+h)*f;a[10]=
(k+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=k*g*2*l;a[15]=0;return a};c.perspective=function(a,b,c,h,e){b=1/Math.tan(b/2);var d=1/(h-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+h)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*h*d;a[15]=0;return a};c.perspectiveFromFieldOfView=function(a,b,c,h){var d=Math.tan(b.upDegrees*Math.PI/180),e=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var k=2/(g+b),m=2/(d+e);a[0]=
k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=-((g-b)*k*.5);a[9]=(d-e)*m*.5;a[10]=h/(c-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*c/(c-h);a[15]=0;return a};c.ortho=function(a,b,c,h,e,g,k){var d=1/(b-c),f=1/(h-e),l=1/(g-k);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*d;a[13]=(e+h)*f;a[14]=(k+g)*l;a[15]=1;return a};c.lookAt=function(a,b,d,h){var f,g,k,m,q,w,p,u,D=b[0],r=b[1];b=b[2];k=h[0];m=h[1];g=h[2];p=d[0];h=d[1];f=d[2];if(Math.abs(D-
p)<e.EPSILON&&Math.abs(r-h)<e.EPSILON&&Math.abs(b-f)<e.EPSILON)return c.identity(a);d=D-p;h=r-h;p=b-f;u=1/Math.sqrt(d*d+h*h+p*p);d*=u;h*=u;p*=u;f=m*p-g*h;g=g*d-k*p;k=k*h-m*d;(u=Math.sqrt(f*f+g*g+k*k))?(u=1/u,f*=u,g*=u,k*=u):k=g=f=0;m=h*k-p*g;q=p*f-d*k;w=d*g-h*f;(u=Math.sqrt(m*m+q*q+w*w))?(u=1/u,m*=u,q*=u,w*=u):w=q=m=0;a[0]=f;a[1]=m;a[2]=d;a[3]=0;a[4]=g;a[5]=q;a[6]=h;a[7]=0;a[8]=k;a[9]=w;a[10]=p;a[11]=0;a[12]=-(f*D+g*r+k*b);a[13]=-(m*D+q*r+w*b);a[14]=-(d*D+h*r+p*b);a[15]=1;return a};c.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};c.add=function(a,b,
c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};c.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];
a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a};c.sub=c.subtract;c.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};c.multiplyScalarAndAdd=function(a,b,c,h){a[0]=b[0]+c[0]*h;a[1]=b[1]+c[1]*h;a[2]=b[2]+c[2]*h;a[3]=b[3]+c[3]*h;a[4]=b[4]+c[4]*h;a[5]=b[5]+c[5]*h;a[6]=b[6]+c[6]*h;a[7]=b[7]+c[7]*
h;a[8]=b[8]+c[8]*h;a[9]=b[9]+c[9]*h;a[10]=b[10]+c[10]*h;a[11]=b[11]+c[11]*h;a[12]=b[12]+c[12]*h;a[13]=b[13]+c[13]*h;a[14]=b[14]+c[14]*h;a[15]=b[15]+c[15]*h;return a};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};c.equals=function(a,b){var c=a[0],h=a[1],f=a[2],g=a[3],k=a[4],m=a[5],q=a[6],w=a[7],
p=a[8],u=a[9],D=a[10],r=a[11],B=a[12],t=a[13],E=a[14];a=a[15];var C=b[0],A=b[1],G=b[2],H=b[3],y=b[4],x=b[5],L=b[6],P=b[7],J=b[8],F=b[9],I=b[10],N=b[11],M=b[12],R=b[13],z=b[14];b=b[15];return Math.abs(c-C)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(h-A)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-G)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(g-H)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(H))&&Math.abs(k-y)<=e.EPSILON*Math.max(1,Math.abs(k),Math.abs(y))&&
Math.abs(m-x)<=e.EPSILON*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(q-L)<=e.EPSILON*Math.max(1,Math.abs(q),Math.abs(L))&&Math.abs(w-P)<=e.EPSILON*Math.max(1,Math.abs(w),Math.abs(P))&&Math.abs(p-J)<=e.EPSILON*Math.max(1,Math.abs(p),Math.abs(J))&&Math.abs(u-F)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(D-I)<=e.EPSILON*Math.max(1,Math.abs(D),Math.abs(I))&&Math.abs(r-N)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(N))&&Math.abs(B-M)<=e.EPSILON*Math.max(1,Math.abs(B),Math.abs(M))&&Math.abs(t-
R)<=e.EPSILON*Math.max(1,Math.abs(t),Math.abs(R))&&Math.abs(E-z)<=e.EPSILON*Math.max(1,Math.abs(E),Math.abs(z))&&Math.abs(a-b)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};m.exports=c},function(m,k,g){var e=g(4),c=g(39),a=g(40);k=g(41);var b={create:function(){var a=new e.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};b.rotationTo=function(){var c=a.create(),h=a.fromValues(1,0,0),e=a.fromValues(0,1,0);return function(d,f,g){var k=a.dot(f,g);if(-.999999>k)return a.cross(c,h,f),1E-6>a.length(c)&&
a.cross(c,e,f),a.normalize(c,c),b.setAxisAngle(d,c,Math.PI),d;if(.999999<k)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;a.cross(c,f,g);d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=1+k;return b.normalize(d,d)}}();b.setAxes=function(){var a=c.create();return function(c,d,e,g){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=g[0];a[4]=g[1];a[7]=g[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return b.normalize(c,b.fromMat3(c,a))}}();b.clone=k.clone;b.fromValues=k.fromValues;b.copy=k.copy;b.set=k.set;b.identity=function(a){a[0]=0;a[1]=0;a[2]=
0;a[3]=1;return a};b.setAxisAngle=function(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a};b.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};b.add=k.add;b.multiply=function(a,b,c){var d=b[0],h=b[1],e=b[2];b=b[3];var g=c[0],f=c[1],k=c[2];c=c[3];a[0]=d*c+b*g+h*k-e*f;a[1]=h*c+b*f+e*g-d*k;a[2]=e*c+b*k+d*f-h*g;a[3]=b*c-d*g-h*f-e*k;return a};b.mul=b.multiply;b.scale=
k.scale;b.rotateX=function(a,b,c){c*=.5;var d=b[0],h=b[1],e=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*g;a[1]=h*c+e*g;a[2]=e*c-h*g;a[3]=b*c-d*g;return a};b.rotateY=function(a,b,c){c*=.5;var d=b[0],h=b[1],e=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c-e*g;a[1]=h*c+b*g;a[2]=e*c+d*g;a[3]=b*c-h*g;return a};b.rotateZ=function(a,b,c){c*=.5;var d=b[0],h=b[1],e=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+h*g;a[1]=h*c-d*g;a[2]=e*c+b*g;a[3]=b*c-e*g;return a};b.calculateW=function(a,
b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};b.dot=k.dot;b.lerp=k.lerp;b.slerp=function(a,b,c,e){var d=b[0],h=b[1],g=b[2];b=b[3];var k=c[0],f=c[1],l=c[2];c=c[3];var m,r,B;r=d*k+h*f+g*l+b*c;0>r&&(r=-r,k=-k,f=-f,l=-l,c=-c);1E-6<1-r?(m=Math.acos(r),B=Math.sin(m),r=Math.sin((1-e)*m)/B,e=Math.sin(e*m)/B):r=1-e;a[0]=r*d+e*k;a[1]=r*h+e*f;a[2]=r*g+e*l;a[3]=r*b+e*c;return a};b.sqlerp=function(){var a=b.create(),c=b.create();return function(d,h,e,g,k,m){b.slerp(a,
h,k,m);b.slerp(c,e,g,m);b.slerp(d,a,c,2*m*(1-m));return d}}();b.invert=function(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var h=c*c+d*d+e*e+b*b,h=h?1/h:0;a[0]=-c*h;a[1]=-d*h;a[2]=-e*h;a[3]=b*h;return a};b.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};b.length=k.length;b.len=b.length;b.squaredLength=k.squaredLength;b.sqrLen=b.squaredLength;b.normalize=k.normalize;b.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=
(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var e=(d+1)%3,h=(d+2)%3,c=Math.sqrt(b[3*d+d]-b[3*e+e]-b[3*h+h]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*e+h]-b[3*h+e])*c;a[e]=(b[3*e+d]+b[3*d+e])*c;a[h]=(b[3*h+d]+b[3*d+h])*c}return a};b.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};b.exactEquals=k.exactEquals;b.equals=k.equals;m.exports=b},function(m,k,g){var e=g(4),c={create:function(){var a=new e.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=
new e.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new e.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};c.sub=c.subtract;c.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};c.mul=c.multiply;c.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};
c.div=c.divide;c.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};c.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};c.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};c.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};c.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+
c[0]*e;a[1]=b[1]+c[1]*e;return a};c.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};c.dist=c.distance;c.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/
b[1];return a};c.normalize=function(a,b){var c=b[0],e=b[1],c=c*c+e*e;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};c.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,c,e){var d=b[0];b=b[1];a[0]=d+e*(c[0]-d);a[1]=b+e*(c[1]-b);return a};c.random=function(a,b){b=b||1;var c=2*e.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};c.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*
d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};c.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};c.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};c.forEach=function(){var a=c.create();return function(b,c,e,g,k,m){c||(c=2);e||(e=0);for(g=g?Math.min(g*c+e,b.length):b.length;e<g;e+=c)a[0]=
b[e],a[1]=b[e+1],k(a,a,m),b[e]=a[0],b[e+1]=a[1];return b}}();c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};c.equals=function(a,b){var c=a[0];a=a[1];var h=b[0];b=b[1];return Math.abs(c-h)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(a-b)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};m.exports=c},function(m,k,g){var e=e||{};e.NIFTI1=e.NIFTI1||g(42);e.NIFTI2=e.NIFTI2||g(98);e.Utils=e.Utils||g(27);var c=c||g(28);e.isNIFTI1=
function(a){var b,c;if(a.byteLength<e.NIFTI1.STANDARD_HEADER_SIZE)return!1;b=new DataView(a);a=b.getUint8(e.NIFTI1.MAGIC_NUMBER_LOCATION);c=b.getUint8(e.NIFTI1.MAGIC_NUMBER_LOCATION+1);b=b.getUint8(e.NIFTI1.MAGIC_NUMBER_LOCATION+2);return!(a!==e.NIFTI1.MAGIC_NUMBER[0]||c!==e.NIFTI1.MAGIC_NUMBER[1]||b!==e.NIFTI1.MAGIC_NUMBER[2])};e.isNIFTI2=function(a){var b,c;if(a.byteLength<e.NIFTI1.STANDARD_HEADER_SIZE)return!1;b=new DataView(a);a=b.getUint8(e.NIFTI2.MAGIC_NUMBER_LOCATION);c=b.getUint8(e.NIFTI2.MAGIC_NUMBER_LOCATION+
1);b=b.getUint8(e.NIFTI2.MAGIC_NUMBER_LOCATION+2);return!(a!==e.NIFTI2.MAGIC_NUMBER[0]||c!==e.NIFTI2.MAGIC_NUMBER[1]||b!==e.NIFTI2.MAGIC_NUMBER[2])};e.isNIFTI=function(a){return e.isNIFTI1(a)||e.isNIFTI2(a)};e.isCompressed=function(a){var b;return a&&(b=new DataView(a),a=b.getUint8(0),b=b.getUint8(1),a===e.Utils.GUNZIP_MAGIC_COOKIE1||b===e.Utils.GUNZIP_MAGIC_COOKIE2)?!0:!1};e.decompress=function(a){return c.inflate(a).buffer};e.readHeader=function(a){var b=null;e.isCompressed(a)&&(a=e.decompress(a));
e.isNIFTI1(a)?b=new e.NIFTI1:e.isNIFTI2(a)&&(b=new e.NIFTI2);b?b.readHeader(a):console.error("That file does not appear to be NIFTI!");return b};e.hasExtension=function(a){return 0!=a.extensionFlag[0]};e.readImage=function(a,b){var c=a.vox_offset,e=1,g=1;a.dims[4]&&(e=a.dims[4]);a.dims[5]&&(g=a.dims[5]);return b.slice(c,c+a.numBitsPerVoxel/8*a.dims[2]*a.dims[3]*e*g*a.dims[1])};e.readExtension=function(a,b){var c=a.getExtensionLocation();return b.slice(c,c+a.extensionSize)};e.readExtensionData=function(a,
b){var c=a.getExtensionLocation();return b.slice(c+8,c+a.extensionSize-8)};"undefined"!==typeof m&&m.exports&&(m.exports=e)},function(m,k,g){var e=e||{};e.Utils=e.Utils||g(27);e.NIFTI1=e.NIFTI1||g(42);e.NIFTI2=e.NIFTI2||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=
this.cal_min=this.cal_max=this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.extensionFlag=[0,0,0,0]};e.NIFTI2.MAGIC_COOKIE=540;e.NIFTI2.MAGIC_NUMBER_LOCATION=4;e.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10];e.NIFTI2.prototype.readHeader=function(c){c=new DataView(c);var a=
e.Utils.getIntAt(c,0,this.littleEndian),b,d;a!==e.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,a=e.Utils.getIntAt(c,0,this.littleEndian));if(a!==e.NIFTI2.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.datatypeCode=e.Utils.getShortAt(c,12,this.littleEndian);this.numBitsPerVoxel=e.Utils.getShortAt(c,14,this.littleEndian);for(b=0;8>b;b+=1)a=16+8*b,this.dims[b]=e.Utils.getLongAt(c,a,this.littleEndian);this.intent_p1=e.Utils.getDoubleAt(c,80,this.littleEndian);this.intent_p2=e.Utils.getDoubleAt(c,
88,this.littleEndian);this.intent_p3=e.Utils.getDoubleAt(c,96,this.littleEndian);for(b=0;8>b;b+=1)a=104+8*b,this.pixDims[b]=e.Utils.getDoubleAt(c,a,this.littleEndian);this.vox_offset=e.Utils.getLongAt(c,168,this.littleEndian);this.scl_slope=e.Utils.getDoubleAt(c,176,this.littleEndian);this.scl_inter=e.Utils.getDoubleAt(c,184,this.littleEndian);this.cal_max=e.Utils.getDoubleAt(c,192,this.littleEndian);this.cal_min=e.Utils.getDoubleAt(c,200,this.littleEndian);this.slice_duration=e.Utils.getDoubleAt(c,
208,this.littleEndian);this.toffset=e.Utils.getDoubleAt(c,216,this.littleEndian);this.slice_start=e.Utils.getLongAt(c,224,this.littleEndian);this.slice_end=e.Utils.getLongAt(c,232,this.littleEndian);this.description=e.Utils.getStringAt(c,240,320);this.aux_file=e.Utils.getStringAt(c,320,344);this.qform_code=e.Utils.getIntAt(c,344,this.littleEndian);this.sform_code=e.Utils.getIntAt(c,348,this.littleEndian);this.quatern_b=e.Utils.getDoubleAt(c,352,this.littleEndian);this.quatern_c=e.Utils.getDoubleAt(c,
360,this.littleEndian);this.quatern_d=e.Utils.getDoubleAt(c,368,this.littleEndian);this.qoffset_x=e.Utils.getDoubleAt(c,376,this.littleEndian);this.qoffset_y=e.Utils.getDoubleAt(c,384,this.littleEndian);this.qoffset_z=e.Utils.getDoubleAt(c,392,this.littleEndian);for(b=0;3>b;b+=1)for(d=0;4>d;d+=1)a=400+8*(4*b+d),this.affine[b][d]=e.Utils.getDoubleAt(c,a,this.littleEndian);this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.slice_code=e.Utils.getIntAt(c,496,this.littleEndian);
this.xyzt_units=e.Utils.getIntAt(c,500,this.littleEndian);this.intent_code=e.Utils.getIntAt(c,504,this.littleEndian);this.intent_name=e.Utils.getStringAt(c,508,524);this.dim_info=e.Utils.getByteAt(c,524);c.byteLength>e.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=e.Utils.getByteAt(c,540),this.extensionFlag[1]=e.Utils.getByteAt(c,541),this.extensionFlag[2]=e.Utils.getByteAt(c,542),this.extensionFlag[3]=e.Utils.getByteAt(c,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(c),this.extensionCode=
this.getExtensionCode(c)))};e.NIFTI2.prototype.toFormattedString=function(){var c=e.Utils.formatNumber,a;a=""+("Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n");a+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n";a+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";a+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+
"\n";a+="Voxel Dimensions (1-8): "+c(this.pixDims[0])+", "+c(this.pixDims[1])+", "+c(this.pixDims[2])+", "+c(this.pixDims[3])+", "+c(this.pixDims[4])+", "+c(this.pixDims[5])+", "+c(this.pixDims[6])+", "+c(this.pixDims[7])+"\n";a+="Image Offset = "+this.vox_offset+"\n";a+="Data Scale:  Slope = "+c(this.scl_slope)+"  Intercept = "+c(this.scl_inter)+"\n";a+="Display Range:  Max = "+c(this.cal_max)+"  Min = "+c(this.cal_min)+"\n";a+="Slice Duration = "+this.slice_duration+"\n";a+="Time Axis Shift = "+
this.toffset+"\n";a+="Slice Start = "+this.slice_start+"\n";a+="Slice End = "+this.slice_end+"\n";a+='Description: "'+this.description+'"\n';a+='Auxiliary File: "'+this.aux_file+'"\n';a+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n";a+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";a+="Quaternion Parameters:  b = "+c(this.quatern_b)+"  c = "+c(this.quatern_c)+"  d = "+c(this.quatern_d)+"\n";a+="Quaternion Offsets:  x = "+
this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";a+="S-Form Parameters X: "+c(this.affine[0][0])+", "+c(this.affine[0][1])+", "+c(this.affine[0][2])+", "+c(this.affine[0][3])+"\n";a+="S-Form Parameters Y: "+c(this.affine[1][0])+", "+c(this.affine[1][1])+", "+c(this.affine[1][2])+", "+c(this.affine[1][3])+"\n";a+="S-Form Parameters Z: "+c(this.affine[2][0])+", "+c(this.affine[2][1])+", "+c(this.affine[2][2])+", "+c(this.affine[2][3])+"\n";a+="Slice Code = "+this.slice_code+"\n";
a+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(e.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(e.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";a+="Intent Code = "+this.intent_code+"\n";a+='Intent Name: "'+this.intent_name+'"\n';return a+="Dim Info = "+this.dim_info+"\n"};e.NIFTI2.prototype.getExtensionLocation=function(){return e.NIFTI2.MAGIC_COOKIE+4};e.NIFTI2.prototype.getExtensionSize=e.NIFTI1.prototype.getExtensionSize;e.NIFTI2.prototype.getExtensionCode=
e.NIFTI1.prototype.getExtensionCode;e.NIFTI2.prototype.getDatatypeCodeString=e.NIFTI1.prototype.getDatatypeCodeString;e.NIFTI2.prototype.getTransformCodeString=e.NIFTI1.prototype.getTransformCodeString;e.NIFTI2.prototype.getUnitsCodeString=e.NIFTI1.prototype.getUnitsCodeString;e.NIFTI2.prototype.getQformMat=e.NIFTI1.prototype.getQformMat;e.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=e.NIFTI1.prototype.convertNiftiQFormToNiftiSForm;e.NIFTI2.prototype.convertNiftiSFormToNEMA=e.NIFTI1.prototype.convertNiftiSFormToNEMA;
e.NIFTI2.prototype.nifti_mat33_mul=e.NIFTI1.prototype.nifti_mat33_mul;e.NIFTI2.prototype.nifti_mat33_determ=e.NIFTI1.prototype.nifti_mat33_determ;"undefined"!==typeof m&&m.exports&&(m.exports=e.NIFTI2)},function(m,k,g){function e(c){if(!(this instanceof e))return new e(c);c=this.options=b.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},c||{});c.raw&&0<c.windowBits?c.windowBits=-c.windowBits:c.gzip&&0<c.windowBits&&16>c.windowBits&&(c.windowBits+=16);this.err=0;
this.msg="";this.ended=!1;this.chunks=[];this.strm=new f;this.strm.avail_out=0;var g=a.deflateInit2(this.strm,c.level,c.method,c.windowBits,c.memLevel,c.strategy);if(0!==g)throw Error(h[g]);c.header&&a.deflateSetHeader(this.strm,c.header);if(c.dictionary){c="string"===typeof c.dictionary?d.string2buf(c.dictionary):"[object ArrayBuffer]"===l.call(c.dictionary)?new Uint8Array(c.dictionary):c.dictionary;g=a.deflateSetDictionary(this.strm,c);if(0!==g)throw Error(h[g]);this._dict_set=!0}}function c(a,
b){b=new e(b);b.push(a,!0);if(b.err)throw b.msg||h[b.err];return b.result}var a=g(101),b=g(5),d=g(43),h=g(29),f=g(47),l=Object.prototype.toString;e.prototype.push=function(c,e){var h=this.strm,g=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:!0===e?4:0;"string"===typeof c?h.input=d.string2buf(c):"[object ArrayBuffer]"===l.call(c)?h.input=new Uint8Array(c):h.input=c;h.next_in=0;h.avail_in=h.input.length;do{0===h.avail_out&&(h.output=new b.Buf8(g),h.next_out=0,h.avail_out=g);c=a.deflate(h,
e);if(1!==c&&0!==c)return this.onEnd(c),this.ended=!0,!1;if(0===h.avail_out||0===h.avail_in&&(4===e||2===e))if("string"===this.options.to)this.onData(d.buf2binstring(b.shrinkBuf(h.output,h.next_out)));else this.onData(b.shrinkBuf(h.output,h.next_out))}while((0<h.avail_in||0===h.avail_out)&&1!==c);if(4===e)return c=a.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,0===c;2===e&&(this.onEnd(0),h.avail_out=0);return!0};e.prototype.onData=function(a){this.chunks.push(a)};e.prototype.onEnd=function(a){0===
a&&(this.result="string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};k.Deflate=e;k.deflate=c;k.deflateRaw=function(a,b){b=b||{};b.raw=!0;return c(a,b)};k.gzip=function(a,b){b=b||{};b.gzip=!0;return c(a,b)}},function(m,k,g){function e(c){if(!(this instanceof e))return new e(c);var d=this.options=b.assign({chunkSize:16384,windowBits:0,to:""},c||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&
(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||c&&c.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&0===(d.windowBits&15)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new l;this.strm.avail_out=0;c=a.inflateInit2(this.strm,d.windowBits);if(c!==h.Z_OK)throw Error(f[c]);this.header=new n;a.inflateGetHeader(this.strm,this.header)}function c(a,b){b=new e(b);b.push(a,!0);if(b.err)throw b.msg||f[b.err];return b.result}var a=g(104),b=g(5),d=
g(43),h=g(45),f=g(29),l=g(47),n=g(102),v=Object.prototype.toString;e.prototype.push=function(c,e){var g=this.strm,k=this.options.chunkSize,f=this.options.dictionary,l,m,t,n=!1;if(this.ended)return!1;e=e===~~e?e:!0===e?h.Z_FINISH:h.Z_NO_FLUSH;"string"===typeof c?g.input=d.binstring2buf(c):"[object ArrayBuffer]"===v.call(c)?g.input=new Uint8Array(c):g.input=c;g.next_in=0;g.avail_in=g.input.length;do{0===g.avail_out&&(g.output=new b.Buf8(k),g.next_out=0,g.avail_out=k);c=a.inflate(g,h.Z_NO_FLUSH);c===
h.Z_NEED_DICT&&f&&(c="string"===typeof f?d.string2buf(f):"[object ArrayBuffer]"===v.call(f)?new Uint8Array(f):f,c=a.inflateSetDictionary(this.strm,c));c===h.Z_BUF_ERROR&&!0===n&&(c=h.Z_OK,n=!1);if(c!==h.Z_STREAM_END&&c!==h.Z_OK)return this.onEnd(c),this.ended=!0,!1;if(g.next_out&&(0===g.avail_out||c===h.Z_STREAM_END||0===g.avail_in&&(e===h.Z_FINISH||e===h.Z_SYNC_FLUSH)))if("string"===this.options.to)l=d.utf8border(g.output,g.next_out),m=g.next_out-l,t=d.buf2string(g.output,l),g.next_out=m,g.avail_out=
k-m,m&&b.arraySet(g.output,g.output,l,m,0),this.onData(t);else this.onData(b.shrinkBuf(g.output,g.next_out));0===g.avail_in&&0===g.avail_out&&(n=!0)}while((0<g.avail_in||0===g.avail_out)&&c!==h.Z_STREAM_END);c===h.Z_STREAM_END&&(e=h.Z_FINISH);if(e===h.Z_FINISH)return c=a.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===h.Z_OK;e===h.Z_SYNC_FLUSH&&(this.onEnd(h.Z_OK),g.avail_out=0);return!0};e.prototype.onData=function(a){this.chunks.push(a)};e.prototype.onEnd=function(a){a===h.Z_OK&&(this.result=
"string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};k.Inflate=e;k.inflate=c;k.inflateRaw=function(a,b){b=b||{};b.raw=!0;return c(a,b)};k.ungzip=c},function(m,k,g){function e(a,b){a.msg=G[b];return b}function c(a){for(var b=a.length;0<=--b;)a[b]=0}function a(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(t.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=
c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function b(b,c){E._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,c);b.block_start=b.strstart;a(b.strm)}function d(a,b){a.pending_buf[a.pending++]=b}function h(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function f(a,b){var c=a.max_chain_length,d=a.strstart,e,h=a.prev_length,g=a.nice_match,k=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,f=a.window,l=a.w_mask,y=a.prev,m=
a.strstart+258,t=f[d+h-1],n=f[d+h];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do if(e=b,f[e+h]===n&&f[e+h-1]===t&&f[e]===f[d]&&f[++e]===f[d+1]){d+=2;for(e++;f[++d]===f[++e]&&f[++d]===f[++e]&&f[++d]===f[++e]&&f[++d]===f[++e]&&f[++d]===f[++e]&&f[++d]===f[++e]&&f[++d]===f[++e]&&f[++d]===f[++e]&&d<m;);e=258-(m-d);d=m-258;if(e>h){a.match_start=b;h=e;if(e>=g)break;t=f[d+h-1];n=f[d+h]}}while((b=y[b&l])>k&&0!==--c);return h<=a.lookahead?h:a.lookahead}function l(a){var b=a.w_size,
c,d,e,h;do{h=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){t.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;c=d=a.hash_size;do e=a.head[--c],a.head[c]=e>=b?e-b:0;while(--d);c=d=b;do e=a.prev[--c],a.prev[c]=e>=b?e-b:0;while(--d);h+=b}if(0===a.strm.avail_in)break;c=a.strm;d=a.window;e=a.strstart+a.lookahead;var g=c.avail_in;g>h&&(g=h);0===g?d=0:(c.avail_in-=g,t.arraySet(d,c.input,c.next_in,g,e),1===c.state.wrap?c.adler=C(c.adler,d,g,e):2===c.state.wrap&&
(c.adler=A(c.adler,d,g,e)),c.next_in+=g,c.total_in+=g,d=g);a.lookahead+=d;if(3<=a.lookahead+a.insert)for(h=a.strstart-a.insert,a.ins_h=a.window[h],a.ins_h=(a.ins_h<<a.hash_shift^a.window[h+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[h+3-1])&a.hash_mask,a.prev[h&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=h,h++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function n(a,c){for(var d;;){if(262>a.lookahead){l(a);if(262>a.lookahead&&0===c)return 1;
if(0===a.lookahead)break}d=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==d&&a.strstart-d<=a.w_size-262&&(a.match_length=f(a,d));if(3<=a.match_length)if(d=E._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,
a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=E._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=2>a.strstart?a.strstart:2;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?
1:2}function v(a,c){for(var d,e;;){if(262>a.lookahead){l(a);if(262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}d=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=2;0!==d&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-262&&(a.match_length=f(a,d),5>=a.match_length&&(1===a.strategy||3===a.match_length&&
4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-3;d=E._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;if(d&&(b(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((d=
E._tr_tally(a,0,a.window[a.strstart-1]))&&b(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(E._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function q(a,c){for(var d,e,h,g=a.window;;){if(258>=a.lookahead){l(a);if(258>=a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.match_length=
0;if(3<=a.lookahead&&0<a.strstart&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){for(h=a.strstart+258;d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<h;);a.match_length=258-(h-e);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}3<=a.match_length?(d=E._tr_tally(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=E._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(d&&
(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function w(a,c){for(var d;;){if(0===a.lookahead&&(l(a),0===a.lookahead)){if(0===c)return 1;break}a.match_length=0;d=E._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(d&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function p(a,b,c,d,e){this.good_length=
a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function u(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=
this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new t.Buf16(1146);this.dyn_dtree=new t.Buf16(122);this.bl_tree=new t.Buf16(78);c(this.dyn_ltree);c(this.dyn_dtree);c(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new t.Buf16(16);this.heap=new t.Buf16(573);c(this.heap);this.heap_max=this.heap_len=0;this.depth=new t.Buf16(573);c(this.depth);this.bi_valid=
this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function D(a){var b;if(!a||!a.state)return e(a,-2);a.total_in=a.total_out=0;a.data_type=2;b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;a.adler=2===b.wrap?0:1;b.last_flush=0;E._tr_init(b);return 0}function r(a){var b=D(a);0===b&&(a=a.state,a.window_size=2*a.w_size,c(a.head),a.max_lazy_match=H[a.level].max_lazy,a.good_match=H[a.level].good_length,
a.nice_match=H[a.level].nice_length,a.max_chain_length=H[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function B(a,b,c,d,h,g){if(!a)return-2;var k=1;-1===b&&(b=6);0>d?(k=0,d=-d):15<d&&(k=2,d-=16);if(1>h||9<h||8!==c||8>d||15<d||0>b||9<b||0>g||4<g)return e(a,-2);8===d&&(d=9);var f=new u;a.state=f;f.strm=a;f.wrap=k;f.gzhead=null;f.w_bits=d;f.w_size=1<<f.w_bits;f.w_mask=f.w_size-1;f.hash_bits=h+7;f.hash_size=
1<<f.hash_bits;f.hash_mask=f.hash_size-1;f.hash_shift=~~((f.hash_bits+3-1)/3);f.window=new t.Buf8(2*f.w_size);f.head=new t.Buf16(f.hash_size);f.prev=new t.Buf16(f.w_size);f.lit_bufsize=1<<h+6;f.pending_buf_size=4*f.lit_bufsize;f.pending_buf=new t.Buf8(f.pending_buf_size);f.d_buf=1*f.lit_bufsize;f.l_buf=3*f.lit_bufsize;f.level=b;f.strategy=g;f.method=c;return r(a)}var t=g(5),E=g(106),C=g(44),A=g(46),G=g(29),H;H=[new p(0,0,0,0,function(a,c){var d=65535;for(d>a.pending_buf_size-5&&(d=a.pending_buf_size-
5);;){if(1>=a.lookahead){l(a);if(0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var e=a.block_start+d;if(0===a.strstart||a.strstart>=e)if(a.lookahead=a.strstart-e,a.strstart=e,b(a,!1),0===a.strm.avail_out)return 1;if(a.strstart-a.block_start>=a.w_size-262&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===c)return b(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&b(a,!1);return 1}),new p(4,4,8,4,n),new p(4,5,16,8,n),new p(4,6,32,32,
n),new p(4,4,16,16,v),new p(8,16,32,32,v),new p(8,16,128,128,v),new p(8,32,128,256,v),new p(32,128,258,1024,v),new p(32,258,258,4096,v)];k.deflateInit=function(a,b){return B(a,b,8,15,8,0)};k.deflateInit2=B;k.deflateReset=r;k.deflateResetKeep=D;k.deflateSetHeader=function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0};k.deflate=function(b,g){var k,f,l,m;if(!b||!b.state||5<g||0>g)return b?e(b,-2):-2;f=b.state;if(!b.output||!b.input&&0!==b.avail_in||666===f.status&&4!==g)return e(b,
0===b.avail_out?-5:-2);f.strm=b;k=f.last_flush;f.last_flush=g;42===f.status&&(2===f.wrap?(b.adler=0,d(f,31),d(f,139),d(f,8),f.gzhead?(d(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),d(f,f.gzhead.time&255),d(f,f.gzhead.time>>8&255),d(f,f.gzhead.time>>16&255),d(f,f.gzhead.time>>24&255),d(f,9===f.level?2:2<=f.strategy||2>f.level?4:0),d(f,f.gzhead.os&255),f.gzhead.extra&&f.gzhead.extra.length&&(d(f,f.gzhead.extra.length&255),d(f,f.gzhead.extra.length>>
8&255)),f.gzhead.hcrc&&(b.adler=A(b.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(d(f,0),d(f,0),d(f,0),d(f,0),d(f,0),d(f,9===f.level?2:2<=f.strategy||2>f.level?4:0),d(f,3),f.status=113)):(l=8+(f.w_bits-8<<4)<<8,l|=(2<=f.strategy||2>f.level?0:6>f.level?1:6===f.level?2:3)<<6,0!==f.strstart&&(l|=32),f.status=113,h(f,l+(31-l%31)),0!==f.strstart&&(h(f,b.adler>>>16),h(f,b.adler&65535)),b.adler=1));if(69===f.status)if(f.gzhead.extra){for(l=f.pending;f.gzindex<(f.gzhead.extra.length&65535)&&
(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>l&&(b.adler=A(b.adler,f.pending_buf,f.pending-l,l)),a(b),l=f.pending,f.pending!==f.pending_buf_size));)d(f,f.gzhead.extra[f.gzindex]&255),f.gzindex++;f.gzhead.hcrc&&f.pending>l&&(b.adler=A(b.adler,f.pending_buf,f.pending-l,l));f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(73===f.status)if(f.gzhead.name){l=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>l&&(b.adler=A(b.adler,f.pending_buf,
f.pending-l,l)),a(b),l=f.pending,f.pending===f.pending_buf_size)){m=1;break}m=f.gzindex<f.gzhead.name.length?f.gzhead.name.charCodeAt(f.gzindex++)&255:0;d(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>l&&(b.adler=A(b.adler,f.pending_buf,f.pending-l,l));0===m&&(f.gzindex=0,f.status=91)}else f.status=91;if(91===f.status)if(f.gzhead.comment){l=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>l&&(b.adler=A(b.adler,f.pending_buf,f.pending-l,l)),a(b),l=f.pending,f.pending===f.pending_buf_size)){m=
1;break}m=f.gzindex<f.gzhead.comment.length?f.gzhead.comment.charCodeAt(f.gzindex++)&255:0;d(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>l&&(b.adler=A(b.adler,f.pending_buf,f.pending-l,l));0===m&&(f.status=103)}else f.status=103;103===f.status&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&a(b),f.pending+2<=f.pending_buf_size&&(d(f,b.adler&255),d(f,b.adler>>8&255),b.adler=0,f.status=113)):f.status=113);if(0!==f.pending){if(a(b),0===b.avail_out)return f.last_flush=-1,0}else if(0===b.avail_in&&(g<<
1)-(4<g?9:0)<=(k<<1)-(4<k?9:0)&&4!==g)return e(b,-5);if(666===f.status&&0!==b.avail_in)return e(b,-5);if(0!==b.avail_in||0!==f.lookahead||0!==g&&666!==f.status){k=2===f.strategy?w(f,g):3===f.strategy?q(f,g):H[f.level].func(f,g);if(3===k||4===k)f.status=666;if(1===k||3===k)return 0===b.avail_out&&(f.last_flush=-1),0;if(2===k&&(1===g?E._tr_align(f):5!==g&&(E._tr_stored_block(f,0,0,!1),3===g&&(c(f.head),0===f.lookahead&&(f.strstart=0,f.block_start=0,f.insert=0))),a(b),0===b.avail_out))return f.last_flush=
-1,0}if(4!==g)return 0;if(0>=f.wrap)return 1;2===f.wrap?(d(f,b.adler&255),d(f,b.adler>>8&255),d(f,b.adler>>16&255),d(f,b.adler>>24&255),d(f,b.total_in&255),d(f,b.total_in>>8&255),d(f,b.total_in>>16&255),d(f,b.total_in>>24&255)):(h(f,b.adler>>>16),h(f,b.adler&65535));a(b);0<f.wrap&&(f.wrap=-f.wrap);return 0!==f.pending?0:1};k.deflateEnd=function(a){var b;if(!a||!a.state)return-2;b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return e(a,-2);a.state=null;return 113===b?
e(a,-3):0};k.deflateSetDictionary=function(a,b){var d=b.length,e,h,f,g,k;if(!a||!a.state)return-2;e=a.state;h=e.wrap;if(2===h||1===h&&42!==e.status||e.lookahead)return-2;1===h&&(a.adler=C(a.adler,b,d,0));e.wrap=0;d>=e.w_size&&(0===h&&(c(e.head),e.strstart=0,e.block_start=0,e.insert=0),f=new t.Buf8(e.w_size),t.arraySet(f,b,d-e.w_size,e.w_size,0),b=f,d=e.w_size);f=a.avail_in;g=a.next_in;k=a.input;a.avail_in=d;a.next_in=0;a.input=b;for(l(e);3<=e.lookahead;){b=e.strstart;d=e.lookahead-2;do e.ins_h=(e.ins_h<<
e.hash_shift^e.window[b+3-1])&e.hash_mask,e.prev[b&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=b,b++;while(--d);e.strstart=b;e.lookahead=2;l(e)}e.strstart+=e.lookahead;e.block_start=e.strstart;e.insert=e.lookahead;e.lookahead=0;e.match_length=e.prev_length=2;e.match_available=0;a.next_in=g;a.input=k;a.avail_in=f;e.wrap=h;return 0};k.deflateInfo="pako deflate (from Nodeca project)"},function(m,k,g){m.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=
this.name="";this.hcrc=0;this.done=!1}},function(m,k,g){m.exports=function(e,c){var a,b,d,h,f,g,k,m,q,w,p,u,D,r,B,t,E,C,A,G,H,y,x;a=e.state;b=e.next_in;y=e.input;d=b+(e.avail_in-5);h=e.next_out;x=e.output;c=h-(c-e.avail_out);f=h+(e.avail_out-257);g=a.dmax;k=a.wsize;m=a.whave;q=a.wnext;w=a.window;p=a.hold;u=a.bits;D=a.lencode;r=a.distcode;B=(1<<a.lenbits)-1;t=(1<<a.distbits)-1;a:do b:for(15>u&&(p+=y[b++]<<u,u+=8,p+=y[b++]<<u,u+=8),E=D[p&B];;){C=E>>>24;p>>>=C;u-=C;C=E>>>16&255;if(0===C)x[h++]=E&65535;
else if(C&16){A=E&65535;if(C&=15)u<C&&(p+=y[b++]<<u,u+=8),A+=p&(1<<C)-1,p>>>=C,u-=C;15>u&&(p+=y[b++]<<u,u+=8,p+=y[b++]<<u,u+=8);E=r[p&t];c:for(;;){C=E>>>24;p>>>=C;u-=C;C=E>>>16&255;if(C&16){E&=65535;C&=15;u<C&&(p+=y[b++]<<u,u+=8,u<C&&(p+=y[b++]<<u,u+=8));E+=p&(1<<C)-1;if(E>g){e.msg="invalid distance too far back";a.mode=30;break a}p>>>=C;u-=C;C=h-c;if(E>C){C=E-C;if(C>m&&a.sane){e.msg="invalid distance too far back";a.mode=30;break a}G=0;H=w;if(0===q){if(G+=k-C,C<A){A-=C;do x[h++]=w[G++];while(--C);
G=h-E;H=x}}else if(q<C){if(G+=k+q-C,C-=q,C<A){A-=C;do x[h++]=w[G++];while(--C);G=0;if(q<A){C=q;A-=C;do x[h++]=w[G++];while(--C);G=h-E;H=x}}}else if(G+=q-C,C<A){A-=C;do x[h++]=w[G++];while(--C);G=h-E;H=x}for(;2<A;)x[h++]=H[G++],x[h++]=H[G++],x[h++]=H[G++],A-=3;A&&(x[h++]=H[G++],1<A&&(x[h++]=H[G++]))}else{G=h-E;do x[h++]=x[G++],x[h++]=x[G++],x[h++]=x[G++],A-=3;while(2<A);A&&(x[h++]=x[G++],1<A&&(x[h++]=x[G++]))}}else if(0===(C&64)){E=r[(E&65535)+(p&(1<<C)-1)];continue c}else{e.msg="invalid distance code";
a.mode=30;break a}break}}else if(0===(C&64)){E=D[(E&65535)+(p&(1<<C)-1)];continue b}else{C&32?a.mode=12:(e.msg="invalid literal/length code",a.mode=30);break a}break}while(b<d&&h<f);A=u>>3;b-=A;u-=A<<3;e.next_in=b;e.next_out=h;e.avail_in=b<d?5+(d-b):5-(b-d);e.avail_out=h<f?257+(f-h):257-(h-f);a.hold=p&(1<<u)-1;a.bits=u}},function(m,k,g){function e(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function c(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=
this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new l.Buf16(320);this.work=new l.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function a(a){var b;if(!a||!a.state)return-2;b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=
b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new l.Buf32(852);b.distcode=b.distdyn=new l.Buf32(592);b.sane=1;b.back=-1;return 0}function b(b){var c;if(!b||!b.state)return-2;c=b.state;c.wsize=0;c.whave=0;c.wnext=0;return a(b)}function d(a,c){var d,e;if(!a||!a.state)return-2;e=a.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==e.window&&e.wbits!==c&&(e.window=null);e.wrap=d;e.wbits=c;return b(a)}function h(a,
b){var e;if(!a)return-2;e=new c;a.state=e;e.window=null;b=d(a,b);0!==b&&(a.state=null);return b}function f(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new l.Buf8(e.wsize));d>=e.wsize?(l.arraySet(e.window,b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&(a=d),l.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(l.arraySet(e.window,b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=
a)));return 0}var l=g(5),n=g(44),v=g(46),q=g(103),w=g(105),p=!0,u,D;k.inflateReset=b;k.inflateReset2=d;k.inflateResetKeep=a;k.inflateInit=function(a){return h(a,15)};k.inflateInit2=h;k.inflate=function(a,b){var c,d,h,g,k,m,y,x,r,B,J,F,I,N,M,R,z,K,U=new l.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;c=a.state;12===c.mode&&(c.mode=13);k=a.next_out;h=a.output;y=a.avail_out;g=a.next_in;d=a.input;m=a.avail_in;x=c.hold;r=c.bits;
B=m;J=y;K=0;a:for(;;)switch(c.mode){case 1:if(0===c.wrap){c.mode=13;break}for(;16>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}if(c.wrap&2&&35615===x){c.check=0;U[0]=x&255;U[1]=x>>>8&255;c.check=v(c.check,U,2,0);r=x=0;c.mode=2;break}c.flags=0;c.head&&(c.head.done=!1);if(!(c.wrap&1)||(((x&255)<<8)+(x>>8))%31){a.msg="incorrect header check";c.mode=30;break}if(8!==(x&15)){a.msg="unknown compression method";c.mode=30;break}x>>>=4;r-=4;I=(x&15)+8;if(0===c.wbits)c.wbits=I;else if(I>c.wbits){a.msg="invalid window size";
c.mode=30;break}c.dmax=1<<I;a.adler=c.check=1;c.mode=x&512?10:12;r=x=0;break;case 2:for(;16>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.flags=x;if(8!==(c.flags&255)){a.msg="unknown compression method";c.mode=30;break}if(c.flags&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=x>>8&1);c.flags&512&&(U[0]=x&255,U[1]=x>>>8&255,c.check=v(c.check,U,2,0));r=x=0;c.mode=3;case 3:for(;32>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.head&&(c.head.time=x);c.flags&512&&(U[0]=x&255,
U[1]=x>>>8&255,U[2]=x>>>16&255,U[3]=x>>>24&255,c.check=v(c.check,U,4,0));r=x=0;c.mode=4;case 4:for(;16>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.head&&(c.head.xflags=x&255,c.head.os=x>>8);c.flags&512&&(U[0]=x&255,U[1]=x>>>8&255,c.check=v(c.check,U,2,0));r=x=0;c.mode=5;case 5:if(c.flags&1024){for(;16>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.length=x;c.head&&(c.head.extra_len=x);c.flags&512&&(U[0]=x&255,U[1]=x>>>8&255,c.check=v(c.check,U,2,0));r=x=0}else c.head&&(c.head.extra=null);c.mode=6;
case 6:if(c.flags&1024&&(F=c.length,F>m&&(F=m),F&&(c.head&&(I=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),l.arraySet(c.head.extra,d,g,F,I)),c.flags&512&&(c.check=v(c.check,d,F,g)),m-=F,g+=F,c.length-=F),c.length))break a;c.length=0;c.mode=7;case 7:if(c.flags&2048){if(0===m)break a;F=0;do I=d[g+F++],c.head&&I&&65536>c.length&&(c.head.name+=String.fromCharCode(I));while(I&&F<m);c.flags&512&&(c.check=v(c.check,d,F,g));m-=F;g+=F;if(I)break a}else c.head&&(c.head.name=
null);c.length=0;c.mode=8;case 8:if(c.flags&4096){if(0===m)break a;F=0;do I=d[g+F++],c.head&&I&&65536>c.length&&(c.head.comment+=String.fromCharCode(I));while(I&&F<m);c.flags&512&&(c.check=v(c.check,d,F,g));m-=F;g+=F;if(I)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(c.flags&512){for(;16>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}if(x!==(c.check&65535)){a.msg="header crc mismatch";c.mode=30;break}r=x=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0);a.adler=c.check=0;c.mode=12;break;
case 10:for(;32>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}a.adler=c.check=e(x);r=x=0;c.mode=11;case 11:if(0===c.havedict)return a.next_out=k,a.avail_out=y,a.next_in=g,a.avail_in=m,c.hold=x,c.bits=r,2;a.adler=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.last){x>>>=r&7;r-=r&7;c.mode=27;break}for(;3>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.last=x&1;x>>>=1;--r;switch(x&3){case 0:c.mode=14;break;case 1:I=c;if(p){u=new l.Buf32(512);D=new l.Buf32(32);for(F=0;144>F;)I.lens[F++]=8;
for(;256>F;)I.lens[F++]=9;for(;280>F;)I.lens[F++]=7;for(;288>F;)I.lens[F++]=8;w(1,I.lens,0,288,u,0,I.work,{bits:9});for(F=0;32>F;)I.lens[F++]=5;w(2,I.lens,0,32,D,0,I.work,{bits:5});p=!1}I.lencode=u;I.lenbits=9;I.distcode=D;I.distbits=5;c.mode=20;if(6===b){x>>>=2;r-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}x>>>=2;r-=2;break;case 14:x>>>=r&7;for(r-=r&7;32>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}if((x&65535)!==(x>>>16^65535)){a.msg="invalid stored block lengths";
c.mode=30;break}c.length=x&65535;r=x=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(F=c.length){F>m&&(F=m);F>y&&(F=y);if(0===F)break a;l.arraySet(h,d,g,F,k);m-=F;g+=F;y-=F;k+=F;c.length-=F;break}c.mode=12;break;case 17:for(;14>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.nlen=(x&31)+257;x>>>=5;r-=5;c.ndist=(x&31)+1;x>>>=5;r-=5;c.ncode=(x&15)+4;x>>>=4;r-=4;if(286<c.nlen||30<c.ndist){a.msg="too many length or distance symbols";c.mode=30;break}c.have=0;c.mode=18;case 18:for(;c.have<c.ncode;){for(;3>
r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.lens[O[c.have++]]=x&7;x>>>=3;r-=3}for(;19>c.have;)c.lens[O[c.have++]]=0;c.lencode=c.lendyn;c.lenbits=7;F={bits:c.lenbits};K=w(0,c.lens,0,19,c.lencode,0,c.work,F);c.lenbits=F.bits;if(K){a.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;;){M=c.lencode[x&(1<<c.lenbits)-1];F=M>>>24;M&=65535;if(F<=r)break;if(0===m)break a;m--;x+=d[g++]<<r;r+=8}if(16>M)x>>>=F,r-=F,c.lens[c.have++]=M;else{if(16===M){for(I=
F+2;r<I;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}x>>>=F;r-=F;if(0===c.have){a.msg="invalid bit length repeat";c.mode=30;break}I=c.lens[c.have-1];F=3+(x&3);x>>>=2;r-=2}else if(17===M){for(I=F+3;r<I;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}x>>>=F;r-=F;I=0;F=3+(x&7);x>>>=3;r-=3}else{for(I=F+7;r<I;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}x>>>=F;r-=F;I=0;F=11+(x&127);x>>>=7;r-=7}if(c.have+F>c.nlen+c.ndist){a.msg="invalid bit length repeat";c.mode=30;break}for(;F--;)c.lens[c.have++]=I}}if(30===c.mode)break;
if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.lenbits=9;F={bits:c.lenbits};K=w(1,c.lens,0,c.nlen,c.lencode,0,c.work,F);c.lenbits=F.bits;if(K){a.msg="invalid literal/lengths set";c.mode=30;break}c.distbits=6;c.distcode=c.distdyn;F={bits:c.distbits};K=w(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,F);c.distbits=F.bits;if(K){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=m&&258<=y){a.next_out=k;a.avail_out=
y;a.next_in=g;a.avail_in=m;c.hold=x;c.bits=r;q(a,J);k=a.next_out;h=a.output;y=a.avail_out;g=a.next_in;d=a.input;m=a.avail_in;x=c.hold;r=c.bits;12===c.mode&&(c.back=-1);break}for(c.back=0;;){M=c.lencode[x&(1<<c.lenbits)-1];F=M>>>24;I=M>>>16&255;M&=65535;if(F<=r)break;if(0===m)break a;m--;x+=d[g++]<<r;r+=8}if(I&&0===(I&240)){N=F;R=I;for(z=M;;){M=c.lencode[z+((x&(1<<N+R)-1)>>N)];F=M>>>24;I=M>>>16&255;M&=65535;if(N+F<=r)break;if(0===m)break a;m--;x+=d[g++]<<r;r+=8}x>>>=N;r-=N;c.back+=N}x>>>=F;r-=F;c.back+=
F;c.length=M;if(0===I){c.mode=26;break}if(I&32){c.back=-1;c.mode=12;break}if(I&64){a.msg="invalid literal/length code";c.mode=30;break}c.extra=I&15;c.mode=22;case 22:if(c.extra){for(I=c.extra;r<I;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.length+=x&(1<<c.extra)-1;x>>>=c.extra;r-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;;){M=c.distcode[x&(1<<c.distbits)-1];F=M>>>24;I=M>>>16&255;M&=65535;if(F<=r)break;if(0===m)break a;m--;x+=d[g++]<<r;r+=8}if(0===(I&240)){N=F;R=I;for(z=M;;){M=c.distcode[z+
((x&(1<<N+R)-1)>>N)];F=M>>>24;I=M>>>16&255;M&=65535;if(N+F<=r)break;if(0===m)break a;m--;x+=d[g++]<<r;r+=8}x>>>=N;r-=N;c.back+=N}x>>>=F;r-=F;c.back+=F;if(I&64){a.msg="invalid distance code";c.mode=30;break}c.offset=M;c.extra=I&15;c.mode=24;case 24:if(c.extra){for(I=c.extra;r<I;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}c.offset+=x&(1<<c.extra)-1;x>>>=c.extra;r-=c.extra;c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===y)break a;F=J-y;
if(c.offset>F){F=c.offset-F;if(F>c.whave&&c.sane){a.msg="invalid distance too far back";c.mode=30;break}F>c.wnext?(F-=c.wnext,I=c.wsize-F):I=c.wnext-F;F>c.length&&(F=c.length);N=c.window}else N=h,I=k-c.offset,F=c.length;F>y&&(F=y);y-=F;c.length-=F;do h[k++]=N[I++];while(--F);0===c.length&&(c.mode=21);break;case 26:if(0===y)break a;h[k++]=c.length;y--;c.mode=21;break;case 27:if(c.wrap){for(;32>r;){if(0===m)break a;m--;x|=d[g++]<<r;r+=8}J-=y;a.total_out+=J;c.total+=J;J&&(a.adler=c.check=c.flags?v(c.check,
h,J,k-J):n(c.check,h,J,k-J));J=y;if((c.flags?x:e(x))!==c.check){a.msg="incorrect data check";c.mode=30;break}r=x=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;32>r;){if(0===m)break a;m--;x+=d[g++]<<r;r+=8}if(x!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=30;break}r=x=0}c.mode=29;case 29:K=1;break a;case 30:K=-3;break a;case 31:return-4;default:return-2}a.next_out=k;a.avail_out=y;a.next_in=g;a.avail_in=m;c.hold=x;c.bits=r;if((c.wsize||J!==a.avail_out&&30>c.mode&&(27>c.mode||4!==b))&&
f(a,a.output,a.next_out,J-a.avail_out))return c.mode=31,-4;B-=a.avail_in;J-=a.avail_out;a.total_in+=B;a.total_out+=J;c.total+=J;c.wrap&&J&&(a.adler=c.check=c.flags?v(c.check,h,J,a.next_out-J):n(c.check,h,J,a.next_out-J));a.data_type=c.bits+(c.last?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===B&&0===J||4===b)&&0===K&&(K=-5);return K};k.inflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};k.inflateGetHeader=function(a,b){if(!a||
!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0};k.inflateSetDictionary=function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(e=n(1,b,c,0),e!==d.check))return-3;if(f(a,b,c,c))return d.mode=31,-4;d.havedict=1;return 0};k.inflateInfo="pako inflate (from Nodeca project)"},function(m,k,g){var e=g(5),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,
16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];m.exports=function(h,f,g,k,m,q,w,p){var l=p.bits,n,r,v,t,E,C,A,G,H,y,x,L,P,J=0,F,I=new e.Buf16(16);E=new e.Buf16(16);var N,M=0,R,z,K;for(n=0;15>=n;n++)I[n]=0;for(r=0;r<k;r++)I[f[g+r]]++;t=l;for(v=
15;1<=v&&0===I[v];v--);t>v&&(t=v);if(0===v)return m[q++]=20971520,m[q++]=20971520,p.bits=1,0;for(l=1;l<v&&0===I[l];l++);t<l&&(t=l);for(n=C=1;15>=n;n++)if(C<<=1,C-=I[n],0>C)return-1;if(0<C&&(0===h||1!==v))return-1;E[1]=0;for(n=1;15>n;n++)E[n+1]=E[n]+I[n];for(r=0;r<k;r++)0!==f[g+r]&&(w[E[f[g+r]]++]=r);0===h?(P=N=w,F=19):1===h?(P=c,J-=257,N=a,M-=257,F=256):(P=b,N=d,F=-1);r=G=0;n=l;L=q;k=t;E=0;y=-1;A=1<<t;x=A-1;if(1===h&&852<A||2===h&&592<A)return 1;for(;;){R=n-E;w[r]<F?(z=0,K=w[r]):w[r]>F?(z=N[M+w[r]],
K=P[J+w[r]]):(z=96,K=0);C=1<<n-E;l=H=1<<k;do H-=C,m[L+(G>>E)+H]=R<<24|z<<16|K|0;while(0!==H);for(C=1<<n-1;G&C;)C>>=1;0!==C?(G&=C-1,G+=C):G=0;r++;if(0===--I[n]){if(n===v)break;n=f[g+w[r]]}if(n>t&&(G&x)!==y){0===E&&(E=t);L+=l;k=n-E;for(C=1<<k;k+E<v;){C-=I[k+E];if(0>=C)break;k++;C<<=1}A+=1<<k;if(1===h&&852<A||2===h&&592<A)return 1;y=G&x;m[y]=t<<24|k<<16|L-q|0}}0!==G&&(m[L+G]=n-E<<24|4194304);p.bits=t;return 0}},function(m,k,g){function e(a){for(var b=a.length;0<=--b;)a[b]=0}function c(a,b,c,d,e){this.static_tree=
a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e;this.has_stree=a&&a.length}function a(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function b(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function d(a,c,d){a.bi_valid>16-d?(a.bi_buf|=c<<a.bi_valid&65535,b(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=d-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=d)}function h(a,b,c){d(a,c[2*b],c[2*b+1])}function f(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;
while(0<--b);return c>>>1}function l(a,b,c){var d=Array(16),e=0,h;for(h=1;15>=h;h++)d[h]=e=e+c[h-1]<<1;for(c=0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=f(d[e]++,e))}function n(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function v(a){8<a.bi_valid?b(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function q(a,b,c,d){var e=2*b,h=
2*c;return a[e]<a[h]||a[e]===a[h]&&d[b]<=d[c]}function w(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len;){e<a.heap_len&&q(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(q(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function p(a,b,c){var e,f,g=0,k,l;if(0!==a.last_lit){do e=a.pending_buf[a.d_buf+2*g]<<8|a.pending_buf[a.d_buf+2*g+1],f=a.pending_buf[a.l_buf+g],g++,0===e?h(a,f,b):(k=P[f],h(a,k+256+1,b),l=C[k],0!==l&&(f-=J[k],d(a,f,l)),e--,k=256>e?L[e]:L[256+(e>>>7)],h(a,k,c),l=A[k],
0!==l&&(e-=F[k],d(a,e,l)));while(g<a.last_lit)}h(a,256,b)}function u(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,h=b.stat_desc.elems,f,g=-1,k;a.heap_len=0;a.heap_max=573;for(f=0;f<h;f++)0!==c[2*f]?(a.heap[++a.heap_len]=g=f,a.depth[f]=0):c[2*f+1]=0;for(;2>a.heap_len;)k=a.heap[++a.heap_len]=2>g?++g:0,c[2*k]=1,a.depth[k]=0,a.opt_len--,e&&(a.static_len-=d[2*k+1]);b.max_code=g;for(f=a.heap_len>>1;1<=f;f--)w(a,c,f);k=h;do f=a.heap[1],a.heap[1]=a.heap[a.heap_len--],w(a,c,1),d=
a.heap[1],a.heap[--a.heap_max]=f,a.heap[--a.heap_max]=d,c[2*k]=c[2*f]+c[2*d],a.depth[k]=(a.depth[f]>=a.depth[d]?a.depth[f]:a.depth[d])+1,c[2*f+1]=c[2*d+1]=k,a.heap[1]=k++,w(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];f=b.dyn_tree;k=b.max_code;var d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,h=b.stat_desc.extra_bits,m=b.stat_desc.extra_base,n=b.stat_desc.max_length,z,p,r,K,q=0;for(p=0;15>=p;p++)a.bl_count[p]=0;f[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++)z=a.heap[b],
p=f[2*f[2*z+1]+1]+1,p>n&&(p=n,q++),f[2*z+1]=p,z>k||(a.bl_count[p]++,r=0,z>=m&&(r=h[z-m]),K=f[2*z],a.opt_len+=K*(p+r),e&&(a.static_len+=K*(d[2*z+1]+r)));if(0!==q){do{for(p=n-1;0===a.bl_count[p];)p--;a.bl_count[p]--;a.bl_count[p+1]+=2;a.bl_count[n]--;q-=2}while(0<q);for(p=n;0!==p;p--)for(z=a.bl_count[p];0!==z;)d=a.heap[--b],d>k||(f[2*d+1]!==p&&(a.opt_len+=(p-f[2*d+1])*f[2*d],f[2*d+1]=p),z--)}l(c,g,a.bl_count)}function D(a,b,c){var d,e=-1,h,f=b[1],g=0,k=7,l=4;0===f&&(k=138,l=3);b[2*(c+1)+1]=65535;for(d=
0;d<=c;d++)h=f,f=b[2*(d+1)+1],++g<k&&h===f||(g<l?a.bl_tree[2*h]+=g:0!==h?(h!==e&&a.bl_tree[2*h]++,a.bl_tree[32]++):10>=g?a.bl_tree[34]++:a.bl_tree[36]++,g=0,e=h,0===f?(k=138,l=3):h===f?(k=6,l=3):(k=7,l=4))}function r(a,b,c){var e,f=-1,g,k=b[1],l=0,m=7,n=4;0===k&&(m=138,n=3);for(e=0;e<=c;e++)if(g=k,k=b[2*(e+1)+1],!(++l<m&&g===k)){if(l<n){do h(a,g,a.bl_tree);while(0!==--l)}else 0!==g?(g!==f&&(h(a,g,a.bl_tree),l--),h(a,16,a.bl_tree),d(a,l-3,2)):10>=l?(h(a,17,a.bl_tree),d(a,l-3,3)):(h(a,18,a.bl_tree),
d(a,l-11,7));l=0;f=g;0===k?(m=138,n=3):g===k?(m=6,n=3):(m=7,n=4)}}function B(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function t(a,c,e,h){d(a,0+(h?1:0),3);v(a);b(a,e);b(a,~e);E.arraySet(a.pending_buf,a.window,c,e,a.pending);a.pending+=e}var E=g(5),C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,
1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],y=Array(576);e(y);var x=Array(60);e(x);var L=Array(512);e(L);var P=Array(256);e(P);var J=Array(29);e(J);var F=Array(30);e(F);var I,N,M,R=!1;k._tr_init=function(b){if(!R){var d,e,h,g=Array(16);for(h=e=0;28>h;h++)for(J[h]=e,d=0;d<1<<C[h];d++)P[e++]=h;P[e-1]=h;for(h=e=0;16>h;h++)for(F[h]=e,d=0;d<1<<A[h];d++)L[e++]=h;for(e>>=7;30>h;h++)for(F[h]=e<<7,d=
0;d<1<<A[h]-7;d++)L[256+e++]=h;for(d=0;15>=d;d++)g[d]=0;for(d=0;143>=d;)y[2*d+1]=8,d++,g[8]++;for(;255>=d;)y[2*d+1]=9,d++,g[9]++;for(;279>=d;)y[2*d+1]=7,d++,g[7]++;for(;287>=d;)y[2*d+1]=8,d++,g[8]++;l(y,287,g);for(d=0;30>d;d++)x[2*d+1]=5,x[2*d]=f(d,5);I=new c(y,C,257,286,15);N=new c(x,A,0,30,15);M=new c([],G,0,19,7);R=!0}b.l_desc=new a(b.dyn_ltree,I);b.d_desc=new a(b.dyn_dtree,N);b.bl_desc=new a(b.bl_tree,M);b.bi_buf=0;b.bi_valid=0;n(b)};k._tr_stored_block=t;k._tr_flush_block=function(a,b,c,e){var h,
f,g=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=B(a));u(a,a.l_desc);u(a,a.d_desc);D(a,a.dyn_ltree,a.l_desc.max_code);D(a,a.dyn_dtree,a.d_desc.max_code);u(a,a.bl_desc);for(g=18;3<=g&&0===a.bl_tree[2*H[g]+1];g--);a.opt_len+=3*(g+1)+14;h=a.opt_len+3+7>>>3;f=a.static_len+3+7>>>3;f<=h&&(h=f)}else h=f=c+5;if(c+4<=h&&-1!==b)t(a,b,c,e);else if(4===a.strategy||f===h)d(a,2+(e?1:0),3),p(a,y,x);else{d(a,4+(e?1:0),3);b=a.l_desc.max_code+1;c=a.d_desc.max_code+1;g+=1;d(a,b-257,5);d(a,c-1,5);d(a,g-4,
4);for(h=0;h<g;h++)d(a,a.bl_tree[2*H[h]+1],3);r(a,a.dyn_ltree,b-1);r(a,a.dyn_dtree,c-1);p(a,a.dyn_ltree,a.dyn_dtree)}n(a);e&&v(a)};k._tr_tally=function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(P[c]+256+1)]++,a.dyn_dtree[2*(256>b?L[b]:L[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1};k._tr_align=function(a){d(a,2,3);h(a,256,y);
16===a.bi_valid?(b(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}},function(m,k,g){function e(a,b){if(0===a.indexOf("data:")){var c=a.indexOf("base64,")+7;a=atob(a.substring(c));for(var c=new Uint8Array(a.length),e=a.length-1;0<=e;e--)c[e]=a.charCodeAt(e);b(c.buffer)}else{var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.onload=function(){b(f.response)};f.send(null)}}k=function(){function a(){this._src=
null;this._parser=new c.JpegImage;this.onload=null}a.prototype={get src(){return this._src},set src(a){this.load(a)},get width(){return this._parser.width},get height(){return this._parser.height},load:function(a){this._src=a;e(a,function(a){this.parse(new Uint8Array(a));if(this.onload)this.onload()}.bind(this))},parse:function(a){this._parser.parse(a)},getData:function(a,c){return this._parser.getData(a,c,!1)},copyToImageData:function(a){if(2===this._parser.numComponents||4<this._parser.numComponents)throw Error("Unsupported amount of components");
var b=a.width,c=a.height,e=b*c*4;a=a.data;if(1===this._parser.numComponents)for(var g=this._parser.getData(b,c,!1),c=b=0;b<e;){var k=g[c++];a[b++]=k;a[b++]=k;a[b++]=k;a[b++]=255}else for(g=this._parser.getData(b,c,!0),c=b=0;b<e;)a[b++]=g[c++],a[b++]=g[c++],a[b++]=g[c++],a[b++]=255}};return a}();var c;(function(a){function b(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c}function c(a,b){return a[b]<<8|a[b+1]}function e(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function f(a,b,c){Object.defineProperty(a,
b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c}var g=function(){function a(){}function b(a,b){for(var c=0,d=[],e,h,f=16;0<f&&!a[f-1];)f--;d.push({children:[],index:0});var g=d[0],k;for(e=0;e<f;e++){for(h=0;h<a[e];h++){g=d.pop();for(g.children[g.index]=b[c];0<g.index;)g=d.pop();g.index++;for(d.push(g);d.length<=e;)d.push(k={children:[],index:0}),g.children[g.index]=k.children,g=k;c++}e+1<f&&(d.push(k={children:[],index:0}),g.children[g.index]=k.children,g=k)}return d[0].children}function c(a,
b,c,d,e,g,f,k,l){function m(){if(0<t)return t--,Oa>>t&1;Oa=a[b++];if(255===Oa){var c=a[b++];if(c)throw"unexpected marker: "+(Oa<<8|c).toString(16);}t=7;return Oa>>>7}function n(a){for(;;){a=a[m()];if("number"===typeof a)return a;if("object"!==typeof a)throw"invalid huffman sequence";}}function p(a){for(var b=0;0<a;)b=b<<1|m(),a--;return b}function q(a){if(1===a)return 1===m()?1:-1;var b=p(a);return b>=1<<a-1?b:b+(-1<<a)+1}function z(a,b){var c=n(a.huffmanTableDC),c=0===c?0:q(c);a.blockData[b]=a.pred+=
c;for(c=1;64>c;){var d=n(a.huffmanTableAC),e=d&15,d=d>>4;if(0===e){if(15>d)break;c+=16}else c+=d,a.blockData[b+h[c]]=q(e),c++}}function r(a,b){var c=n(a.huffmanTableDC),c=0===c?0:q(c)<<l;a.blockData[b]=a.pred+=c}function x(a,b){a.blockData[b]|=m()<<l}function O(a,b){if(0<A)A--;else for(var c=g;c<=f;){var d=n(a.huffmanTableAC),e=d&15,d=d>>4;if(0===e){if(15>d){A=p(d)+(1<<d)-1;break}c+=16}else c+=d,a.blockData[b+h[c]]=q(e)*(1<<l),c++}}function S(a,b){for(var c=g,d=0,e;c<=f;){e=h[c];switch(y){case 0:d=
n(a.huffmanTableAC);e=d&15;d>>=4;if(0===e)15>d?(A=p(d)+(1<<d),y=4):(d=16,y=1);else{if(1!==e)throw"invalid ACn encoding";u=q(e);y=d?2:3}continue;case 1:case 2:a.blockData[b+e]?a.blockData[b+e]+=m()<<l:(d--,0===d&&(y=2===y?3:0));break;case 3:a.blockData[b+e]?a.blockData[b+e]+=m()<<l:(a.blockData[b+e]=u<<l,y=0);break;case 4:a.blockData[b+e]&&(a.blockData[b+e]+=m()<<l)}c++}4===y&&(A--,0===A&&(y=0))}var w=c.mcusPerLine,Q=b,Oa=0,t=0,A=0,y=0,u,v=d.length,G,B,D,F,C;k=c.progressive?0===g?0===k?r:x:0===k?O:
S:z;var E=0;c=1===v?d[0].blocksPerLine*d[0].blocksPerColumn:w*c.mcusPerColumn;e||(e=c);for(var H,J;E<c;){for(B=0;B<v;B++)d[B].pred=0;A=0;if(1===v)for(G=d[0],C=0;C<e;C++)k(G,64*((G.blocksPerLine+1)*(E/G.blocksPerLine|0)+E%G.blocksPerLine)),E++;else for(C=0;C<e;C++){for(B=0;B<v;B++)for(G=d[B],H=G.h,J=G.v,D=0;D<J;D++)for(F=0;F<H;F++)k(G,64*((G.blocksPerLine+1)*((E/w|0)*G.v+D)+(E%w*G.h+F)));E++}t=0;G=a[b]<<8|a[b+1];if(65280>=G)throw"marker was not found";if(65488<=G&&65495>=G)b+=2;else break}return b-
Q}function d(a,b){a=b.blocksPerLine;for(var c=b.blocksPerColumn,d=new Int16Array(64),e=0;e<c;e++)for(var h=0;h<a;h++){for(var g,f,k,l,m,n,p,z,q,r,O,S,w=64*((b.blocksPerLine+1)*e+h),Q=d,t=b.quantizationTable,A=b.blockData,u=0;64>u;u+=8)g=A[w+u],z=A[w+u+1],p=A[w+u+2],n=A[w+u+3],m=A[w+u+4],l=A[w+u+5],k=A[w+u+6],f=A[w+u+7],g*=t[u],0===(z|p|n|m|l|k|f)?(g=5793*g+512>>10,Q[u]=g,Q[u+1]=g,Q[u+2]=g,Q[u+3]=g,Q[u+4]=g,Q[u+5]=g,Q[u+6]=g,Q[u+7]=g):(z*=t[u+1],p*=t[u+2],n*=t[u+3],m*=t[u+4],l*=t[u+5],k*=t[u+6],f*=
t[u+7],S=5793*g+128>>8,O=5793*m+128>>8,r=p,q=k,m=2896*(z-f)+128>>8,f=2896*(z+f)+128>>8,n<<=4,l<<=4,S=S+O+1>>1,O=S-O,g=3784*r+1567*q+128>>8,r=1567*r-3784*q+128>>8,q=g,m=m+l+1>>1,l=m-l,f=f+n+1>>1,n=f-n,S=S+q+1>>1,q=S-q,O=O+r+1>>1,r=O-r,g=2276*m+3406*f+2048>>12,m=3406*m-2276*f+2048>>12,f=g,g=799*n+4017*l+2048>>12,n=4017*n-799*l+2048>>12,l=g,Q[u]=S+f,Q[u+7]=S-f,Q[u+1]=O+l,Q[u+6]=O-l,Q[u+2]=r+n,Q[u+5]=r-n,Q[u+3]=q+m,Q[u+4]=q-m);for(t=0;8>t;++t)g=Q[t],z=Q[t+8],p=Q[t+16],n=Q[t+24],m=Q[t+32],l=Q[t+40],k=
Q[t+48],f=Q[t+56],0===(z|p|n|m|l|k|f)?(g=5793*g+8192>>14,g=-2040>g?0:2024<=g?255:g+2056>>4,A[w+t]=g,A[w+t+8]=g,A[w+t+16]=g,A[w+t+24]=g,A[w+t+32]=g,A[w+t+40]=g,A[w+t+48]=g,A[w+t+56]=g):(S=5793*g+2048>>12,O=5793*m+2048>>12,r=p,q=k,m=2896*(z-f)+2048>>12,f=2896*(z+f)+2048>>12,S=(S+O+1>>1)+4112,O=S-O,g=3784*r+1567*q+2048>>12,r=1567*r-3784*q+2048>>12,q=g,m=m+l+1>>1,l=m-l,f=f+n+1>>1,n=f-n,S=S+q+1>>1,q=S-q,O=O+r+1>>1,r=O-r,g=2276*m+3406*f+2048>>12,m=3406*m-2276*f+2048>>12,f=g,g=799*n+4017*l+2048>>12,n=4017*
n-799*l+2048>>12,l=g,g=S+f,f=S-f,z=O+l,k=O-l,p=r+n,l=r-n,n=q+m,m=q-m,g=16>g?0:4080<=g?255:g>>4,z=16>z?0:4080<=z?255:z>>4,p=16>p?0:4080<=p?255:p>>4,n=16>n?0:4080<=n?255:n>>4,m=16>m?0:4080<=m?255:m>>4,l=16>l?0:4080<=l?255:l>>4,k=16>k?0:4080<=k?255:k>>4,f=16>f?0:4080<=f?255:f>>4,A[w+t]=g,A[w+t+8]=z,A[w+t+16]=p,A[w+t+24]=n,A[w+t+32]=m,A[w+t+40]=l,A[w+t+48]=k,A[w+t+56]=f)}return b.blockData}function e(a){return 0>=a?0:255<=a?255:a}var h=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,
33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);a.prototype={parse:function(a){function e(){var b=a[k]<<8|a[k+1];k+=2;return b}function g(){var b=e(),b=a.subarray(k,k+b-2);k+=b.length;return b}function f(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),c=Math.ceil(a.scanLines/8/a.maxV),d=0;d<a.components.length;d++){Q=a.components[d];var e=Math.ceil(Math.ceil(a.samplesPerLine/8)*Q.h/a.maxH),g=Math.ceil(Math.ceil(a.scanLines/
8)*Q.v/a.maxV);Q.blockData=new Int16Array(64*c*Q.v*(b*Q.h+1));Q.blocksPerLine=e;Q.blocksPerColumn=g}a.mcusPerLine=b;a.mcusPerColumn=c}var k=0,l=null,m=null,n,p,q=[],r=[],w=[],t=e();if(65496!==t)throw"SOI not found";for(t=e();65497!==t;){var z,u;switch(t){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:z=g();65504===t&&74===z[0]&&70===z[1]&&73===z[2]&&70===z[3]&&
0===z[4]&&(l={version:{major:z[5],minor:z[6]},densityUnits:z[7],xDensity:z[8]<<8|z[9],yDensity:z[10]<<8|z[11],thumbWidth:z[12],thumbHeight:z[13],thumbData:z.subarray(14,14+3*z[12]*z[13])});65518===t&&65===z[0]&&100===z[1]&&111===z[2]&&98===z[3]&&101===z[4]&&0===z[5]&&(m={version:z[6],flags0:z[7]<<8|z[8],flags1:z[9]<<8|z[10],transformCode:z[11]});break;case 65499:for(var t=e()+k-2,A;k<t;){var O=a[k++],S=new Uint16Array(64);if(0===O>>4)for(z=0;64>z;z++)A=h[z],S[A]=a[k++];else if(1===O>>4)for(z=0;64>
z;z++)A=h[z],S[A]=e();else throw"DQT: invalid table spec";q[O&15]=S}break;case 65472:case 65473:case 65474:if(n)throw"Only single frame JPEGs supported";e();n={};n.extended=65473===t;n.progressive=65474===t;n.precision=a[k++];n.scanLines=e();n.samplesPerLine=e();n.components=[];n.componentIds={};z=a[k++];for(t=S=O=0;t<z;t++){A=a[k];u=a[k+1]>>4;var v=a[k+1]&15;O<u&&(O=u);S<v&&(S=v);u=n.components.push({h:u,v:v,quantizationTable:q[a[k+2]]});n.componentIds[A]=u-1;k+=3}n.maxH=O;n.maxV=S;f(n);break;case 65476:A=
e();for(t=2;t<A;){O=a[k++];S=new Uint8Array(16);for(z=u=0;16>z;z++,k++)u+=S[z]=a[k];v=new Uint8Array(u);for(z=0;z<u;z++,k++)v[z]=a[k];t+=17+u;(0===O>>4?w:r)[O&15]=b(S,v)}break;case 65501:e();p=e();break;case 65498:e();A=a[k++];z=[];for(var Q,t=0;t<A;t++)O=n.componentIds[a[k++]],Q=n.components[O],O=a[k++],Q.huffmanTableDC=w[O>>4],Q.huffmanTableAC=r[O&15],z.push(Q);t=a[k++];A=a[k++];O=a[k++];t=c(a,k,n,z,p,t,A,O>>4,O&15);k+=t;break;case 65535:255!==a[k]&&k--;break;default:if(255===a[k-3]&&192<=a[k-2]&&
254>=a[k-2])k-=3;else throw"unknown JPEG marker "+t.toString(16);}t=e()}this.width=n.samplesPerLine;this.height=n.scanLines;this.jfif=l;this.adobe=m;this.components=[];for(t=0;t<n.components.length;t++)Q=n.components[t],this.components.push({output:d(n,Q),scaleX:Q.h/n.maxH,scaleY:Q.v/n.maxV,blocksPerLine:Q.blocksPerLine,blocksPerColumn:Q.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(a,b){var c=this.width/a,d=this.height/b,e,g,h,f,k,l,m,n,p=this.components.length,
z=a*b*p,q=new Uint8Array(z),r=new Uint32Array(a);for(l=0;l<p;l++){e=this.components[l];g=e.scaleX*c;h=e.scaleY*d;m=l;n=e.output;f=e.blocksPerLine+1<<3;for(k=0;k<a;k++)e=0|k*g,r[k]=(e&4294967288)<<3|e&7;for(g=0;g<b;g++)for(e=0|g*h,e=f*(e&4294967288)|(e&7)<<3,k=0;k<a;k++)q[m]=n[e+r[k]],m+=p}if(b=this.decodeTransform)for(l=0;l<z;)for(a=e=0;e<p;e++,l++,a+=2)q[l]=(q[l]*b[a]>>8)+b[a+1];return q},_isColorConversionNeeded:function(){return this.adobe&&this.adobe.transformCode?!0:3===this.numComponents?!0:
!1},_convertYccToRgb:function(a){for(var b,c,d,g=0,h=a.length;g<h;g+=3)b=a[g],c=a[g+1],d=a[g+2],a[g]=e(b-179.456+1.402*d),a[g+1]=e(b+135.459-.344*c-.714*d),a[g+2]=e(b-226.816+1.772*c);return a},_convertYcckToRgb:function(a){for(var b,c,d,g,h=0,f=0,k=a.length;f<k;f+=4){b=a[f];c=a[f+1];d=a[f+2];g=a[f+3];var l=-122.67195406894+c*(-6.60635669420364E-5*c+4.37130475926232E-4*d-5.4080610064599E-5*b+4.8449797120281E-4*g-.154362151871126)+d*(-9.57964378445773E-4*d+8.17076911346625E-4*b-.00477271405408747*
g+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*g+.48357088451265)+g*(-3.36197177618394E-4*g+.484791561490776),m=107.268039397724+c*(2.19927104525741E-5*c-6.40992018297945E-4*d+6.59397001245577E-4*b+4.26105652938837E-4*g-.176491792462875)+d*(-7.78269941513683E-4*d+.00130872261408275*b+7.70482631801132E-4*g-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*g+.25802910206845)+g*(-3.18913117588328E-4*g-.213742400323665);b=-20.810012546947+c*(-5.70115196973677E-4*c-2.63409051004589E-5*
d+.0020741088115012*b-.00288260236853442*g+.814272968359295)+d*(-1.53496057440975E-5*d-1.32689043961446E-4*b+5.60833691242812E-4*g-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*g+.116935020465145)+g*(-3.43531996510555E-4*g+.24165260232407);a[h++]=e(l);a[h++]=e(m);a[h++]=e(b)}return a},_convertYcckToCmyk:function(a){for(var b,c,d,g=0,h=a.length;g<h;g+=4)b=a[g],c=a[g+1],d=a[g+2],a[g]=e(434.456-b-1.402*d),a[g+1]=e(119.541-b+.344*c+.714*d),a[g+2]=e(481.816-b-1.772*c);return a},_convertCmykToRgb:function(a){for(var b,
c,d,e,g=0,h=1/255/255,f=0,k=a.length;f<k;f+=4){b=a[f];c=a[f+1];d=a[f+2];e=a[f+3];var l=b*(-4.387332384609988*b+54.48615194189176*c+18.82290502165302*d+212.25662451639585*e-72734.4411664936)+c*(1.7149763477362134*c-5.6096736904047315*d-17.873870861415444*e-1401.7366389350734)+d*(-2.5217340131683033*d-21.248923337353073*e+4465.541406466231)-e*(21.86122147463605*e+48317.86113160301),m=b*(8.841041422036149*b+60.118027045597366*c+6.871425592049007*d+31.159100130055922*e-20220.756542821975)+c*(-15.310361306967817*
c+17.575251261109482*d+131.35250912493976*e-48691.05921601825)+d*(4.444339102852739*d+9.8632861493405*e-6341.191035517494)-e*(20.737325471181034*e+47890.15695978492);b=b*(.8842522430003296*b+8.078677503112928*c+30.89978309703729*d-.23883238689178934*e-3616.812083916688)+c*(10.49593273432072*c+63.02378494754052*d+50.606957656360734*e-28620.90484698408)+d*(.03296041114873217*d+115.60384449646641*e-49363.43385999684)-e*(22.33816807309886*e+45932.16563550634);a[g++]=0<=l?255:-16581375>=l?0:255+l*h|0;
a[g++]=0<=m?255:-16581375>=m?0:255+m*h|0;a[g++]=0<=b?255:-16581375>=b?0:255+b*h|0}return a},getData:function(a,b,c){if(4<this.numComponents)throw"Unsupported color mode";a=this._getLinearizedBlockData(a,b);if(3===this.numComponents)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return c?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(c)return this._convertCmykToRgb(a)}return a}};return a}();"use strict";var k=function(){function a(a,b,c){this.data=
a;this.bp=b;this.dataEnd=c;this.chigh=a[b];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&65535|this.clow>>9&127;this.clow=this.clow<<7&65535;this.ct-=7;this.a=32768}var b=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,
switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,
nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,
nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];a.prototype={byteIn:function(){var a=
this.data,b=this.bp;255===a[b]?143<a[b+1]?(this.clow+=65280,this.ct=8):(b++,this.clow+=a[b]<<9,this.ct=7,this.bp=b):(b++,this.clow+=b<this.dataEnd?a[b]<<8:65280,this.ct=8,this.bp=b);65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(a,c){var d=a[c]>>1,e=a[c]&1,d=b[d],g=d.qe,h=this.a-g;if(this.chigh<g)h<g?(h=g,g=e,d=d.nmps):(h=g,g=1^e,1===d.switchFlag&&(e=g),d=d.nlps);else{this.chigh-=g;if(0!==(h&32768))return this.a=h,e;h<g?(g=1^e,1===d.switchFlag&&(e=g),d=d.nlps):(g=
e,d=d.nmps)}do 0===this.ct&&this.byteIn(),h<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(0===(h&32768));this.a=h;a[c]=d<<1|e;return g}};return a}();"use strict";var m=function(){function a(){this.failOnCorruptedImage=!1}function d(a,b,c){a=c.xcb_;c=c.ycb_;var d=1<<a,e=1<<c,g=b.tbx0>>a,h=b.tby0>>c,f=b.tbx1+d-1>>a,k=b.tby1+e-1>>c,l=b.resolution.precinctParameters,m=[],n=[],p,q,z,r;for(q=h;q<k;q++)for(p=g;p<f;p++)if(z={cbx:p,cby:q,tbx0:d*p,tby0:e*q,
tbx1:d*(p+1),tby1:e*(q+1)},z.tbx0_=Math.max(b.tbx0,z.tbx0),z.tby0_=Math.max(b.tby0,z.tby0),z.tbx1_=Math.min(b.tbx1,z.tbx1),z.tby1_=Math.min(b.tby1,z.tby1),r=Math.floor((z.tbx0_-b.tbx0)/l.precinctWidthInSubband)+Math.floor((z.tby0_-b.tby0)/l.precinctHeightInSubband)*l.numprecinctswide,z.precinctNumber=r,z.subbandType=b.type,z.Lblock=3,!(z.tbx1_<=z.tbx0_||z.tby1_<=z.tby0_)){m.push(z);var t=n[r];void 0!==t?(p<t.cbxMin?t.cbxMin=p:p>t.cbxMax&&(t.cbxMax=p),q<t.cbyMin?t.cbxMin=q:q>t.cbyMax&&(t.cbyMax=q)):
n[r]=t={cbxMin:p,cbyMin:q,cbxMax:p,cbyMax:q};z.precinct=t}b.codeblockParameters={codeblockWidth:a,codeblockHeight:c,numcodeblockwide:f-g+1,numcodeblockhigh:k-h+1};b.codeblocks=m;b.precincts=n}function g(a,b,c){var d=[];a=a.subbands;for(var e=0,g=a.length;e<g;e++)for(var h=a[e].codeblocks,f=0,k=h.length;f<k;f++){var l=h[f];l.precinctNumber===b&&d.push(l)}return{layerNumber:c,codeblocks:d}}function h(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=0;
for(a=0;a<d;a++)e=Math.max(e,b.components[a].codingStyleParameters.decompositionLevelsCount);var h=0,f=0,k=0,l=0;this.nextPacket=function(){for(;h<c;h++){for(;f<=e;f++){for(;k<d;k++){var a=b.components[k];if(!(f>a.codingStyleParameters.decompositionLevelsCount)){for(var a=a.resolutions[f],m=a.precinctParameters.numprecincts;l<m;)return a=g(a,l,h),l++,a;l=0}}k=0}f=0}throw Error("JPX Error: Out of packets");}}function f(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,
d=a.SIZ.Csiz,e=0;for(a=0;a<d;a++)e=Math.max(e,b.components[a].codingStyleParameters.decompositionLevelsCount);var h=0,f=0,k=0,l=0;this.nextPacket=function(){for(;h<=e;h++){for(;f<c;f++){for(;k<d;k++){var a=b.components[k];if(!(h>a.codingStyleParameters.decompositionLevelsCount)){for(var a=a.resolutions[h],m=a.precinctParameters.numprecincts;l<m;)return a=g(a,l,f),l++,a;l=0}}k=0}f=0}throw Error("JPX Error: Out of packets");}}function l(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,
d=a.SIZ.Csiz,e,h,f,k,l=0;for(f=0;f<d;f++)l=Math.max(l,b.components[f].codingStyleParameters.decompositionLevelsCount);var m=new Int32Array(l+1);for(h=0;h<=l;++h){for(f=a=0;f<d;++f){var n=b.components[f].resolutions;h<n.length&&(a=Math.max(a,n[h].precinctParameters.numprecincts))}m[h]=a}k=f=h=e=0;this.nextPacket=function(){for(;h<=l;h++){for(;k<m[h];k++){for(;f<d;f++){var a=b.components[f];if(!(h>a.codingStyleParameters.decompositionLevelsCount||(a=a.resolutions[h],k>=a.precinctParameters.numprecincts))){for(;e<
c;)return a=g(a,k,e),e++,a;e=0}}f=0}k=0}throw Error("JPX Error: Out of packets");}}function m(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=w(b),h=0,f=0,k=0,l=0,m=0;this.nextPacket=function(){for(;m<e.maxNumHigh;m++){for(;l<e.maxNumWide;l++){for(;k<d;k++){for(var a=b.components[k],n=a.codingStyleParameters.decompositionLevelsCount;f<=n;f++){var p=a.resolutions[f],r=q(l,m,e.components[k].resolutions[f],e,p);if(null!==r){for(;h<c;)return a=g(p,r,h),
h++,a;h=0}}f=0}k=0}l=0}throw Error("JPX Error: Out of packets");}}function n(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=w(b),h=0,f=0,k=0,l=0,m=0;this.nextPacket=function(){for(;k<d;++k){for(var a=b.components[k],n=e.components[k],p=a.codingStyleParameters.decompositionLevelsCount;m<n.maxNumHigh;m++){for(;l<n.maxNumWide;l++){for(;f<=p;f++){var r=a.resolutions[f],z=q(l,m,n.resolutions[f],n,r);if(null!==z){for(;h<c;)return a=g(r,z,h),h++,a;h=0}}f=
0}l=0}m=0}throw Error("JPX Error: Out of packets");}}function q(a,b,c,d,e){a*=d.minWidth;b*=d.minHeight;return 0!==a%c.width||0!==b%c.height?null:a/c.height+b/c.width*e.precinctParameters.numprecinctswide}function w(a){for(var b=a.components.length,c=Number.MAX_VALUE,d=Number.MAX_VALUE,e=0,g=0,h=Array(b),f=0;f<b;f++){for(var k=a.components[f],l=k.codingStyleParameters.decompositionLevelsCount,m=Array(l+1),n=Number.MAX_VALUE,p=Number.MAX_VALUE,q=0,r=0,t=1;0<=l;--l){var w=k.resolutions[l],u=t*w.precinctParameters.precinctWidth,
v=t*w.precinctParameters.precinctHeight,n=Math.min(n,u),p=Math.min(p,v),q=Math.max(q,w.precinctParameters.numprecinctswide),r=Math.max(r,w.precinctParameters.numprecinctshigh);m[l]={width:u,height:v};t<<=1}c=Math.min(c,n);d=Math.min(d,p);e=Math.max(e,q);g=Math.max(g,r);h[f]={resolutions:m,minWidth:n,minHeight:p,maxNumWide:q,maxNumHigh:r}}return{components:h,minWidth:c,minHeight:d,maxNumWide:e,maxNumHigh:g}}function v(a,c,d,e){function g(a){for(;m<a;){var b=c[d+k];k++;n?(l=l<<7|b,m+=7,n=!1):(l=l<<
8|b,m+=8);255===b&&(n=!0)}m-=a;return l>>>m&(1<<a)-1}function h(a){return 255===c[d+k-1]&&c[d+k]===a?(k+=1,!0):255===c[d+k]&&c[d+k+1]===a?(k+=2,!0):!1}function f(){if(0===g(1))return 1;if(0===g(1))return 2;var a=g(2);if(3>a)return a+3;a=g(5);if(31>a)return a+6;a=g(7);return a+37}var k=0,l,m=0,n=!1,p=a.COD.sopMarkerUsed,q=a.COD.ephMarkerUsed;for(a=a.tiles[a.currentTile.index].packetsIterator;k<e;){m=0;n&&(k++,n=!1);p&&h(145)&&(k+=4);var r=a.nextPacket();if(g(1)){for(var z=r.layerNumber,t=[],w,u=0,
v=r.codeblocks.length;u<v;u++){w=r.codeblocks[u];var K=w.precinct,y=w.cbx-K.cbxMin,x=w.cby-K.cbyMin,U=!1,D=!1,R;if(void 0!==w.included)U=!!g(1);else{var K=w.precinct,A,B;void 0!==K.inclusionTree?A=K.inclusionTree:(R=K.cbxMax-K.cbxMin+1,B=K.cbyMax-K.cbyMin+1,A=new J(R,B,z),B=new P(R,B),K.inclusionTree=A,K.zeroBitPlanesTree=B);if(A.reset(y,x,z))for(;;)if(g(1)){if(R=!A.nextLevel()){U=D=w.included=!0;break}}else{A.incrementValue(z);break}}if(U){if(D){B=K.zeroBitPlanesTree;for(B.reset(y,x);;)if(g(1)){if(R=
!B.nextLevel())break}else B.incrementValue();w.zeroBitPlanes=B.value}for(K=f();g(1);)w.Lblock++;y=b(K);y=g((K<1<<y?y-1:y)+w.Lblock);t.push({codeblock:w,codingpasses:K,dataLength:y})}}m=0;n&&(k++,n=!1);for(q&&h(146);0<t.length;)r=t.shift(),w=r.codeblock,void 0===w.data&&(w.data=[]),w.data.push({data:c,start:d+k,end:d+k+r.dataLength,codingpasses:r.codingpasses}),k+=r.dataLength}}return k}var L={LL:0,LH:1,HL:1,HH:2};a.prototype={parse:function(a){if(65359===c(a,0))this.parseCodestream(a,0,a.length);
else for(var b=0,d=a.length;b<d;){var g=8,h=e(a,b),f=e(a,b+4),b=b+g;1===h&&(h=4294967296*e(a,b)+e(a,b+4),b+=8,g+=8);0===h&&(h=d-b+g);if(h<g)throw Error("JPX Error: Invalid box field size");g=h-g;h=!0;switch(f){case 1785737832:h=!1;break;case 1668246642:f=a[b];if(1===f)switch(f=e(a,b+3),f){case 16:case 17:case 18:break;default:p("Unknown colorspace "+f)}else 2===f&&u("ICC profile not supported");break;case 1785737827:this.parseCodestream(a,b,b+g);break;case 1783636E3:218793738!==e(a,b)&&p("Invalid JP2 signature");
break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var k=String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,f&255);p("Unsupported header type "+f+" ("+k+")")}h&&(b+=g)}},parseImageProperties:function(a){for(var b=a.getByte();0<=b;){var c=b,b=a.getByte();if(65361===(c<<8|b)){a.skip(4);var b=a.getInt32()>>>0,c=a.getInt32()>>>0,d=a.getInt32()>>>0,e=a.getInt32()>>>0;a.skip(16);a=a.getUint16();this.width=b-d;this.height=c-e;this.componentsCount=a;this.bitsPerComponent=
8;return}}throw Error("JPX Error: No size marker found in JPX stream");},parseCodestream:function(a,b,g){var q={};try{for(var r=!1,z=b;z+1<g;){var w=c(a,z),z=z+2,t=0,u,y,K,x,B,A;switch(w){case 65359:q.mainHeader=!0;break;case 65497:break;case 65361:var t=c(a,z),D={};D.Xsiz=e(a,z+4);D.Ysiz=e(a,z+8);D.XOsiz=e(a,z+12);D.YOsiz=e(a,z+16);D.XTsiz=e(a,z+20);D.YTsiz=e(a,z+24);D.XTOsiz=e(a,z+28);D.YTOsiz=e(a,z+32);var C=c(a,z+36);D.Csiz=C;var E=[];u=z+38;for(var G=0;G<C;G++){var H={precision:(a[u]&127)+1,
isSigned:!!(a[u]&128),XRsiz:a[u+1],YRsiz:a[u+1]},R=H,I=D;R.x0=Math.ceil(I.XOsiz/R.XRsiz);R.x1=Math.ceil(I.Xsiz/R.XRsiz);R.y0=Math.ceil(I.YOsiz/R.YRsiz);R.y1=Math.ceil(I.Ysiz/R.YRsiz);R.width=R.x1-R.x0;R.height=R.y1-R.y0;E.push(H)}q.SIZ=D;q.components=E;for(var J=void 0,P=q,ic=E,Z=P.SIZ,Ta=[],jc=Math.ceil((Z.Xsiz-Z.XTOsiz)/Z.XTsiz),kc=Math.ceil((Z.Ysiz-Z.YTOsiz)/Z.YTsiz),Ua=0;Ua<kc;Ua++)for(var Va=0;Va<jc;Va++)J={},J.tx0=Math.max(Z.XTOsiz+Va*Z.XTsiz,Z.XOsiz),J.ty0=Math.max(Z.YTOsiz+Ua*Z.YTsiz,Z.YOsiz),
J.tx1=Math.min(Z.XTOsiz+(Va+1)*Z.XTsiz,Z.Xsiz),J.ty1=Math.min(Z.YTOsiz+(Ua+1)*Z.YTsiz,Z.Ysiz),J.width=J.tx1-J.tx0,J.height=J.ty1-J.ty0,J.components=[],Ta.push(J);P.tiles=Ta;for(var Wa=0,lc=Z.Csiz;Wa<lc;Wa++)for(var Xa=ic[Wa],kb=0,mc=Ta.length;kb<mc;kb++){var ga={},J=Ta[kb];ga.tcx0=Math.ceil(J.tx0/Xa.XRsiz);ga.tcy0=Math.ceil(J.ty0/Xa.YRsiz);ga.tcx1=Math.ceil(J.tx1/Xa.XRsiz);ga.tcy1=Math.ceil(J.ty1/Xa.YRsiz);ga.width=ga.tcx1-ga.tcx0;ga.height=ga.tcy1-ga.tcy0;J.components[Wa]=ga}q.QCC=[];q.COC=[];break;
case 65372:var t=c(a,z),Ea={};u=z+2;y=a[u++];switch(y&31){case 0:x=8;B=!0;break;case 1:x=16;B=!1;break;case 2:x=16;B=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+y);}Ea.noQuantization=8===x;Ea.scalarExpounded=B;Ea.guardBits=y>>5;for(K=[];u<t+z;){var ha={};8===x?(ha.epsilon=a[u++]>>3,ha.mu=0):(ha.epsilon=a[u]>>3,ha.mu=(a[u]&7)<<8|a[u+1],u+=2);K.push(ha)}Ea.SPqcds=K;q.mainHeader?q.QCD=Ea:(q.currentTile.QCD=Ea,q.currentTile.QCC=[]);break;case 65373:var t=c(a,z),Fa={};u=z+2;var Ya;257>
q.SIZ.Csiz?Ya=a[u++]:(Ya=c(a,u),u+=2);y=a[u++];switch(y&31){case 0:x=8;B=!0;break;case 1:x=16;B=!1;break;case 2:x=16;B=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+y);}Fa.noQuantization=8===x;Fa.scalarExpounded=B;Fa.guardBits=y>>5;for(K=[];u<t+z;)ha={},8===x?(ha.epsilon=a[u++]>>3,ha.mu=0):(ha.epsilon=a[u]>>3,ha.mu=(a[u]&7)<<8|a[u+1],u+=2),K.push(ha);Fa.SPqcds=K;q.mainHeader?q.QCC[Ya]=Fa:q.currentTile.QCC[Ya]=Fa;break;case 65362:var t=c(a,z),V={};u=z+2;var lb=a[u++];V.entropyCoderWithCustomPrecincts=
!!(lb&1);V.sopMarkerUsed=!!(lb&2);V.ephMarkerUsed=!!(lb&4);V.progressionOrder=a[u++];V.layersCount=c(a,u);u+=2;V.multipleComponentTransform=a[u++];V.decompositionLevelsCount=a[u++];V.xcb=(a[u++]&15)+2;V.ycb=(a[u++]&15)+2;var Ga=a[u++];V.selectiveArithmeticCodingBypass=!!(Ga&1);V.resetContextProbabilities=!!(Ga&2);V.terminationOnEachCodingPass=!!(Ga&4);V.verticalyStripe=!!(Ga&8);V.predictableTermination=!!(Ga&16);V.segmentationSymbolUsed=!!(Ga&32);V.reversibleTransformation=a[u++];if(V.entropyCoderWithCustomPrecincts){for(var Ib=
[];u<t+z;){var Jb=a[u++];Ib.push({PPx:Jb&15,PPy:Jb>>4})}V.precinctsSizes=Ib}var wa=[];V.selectiveArithmeticCodingBypass&&wa.push("selectiveArithmeticCodingBypass");V.resetContextProbabilities&&wa.push("resetContextProbabilities");V.terminationOnEachCodingPass&&wa.push("terminationOnEachCodingPass");V.verticalyStripe&&wa.push("verticalyStripe");V.predictableTermination&&wa.push("predictableTermination");if(0<wa.length)throw r=!0,Error("JPX Error: Unsupported COD options ("+wa.join(", ")+")");q.mainHeader?
q.COD=V:(q.currentTile.COD=V,q.currentTile.COC=[]);break;case 65424:t=c(a,z);A={};A.index=c(a,z+2);A.length=e(a,z+4);A.dataEnd=A.length+z-2;A.partIndex=a[z+8];A.partsCount=a[z+9];q.mainHeader=!1;0===A.partIndex&&(A.COD=q.COD,A.COC=q.COC.slice(0),A.QCD=q.QCD,A.QCC=q.QCC.slice(0));q.currentTile=A;break;case 65427:A=q.currentTile;if(0===A.partIndex){for(var ma=q,nc=ma.SIZ.Csiz,Kb=ma.tiles[A.index],xa=0;xa<nc;xa++){var Lb=Kb.components[xa];Lb.quantizationParameters=void 0!==ma.currentTile.QCC[xa]?ma.currentTile.QCC[xa]:
ma.currentTile.QCD;Lb.codingStyleParameters=void 0!==ma.currentTile.COC[xa]?ma.currentTile.COC[xa]:ma.currentTile.COD}Kb.codingStyleDefaultParameters=ma.currentTile.COD;for(var da=q,ya=da.tiles[da.currentTile.index],oc=da.SIZ.Csiz,mb=0;mb<oc;mb++){for(var W=ya.components[mb],nb=W.codingStyleParameters.decompositionLevelsCount,Mb=[],Pa=[],za=0;za<=nb;za++){var na,Za=za,Aa=W.codingStyleParameters,ia={};Aa.entropyCoderWithCustomPrecincts?(ia.PPx=Aa.precinctsSizes[Za].PPx,ia.PPy=Aa.precinctsSizes[Za].PPy):
(ia.PPx=15,ia.PPy=15);ia.xcb_=0<Za?Math.min(Aa.xcb,ia.PPx-1):Math.min(Aa.xcb,ia.PPx);ia.ycb_=0<Za?Math.min(Aa.ycb,ia.PPy-1):Math.min(Aa.ycb,ia.PPy);na=ia;var X={},qa=1<<nb-za;X.trx0=Math.ceil(W.tcx0/qa);X.try0=Math.ceil(W.tcy0/qa);X.trx1=Math.ceil(W.tcx1/qa);X.try1=Math.ceil(W.tcy1/qa);X.resLevel=za;var ob=1<<na.PPx,pb=1<<na.PPy,Nb=0===X.resLevel,Ob=X.trx1>X.trx0?Math.ceil(X.trx1/ob)-Math.floor(X.trx0/ob):0,Pb=X.try1>X.try0?Math.ceil(X.try1/pb)-Math.floor(X.try0/pb):0;X.precinctParameters={precinctWidth:ob,
precinctHeight:pb,numprecinctswide:Ob,numprecinctshigh:Pb,numprecincts:Ob*Pb,precinctWidthInSubband:1<<na.PPx+(Nb?0:-1),precinctHeightInSubband:1<<na.PPy+(Nb?0:-1)};Mb.push(X);var T;if(0===za)T={type:"LL"},T.tbx0=Math.ceil(W.tcx0/qa),T.tby0=Math.ceil(W.tcy0/qa),T.tbx1=Math.ceil(W.tcx1/qa),T.tby1=Math.ceil(W.tcy1/qa),T.resolution=X,d(da,T,na),Pa.push(T),X.subbands=[T];else{var ea=1<<nb-za+1,$a=[];T={type:"HL"};T.tbx0=Math.ceil(W.tcx0/ea-.5);T.tby0=Math.ceil(W.tcy0/ea);T.tbx1=Math.ceil(W.tcx1/ea-.5);
T.tby1=Math.ceil(W.tcy1/ea);T.resolution=X;d(da,T,na);Pa.push(T);$a.push(T);T={type:"LH"};T.tbx0=Math.ceil(W.tcx0/ea);T.tby0=Math.ceil(W.tcy0/ea-.5);T.tbx1=Math.ceil(W.tcx1/ea);T.tby1=Math.ceil(W.tcy1/ea-.5);T.resolution=X;d(da,T,na);Pa.push(T);$a.push(T);T={type:"HH"};T.tbx0=Math.ceil(W.tcx0/ea-.5);T.tby0=Math.ceil(W.tcy0/ea-.5);T.tbx1=Math.ceil(W.tcx1/ea-.5);T.tby1=Math.ceil(W.tcy1/ea-.5);T.resolution=X;d(da,T,na);Pa.push(T);$a.push(T);X.subbands=$a}}W.resolutions=Mb;W.subbands=Pa}var Qb=ya.codingStyleDefaultParameters.progressionOrder;
switch(Qb){case 0:ya.packetsIterator=new h(da);break;case 1:ya.packetsIterator=new f(da);break;case 2:ya.packetsIterator=new l(da);break;case 3:ya.packetsIterator=new m(da);break;case 4:ya.packetsIterator=new n(da);break;default:throw Error("JPX Error: Unsupported progression order "+Qb);}}t=A.dataEnd-z;v(q,a,z,t);break;case 65365:case 65367:case 65368:case 65380:t=c(a,z);break;case 65363:throw Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw Error("JPX Error: Unknown codestream code: "+
w.toString(16));}z+=t}}catch(Rb){if(r||this.failOnCorruptedImage)throw Rb;p("Trying to recover from "+Rb.message)}for(var Sb=q.components,Ha=q.SIZ.Csiz,Tb=[],qb=0,pc=q.tiles.length;qb<pc;qb++){var rb=q.tiles[qb],Ba=[],fa;for(fa=0;fa<Ha;fa++){for(var qc=Ba,rc=fa,Ca=rb.components[fa],sb=Ca.codingStyleParameters,tb=Ca.quantizationParameters,sc=sb.decompositionLevelsCount,ab=tb.SPqcds,tc=tb.scalarExpounded,uc=tb.guardBits,vc=sb.segmentationSymbolUsed,wc=q.components[fa].precision,ub=sb.reversibleTransformation,
xc=ub?new M:new N,Ub=[],vb=0,Qa=0;Qa<=sc;Qa++){for(var Ia=Ca.resolutions[Qa],wb=Ia.trx1-Ia.trx0,Vb=Ia.try1-Ia.try0,Wb=new Float32Array(wb*Vb),xb=0,yc=Ia.subbands.length;xb<yc;xb++){var yb,bb;tc?(yb=ab[vb].mu,bb=ab[vb].epsilon,vb++):(yb=ab[0].mu,bb=ab[0].epsilon+(0<Qa?1-Qa:0));for(var Xb=Ia.subbands[xb],zc=L[Xb.type],Ac=Wb,Yb=wb,ra=Xb,Bc=ub?1:Math.pow(2,wc+zc-bb)*(1+yb/2048),zb=uc+bb-1,Zb=ub,Cc=vc,Dc=ra.tbx0,Ec=ra.tby0,cb=ra.tbx1-ra.tbx0,$b=ra.codeblocks,Fc="H"===ra.type.charAt(0)?1:0,Gc="H"===ra.type.charAt(1)?
Yb:0,Ab=0,Hc=$b.length;Ab<Hc;++Ab){var ka=$b[Ab],db=ka.tbx1_-ka.tbx0_,Bb=ka.tby1_-ka.tby0_;if(0!==db&&0!==Bb&&void 0!==ka.data){var oa,eb;oa=new F(db,Bb,ka.subbandType,ka.zeroBitPlanes,zb);eb=2;var fb=ka.data,Cb=0,ac=0,aa,gb,sa;aa=0;for(gb=fb.length;aa<gb;aa++)sa=fb[aa],Cb+=sa.end-sa.start,ac+=sa.codingpasses;var bc=new Uint8Array(Cb),Da=0;aa=0;for(gb=fb.length;aa<gb;aa++){sa=fb[aa];var cc=sa.data.subarray(sa.start,sa.end);bc.set(cc,Da);Da+=cc.length}var Ic=new k(bc,0,Cb);oa.setDecoder(Ic);for(aa=
0;aa<ac;aa++){switch(eb){case 0:oa.runSignificancePropogationPass();break;case 1:oa.runMagnitudeRefinementPass();break;case 2:oa.runCleanupPass(),Cc&&oa.checkSegmentationSymbol()}eb=(eb+1)%3}var Ra=ka.tbx0_-Dc+(ka.tby0_-Ec)*cb,Jc=oa.coefficentsSign,Kc=oa.coefficentsMagnitude,Lc=oa.bitsDecoded,Mc=Zb?0:.5,Db,ta,Eb,Da=0,Nc="LL"!==ra.type;for(aa=0;aa<Bb;aa++){var Oc=2*(Ra/cb|0)*(Yb-cb)+Fc+Gc;for(Db=0;Db<db;Db++)ta=Kc[Da],0!==ta&&(ta=(ta+Mc)*Bc,0!==Jc[Da]&&(ta=-ta),Eb=Lc[Da],Ac[Nc?Oc+(Ra<<1):Ra]=Zb&&Eb>=
zb?ta:ta*(1<<zb-Eb)),Ra++,Da++;Ra+=cb-db}}}}Ub.push({width:wb,height:Vb,items:Wb})}var Fb=xc.calculate(Ub,Ca.tcx0,Ca.tcy0);qc[rc]={left:Ca.tcx0,top:Ca.tcy0,width:Fb.width,height:Fb.height,items:Fb.items}}var Sa=Ba[0],pa=new Uint8Array(Sa.items.length*Ha),Pc={left:Sa.left,top:Sa.top,width:Sa.width,height:Sa.height,items:pa},ba,Ja,ja,hb,Gb,ca=0,Y,Ka,La,Ma,Na,ua,la,va,ib,jb;if(rb.codingStyleDefaultParameters.multipleComponentTransform){var dc=4===Ha,Hb=Ba[0].items,ec=Ba[1].items,fc=Ba[2].items,Qc=dc?
Ba[3].items:null;ba=Sb[0].precision-8;Ja=(128<<ba)+.5;ja=255*(1<<ba);Gb=.5*ja;hb=-Gb;var Rc=rb.components[0],gc=Ha-3;Ka=Hb.length;if(Rc.codingStyleParameters.reversibleTransformation)for(Y=0;Y<Ka;Y++,ca+=gc)La=Hb[Y]+Ja,Ma=ec[Y],Na=fc[Y],la=La-(Na+Ma>>2),ua=la+Na,va=la+Ma,pa[ca++]=0>=ua?0:ua>=ja?255:ua>>ba,pa[ca++]=0>=la?0:la>=ja?255:la>>ba,pa[ca++]=0>=va?0:va>=ja?255:va>>ba;else for(Y=0;Y<Ka;Y++,ca+=gc)La=Hb[Y]+Ja,Ma=ec[Y],Na=fc[Y],ua=La+1.402*Na,la=La-.34413*Ma-.71414*Na,va=La+1.772*Ma,pa[ca++]=
0>=ua?0:ua>=ja?255:ua>>ba,pa[ca++]=0>=la?0:la>=ja?255:la>>ba,pa[ca++]=0>=va?0:va>=ja?255:va>>ba;if(dc)for(Y=0,ca=3;Y<Ka;Y++,ca+=4)ib=Qc[Y],pa[ca]=ib<=hb?0:ib>=Gb?255:ib+Ja>>ba}else for(fa=0;fa<Ha;fa++){var hc=Ba[fa].items;ba=Sb[fa].precision-8;Ja=(128<<ba)+.5;ja=127.5*(1<<ba);hb=-ja;ca=fa;Y=0;for(Ka=hc.length;Y<Ka;Y++)jb=hc[Y],pa[ca]=jb<=hb?0:jb>=ja?255:jb+Ja>>ba,ca+=Ha}Tb.push(Pc)}this.tiles=Tb;this.width=q.SIZ.Xsiz-q.SIZ.XOsiz;this.height=q.SIZ.Ysiz-q.SIZ.YOsiz;this.componentsCount=q.SIZ.Csiz}};
var P=function(){function a(a,c){var d=b(Math.max(a,c))+1;this.levels=[];for(var e=0;e<d;e++)this.levels.push({width:a,height:c,items:[]}),a=Math.ceil(a/2),c=Math.ceil(c/2)}a.prototype={reset:function(a,b){for(var c=0,d=0,e;c<this.levels.length;){e=this.levels[c];var g=a+b*e.width;if(void 0!==e.items[g]){d=e.items[g];break}e.index=g;a>>=1;b>>=1;c++}c--;e=this.levels[c];e.items[e.index]=d;this.currentLevel=c;delete this.value},incrementValue:function(){var a=this.levels[this.currentLevel];a.items[a.index]++},
nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];a--;if(0>a)return this.value=c,!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return a}(),J=function(){function a(a,c,d){var e=b(Math.max(a,c))+1;this.levels=[];for(var g=0;g<e;g++){for(var h=new Uint8Array(a*c),f=0,k=h.length;f<k;f++)h[f]=d;this.levels.push({width:a,height:c,items:h});a=Math.ceil(a/2);c=Math.ceil(c/2)}}a.prototype={reset:function(a,b,c){for(var d=0;d<this.levels.length;){var e=
this.levels[d],g=a+b*e.width;e.index=g;e=e.items[g];if(255===e)break;if(e>c)return this.currentLevel=d,this.propagateValues(),!1;a>>=1;b>>=1;d++}this.currentLevel=d-1;return!0},incrementValue:function(a){var b=this.levels[this.currentLevel];b.items[b.index]=a+1;this.propagateValues()},propagateValues:function(){for(var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];0<=--a;)b=this.levels[a],b.items[b.index]=c},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];
b.items[b.index]=255;a--;if(0>a)return!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return a}(),F=function(){function a(a,e,g,h,f){this.width=a;this.height=e;this.contextLabelTable="HH"===g?d:"HL"===g?c:b;a*=e;this.neighborsSignificance=new Uint8Array(a);this.coefficentsSign=new Uint8Array(a);this.coefficentsMagnitude=14<f?new Uint32Array(a):6<f?new Uint16Array(a):new Uint8Array(a);this.processingFlags=new Uint8Array(a);f=new Uint8Array(a);if(0!==h)for(e=0;e<a;e++)f[e]=h;this.bitsDecoded=
f;this.reset()}var b=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),c=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),d=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,
0,0,8,8,8,0,8,8,8,0,8,8,8]);a.prototype={setDecoder:function(a){this.decoder=a},reset:function(){this.contexts=new Int8Array(19);this.contexts[0]=8;this.contexts[17]=92;this.contexts[18]=6},setNeighborsSignificance:function(a,b,c){var d=this.neighborsSignificance,e=this.width,g=this.height,h=0<b;b=b+1<e;var f;0<a&&(f=c-e,h&&(d[f-1]+=16),b&&(d[f+1]+=16),d[f]+=4);a+1<g&&(f=c+e,h&&(d[f-1]+=16),b&&(d[f+1]+=16),d[f]+=4);h&&(d[c-1]+=1);b&&(d[c+1]+=1);d[c]|=128},runSignificancePropogationPass:function(){for(var a=
this.decoder,b=this.width,c=this.height,d=this.coefficentsMagnitude,e=this.coefficentsSign,g=this.neighborsSignificance,f=this.processingFlags,h=this.contexts,k=this.contextLabelTable,l=this.bitsDecoded,m=0;m<c;m+=4)for(var n=0;n<b;n++)for(var p=m*b+n,q=0;4>q;q++,p+=b){var r=m+q;if(r>=c)break;f[p]&=-2;if(!d[p]&&g[p]){if(a.readBit(h,k[g[p]])){var t=this.decodeSignBit(r,n,p);e[p]=t;d[p]=1;this.setNeighborsSignificance(r,n,p);f[p]|=2}l[p]++;f[p]|=1}}},decodeSignBit:function(a,b,c){var d=this.width,e=
this.height,g=this.coefficentsMagnitude,f=this.coefficentsSign,h;h=0<b&&0!==g[c-1];b+1<d&&0!==g[c+1]?(b=f[c+1],h?(h=f[c-1],b=1-b-h):b=1-b-b):h?(h=f[c-1],b=1-h-h):b=0;var k=3*b;h=0<a&&0!==g[c-d];a+1<e&&0!==g[c+d]?(b=f[c+d],h?(h=f[c-d],b=1-b-h+k):b=1-b-b+k):h?(h=f[c-d],b=1-h-h+k):b=k;return 0<=b?this.decoder.readBit(this.contexts,9+b):this.decoder.readBit(this.contexts,9-b)^1},runMagnitudeRefinementPass:function(){for(var a=this.decoder,b=this.width,c=this.coefficentsMagnitude,d=this.neighborsSignificance,
e=this.contexts,g=this.bitsDecoded,h=this.processingFlags,f=b*this.height,k=4*b,l=0,m;l<f;l=m){m=Math.min(f,l+k);for(var n=0;n<b;n++)for(var p=l+n;p<m;p+=b)if(c[p]&&0===(h[p]&1)){var q=16;0!==(h[p]&2)&&(h[p]^=2,q=0===(d[p]&127)?15:14);q=a.readBit(e,q);c[p]=c[p]<<1|q;g[p]++;h[p]|=1}}},runCleanupPass:function(){for(var a=this.decoder,b=this.width,c=this.height,d=this.neighborsSignificance,e=this.coefficentsMagnitude,g=this.coefficentsSign,h=this.contexts,f=this.contextLabelTable,k=this.bitsDecoded,
l=this.processingFlags,m=2*b,n=3*b,p,q=0;q<c;q=p){p=Math.min(q+4,c);for(var r=q*b,t=q+3<c,u=0;u<b;u++){var z=r+u,w=0,v=z,y=q,x;if(t&&0===l[z]&&0===l[z+b]&&0===l[z+m]&&0===l[z+n]&&0===d[z]&&0===d[z+b]&&0===d[z+m]&&0===d[z+n]){if(!a.readBit(h,18)){k[z]++;k[z+b]++;k[z+m]++;k[z+n]++;continue}w=a.readBit(h,17)<<1|a.readBit(h,17);0!==w&&(y=q+w,v+=w*b);x=this.decodeSignBit(y,u,v);g[v]=x;e[v]=1;this.setNeighborsSignificance(y,u,v);l[v]|=2;v=z;for(z=q;z<=y;z++,v+=b)k[v]++;w++}for(y=q+w;y<p;y++,v+=b)e[v]||
0!==(l[v]&1)||(1===a.readBit(h,f[d[v]])&&(x=this.decodeSignBit(y,u,v),g[v]=x,e[v]=1,this.setNeighborsSignificance(y,u,v),l[v]|=2),k[v]++)}}},checkSegmentationSymbol:function(){var a=this.decoder,b=this.contexts;if(10!==(a.readBit(b,17)<<3|a.readBit(b,17)<<2|a.readBit(b,17)<<1|a.readBit(b,17)))throw Error("JPX Error: Invalid segmentation symbol");}};return a}(),I=function(){function a(){}a.prototype.calculate=function(a,b,c){for(var d=a[0],e=1,g=a.length;e<g;e++)d=this.iterate(d,a[e],b,c);return d};
a.prototype.extend=function(a,b,c){var d=b-1,e=b+1,g=b+c-2;b+=c;a[d--]=a[e++];a[b++]=a[g--];a[d--]=a[e++];a[b++]=a[g--];a[d--]=a[e++];a[b++]=a[g--];a[d]=a[e];a[b]=a[g]};a.prototype.iterate=function(a,b,c,d){var e=a.width,g=a.height,h=a.items,f=b.width,k=b.height;b=b.items;var l,m,n,p;for(l=n=0;l<g;l++)for(p=2*l*f,m=0;m<e;m++,n++,p+=2)b[p]=h[n];a.items=null;a=new Float32Array(f+8);if(1===f){if(0!==(c&1))for(n=p=0;p<k;p++,n+=f)b[n]*=.5}else for(n=p=0;p<k;p++,n+=f)a.set(b.subarray(n,n+f),4),this.extend(a,
4,f),this.filter(a,4,f),b.set(a.subarray(4,4+f),n);c=16;e=[];for(l=0;l<c;l++)e.push(new Float32Array(k+8));l=0;a=4+k;if(1===k){if(0!==(d&1))for(d=0;d<f;d++)b[d]*=.5}else for(d=0;d<f;d++){if(0===l){c=Math.min(f-d,c);n=d;for(p=4;p<a;n+=f,p++)for(g=0;g<c;g++)e[g][p]=b[n+g];l=c}l--;n=e[l];this.extend(n,4,k);this.filter(n,4,k);if(0===l)for(n=d-c+1,p=4;p<a;n+=f,p++)for(g=0;g<c;g++)b[n+g]=e[g][p]}return{width:f,height:k,items:b}};return a}(),N=function(){function a(){I.call(this)}a.prototype=Object.create(I.prototype);
a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d,e,g,f;d=b-3;for(e=c+4;e--;d+=2)a[d]*=.8128930661159609;d=b-2;g=.443506852043971*a[d-1];for(e=c+3;e--;d+=2)if(f=.443506852043971*a[d+1],a[d]=1.230174104914001*a[d]-g-f,e--)d+=2,g=.443506852043971*a[d+1],a[d]=1.230174104914001*a[d]-g-f;else break;d=b-1;g=.882911075530934*a[d-1];for(e=c+2;e--;d+=2)if(f=.882911075530934*a[d+1],a[d]-=g+f,e--)d+=2,g=.882911075530934*a[d+1],a[d]-=g+f;else break;d=b;g=-.052980118572961*a[d-1];for(e=c+1;e--;d+=2)if(f=-.052980118572961*
a[d+1],a[d]-=g+f,e--)d+=2,g=-.052980118572961*a[d+1],a[d]-=g+f;else break;if(0!==c)for(d=b+1,g=-1.586134342059924*a[d-1],e=c;e--;d+=2)if(f=-1.586134342059924*a[d+1],a[d]-=g+f,e--)d+=2,g=-1.586134342059924*a[d+1],a[d]-=g+f;else break};return a}(),M=function(){function a(){I.call(this)}a.prototype=Object.create(I.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d,e;d=b;for(e=c+1;e--;d+=2)a[d]-=a[d-1]+a[d+1]+2>>2;d=b+1;for(e=c;e--;d+=2)a[d]+=a[d-1]+a[d+1]>>1};return a}();return a}();"use strict";
var q=function(){function a(){}function d(a,b,c){this.data=a;this.start=b;this.end=c}function g(a,b,c){function d(a){for(var b=0,d=0;d<a;d++){var f=c.readBit(e,g);g=256>g?g<<1|f:(g<<1|f)&511|256;b=b<<1|f}return b>>>0}var e=a.getContexts(b),g=1;a=d(1);b=d(1)?d(1)?d(1)?d(1)?d(1)?d(32)+4436:d(12)+340:d(8)+84:d(6)+20:d(4)+4:d(2);return 0===a?b:0<b?-b:null}function h(a,b,c){a=a.getContexts("IAID");for(var d=1,e=0;e<c;e++)var g=b.readBit(a,d),d=d<<1|g;return 31>c?d&(1<<c)-1:d&2147483647}function l(a,b,
c){var d=c.decoder;c=c.contextCache.getContexts("GB");var e,g,f,h,k,l,m,n=[];for(g=0;g<b;g++)for(k=n[g]=new Uint8Array(a),l=1>g?k:n[g-1],m=2>g?k:n[g-2],e=m[0]<<13|m[1]<<12|m[2]<<11|l[0]<<7|l[1]<<6|l[2]<<5|l[3]<<4,f=0;f<a;f++)k[f]=h=d.readBit(c,e),e=(e&31735)<<1|(f+3<a?m[f+3]<<11:0)|(f+4<a?l[f+4]<<4:0)|h;return n}function m(a,b,c,d,e,g,f,h){a&&w("JBIG2 error: MMR encoding is not supported");if(0===d&&!g&&!e&&4===f.length&&3===f[0].x&&-1===f[0].y&&-3===f[1].x&&-1===f[1].y&&2===f[2].x&&-2===f[2].y&&
-2===f[3].x&&-2===f[3].y)return l(b,c,h);a=!!g;var k=P[d].concat(f);k.sort(function(a,b){return a.y-b.y||a.x-b.x});f=k.length;var m=new Int8Array(f),n=new Int8Array(f),p=[],q=0,r=0,u=0,t=0,v,z;for(z=0;z<f;z++)m[z]=k[z].x,n[z]=k[z].y,r=Math.min(r,k[z].x),u=Math.max(u,k[z].x),t=Math.min(t,k[z].y),z<f-1&&k[z].y===k[z+1].y&&k[z].x===k[z+1].x-1?q|=1<<f-1-z:p.push(z);var y=p.length,x=new Int8Array(y),A=new Int8Array(y),D=new Uint16Array(y);for(v=0;v<y;v++)z=p[v],x[v]=k[z].x,A[v]=k[z].y,D[v]=1<<f-1-z;k=
-r;t=-t;u=b-u;d=F[d];p=new Uint8Array(b);r=[];v=h.decoder;h=h.contextCache.getContexts("GB");for(var B=0,C,E,G,N=0,K,H=0;H<c;H++){if(e&&(z=v.readBit(h,d),B^=z)){r.push(p);continue}p=new Uint8Array(p);r.push(p);for(C=0;C<b;C++)if(a&&g[H][C])p[C]=0;else{if(C>=k&&C<u&&H>=t)for(N=N<<1&q,z=0;z<y;z++){if(E=H+A[z],G=C+x[z],E=r[E][G])E=D[z],N|=E}else for(N=0,K=f-1,z=0;z<f;z++,K--)G=C+m[z],0<=G&&G<b&&(E=H+n[z],0<=E&&(E=r[E][G])&&(N|=E<<K));z=v.readBit(h,N);p[C]=z}}return r}function n(a,b,c,d,e,g,f,h,k){var l=
J[c].coding;0===c&&(l=l.concat([h[0]]));var m=l.length,n=new Int32Array(m),p=new Int32Array(m),q;for(q=0;q<m;q++)n[q]=l[q].x,p[q]=l[q].y;var r=J[c].reference;0===c&&(r=r.concat([h[1]]));h=r.length;var l=new Int32Array(h),u=new Int32Array(h);for(q=0;q<h;q++)l[q]=r[q].x,u[q]=r[q].y;var r=d[0].length,t=d.length;c=I[c];var v=[],z=k.decoder;k=k.contextCache.getContexts("GR");for(var y=0,x=0;x<b;x++){f&&(q=z.readBit(k,c),(y^=q)&&w("JBIG2 error: prediction is not supported"));var A=new Uint8Array(a);v.push(A);
for(var D=0;D<a;D++){var B,C,E=0;for(q=0;q<m;q++)B=x+p[q],C=D+n[q],E=0>B||0>C||C>=a?E<<1:E<<1|v[B][C];for(q=0;q<h;q++)B=x+u[q]+g,C=D+l[q]+e,E=0>B||B>=t||0>C||C>=r?E<<1:E<<1|d[B][C];q=z.readBit(k,E);A[D]=q}}return v}function p(a,b,c,d,e,f,k,l,m,p,q,r,u,t,v,y,x){a&&w("JBIG2 error: huffman is not supported");a=[];var z;for(t=0;t<d;t++){z=new Uint8Array(c);if(e)for(var A=0;A<c;A++)z[A]=e;a.push(z)}d=x.decoder;e=x.contextCache;var A=-g(e,"IADT",d),D=0;for(t=0;t<f;){var B=g(e,"IADT",d),A=A+B,B=g(e,"IAFS",
d),B=D+=B;do{var C=1===k?0:g(e,"IAIT",d);z=k*A+C;var C=h(e,d,m),E=b&&g(e,"IARI",d),C=l[C],G=C[0].length,F=C.length;if(E)var E=g(e,"IARDW",d),N=g(e,"IARDH",d),H=g(e,"IARDX",d),K=g(e,"IARDY",d),G=G+E,F=F+N,C=n(G,F,v,C,(E>>1)+H,(N>>1)+K,!1,y,x);var E=z-(r&1?0:F),N=B-(r&2?G:0),I;if(p){for(H=0;H<F;H++)if(z=a[N+H]){I=C[H];var Q=Math.min(c-E,G);switch(u){case 0:for(K=0;K<Q;K++)z[E+K]|=I[K];break;case 2:for(K=0;K<Q;K++)z[E+K]^=I[K];break;default:w("JBIG2 error: operator "+u+" is not supported")}}B+=F-1}else{for(K=
0;K<F;K++)if(z=a[E+K])switch(I=C[K],u){case 0:for(H=0;H<G;H++)z[N+H]|=I[H];break;case 2:for(H=0;H<G;H++)z[N+H]^=I[H];break;default:w("JBIG2 error: operator "+u+" is not supported")}B+=G-1}t++;C=g(e,"IADS",d);if(null===C)break;B+=C+q}while(1)}return a}function q(a,b){return{width:e(a,b),height:e(a,b+4),x:e(a,b+8),y:e(a,b+12),combinationOperator:a[b+16]&7}}function u(){}function v(){}a.prototype={getContexts:function(a){return a in this?this[a]:this[a]=new Int8Array(65536)}};d.prototype={get decoder(){var a=
new k(this.data,this.start,this.end);return f(this,"decoder",a)},get contextCache(){var b=new a;return f(this,"contextCache",b)}};var L=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",
null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],P=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,
y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],J=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},
{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],F=[39717,1941,229,405],I=[32,8];u.prototype={onPageInformation:function(a){this.currentPageInfo=a;var b=new Uint8Array((a.width+7>>3)*a.height);if(a.defaultPixelValue){a=0;for(var c=b.length;a<c;a++)b[a]=255}this.buffer=b},drawBitmap:function(a,b){var c=this.currentPageInfo,d=a.width,e=a.height,g=c.width+7>>3,f=c.combinationOperatorOverride?a.combinationOperator:c.combinationOperator,c=this.buffer,h=128>>(a.x&
7);a=a.y*g+(a.x>>3);var k,l,m;switch(f){case 0:for(f=0;f<e;f++){l=h;m=a;for(k=0;k<d;k++)b[f][k]&&(c[m]|=l),l>>=1,l||(l=128,m++);a+=g}break;case 2:for(f=0;f<e;f++){l=h;m=a;for(k=0;k<d;k++)b[f][k]&&(c[m]^=l),l>>=1,l||(l=128,m++);a+=g}break;default:w("JBIG2 error: operator "+f+" is not supported")}},onImmediateGenericRegion:function(a,b,c,e){var g=a.info;b=new d(b,c,e);a=m(a.mmr,g.width,g.height,a.template,a.prediction,null,a.at,b);this.drawBitmap(g,a)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,
arguments)},onSymbolDictionary:function(a,c,e,f,k,l){a.huffman&&w("JBIG2 error: huffman is not supported");var q=this.symbols;q||(this.symbols=q={});for(var r=[],u=0,t=e.length;u<t;u++)r=r.concat(q[e[u]]);l=new d(f,k,l);u=a.huffman;t=a.refinement;e=r;var r=a.numberOfNewSymbols,v=a.template,z=a.at,y=a.refinementTemplate,x=a.refinementAt;u&&w("JBIG2 error: huffman is not supported");a=[];var A=0,D=b(e.length+r);f=l.decoder;for(k=l.contextCache;a.length<r;)for(var C=g(k,"IADH",f),A=A+C,C=0;;){var B=
g(k,"IADW",f);if(null===B)break;C+=B;if(t)if(B=g(k,"IAAI",f),1<B)B=p(u,t,C,A,0,B,1,e.concat(a),D,0,0,1,0,void 0,y,x,l);else var B=h(k,f,D),E=g(k,"IARDX",f),G=g(k,"IARDY",f),B=n(C,A,y,B<e.length?e[B]:a[B-e.length],E,G,!1,x,l);else B=m(!1,C,A,v,!1,null,z,l);a.push(B)}l=[];u=[];t=!1;for(v=e.length+r;u.length<v;){for(z=g(k,"IAEX",f);z--;)u.push(t);t=!t}f=0;for(k=e.length;f<k;f++)u[f]&&l.push(e[f]);for(e=0;e<r;f++,e++)u[f]&&l.push(a[e]);q[c]=l},onImmediateTextRegion:function(a,c,e,g,f){for(var h=a.info,
k=this.symbols,l=[],m=0,n=c.length;m<n;m++)l=l.concat(k[c[m]]);c=b(l.length);e=new d(e,g,f);a=p(a.huffman,a.refinement,h.width,h.height,a.defaultPixelValue,a.numberOfSymbolInstances,a.stripSize,l,c,a.transposed,a.dsOffset,a.referenceCorner,a.combinationOperator,void 0,a.refinementTemplate,a.refinementAt,e);this.drawBitmap(h,a)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}};v.prototype={parseChunks:function(a){for(var b=new u,d=0,g=a.length;d<g;d++){for(var f=
a[d],h={},k=f.data,l=f.end,m=[],n=f.start;n<l;){var p,r,f=k,t=n,n={};n.number=e(f,t);p=f[t+4];var v=p&63;L[v]||w("JBIG2 error: invalid segment type: "+v);n.type=v;n.typeName=L[v];n.deferredNonRetain=!!(p&128);p=!!(p&64);var y=f[t+5],x=y>>5&7;r=[y&31];t+=6;if(7===y)for(x=e(f,t-1)&536870911,t+=3,y=x+7>>3,r[0]=f[t++];0<--y;)r.push(f[t++]);else 5!==y&&6!==y||w("JBIG2 error: invalid referred-to flags");n.retainBits=r;var y=256>=n.number?1:65536>=n.number?2:4,A=[];for(r=0;r<x;r++){var B=1===y?f[t]:2===
y?c(f,t):e(f,t);A.push(B);t+=y}n.referredTo=A;p?(n.pageAssociation=e(f,t),t+=4):n.pageAssociation=f[t++];n.length=e(f,t);t+=4;if(4294967295===n.length)if(38===v){p=q(f,t);x=!!(f[t+17]&1);v=new Uint8Array(6);x||(v[0]=255,v[1]=172);v[2]=p.height>>>24&255;v[3]=p.height>>16&255;v[4]=p.height>>8&255;v[5]=p.height&255;r=t;for(p=f.length;r<p;r++){for(x=0;6>x&&v[x]===f[r+x];)x++;if(6===x){n.length=r+6;break}}4294967295===n.length&&w("JBIG2 error: segment end was not found")}else w("JBIG2 error: invalid unknown segment length");
n.headerEnd=t;f=n;n=f.headerEnd;t={header:f,data:k};h.randomAccess||(t.start=n,n+=f.length,t.end=n);m.push(t);if(51===f.type)break}if(h.randomAccess)for(h=0,k=m.length;h<k;h++)m[h].start=n,n+=m[h].header.length,m[h].end=n;h=b;k=0;for(l=m.length;k<l;k++){x=void 0;p=m[k];f=h;n=p.header;t=p.data;v=p.start;p=p.end;switch(n.type){case 0:A={};x=c(t,v);A.huffman=!!(x&1);A.refinement=!!(x&2);A.huffmanDHSelector=x>>2&3;A.huffmanDWSelector=x>>4&3;A.bitmapSizeSelector=x>>6&1;A.aggregationInstancesSelector=x>>
7&1;A.bitmapCodingContextUsed=!!(x&256);A.bitmapCodingContextRetained=!!(x&512);A.template=x>>10&3;A.refinementTemplate=x>>12&1;v+=2;if(!A.huffman){y=0===A.template?4:1;r=[];for(x=0;x<y;x++)r.push({x:t[v]<<24>>24,y:t[v+1]<<24>>24}),v+=2;A.at=r}if(A.refinement&&!A.refinementTemplate){r=[];for(x=0;2>x;x++)r.push({x:t[v]<<24>>24,y:t[v+1]<<24>>24}),v+=2;A.refinementAt=r}A.numberOfExportedSymbols=e(t,v);v+=4;A.numberOfNewSymbols=e(t,v);x=[A,n.number,n.referredTo,t,v+4,p];break;case 6:case 7:y={};y.info=
q(t,v);v+=17;x=c(t,v);v+=2;y.huffman=!!(x&1);y.refinement=!!(x&2);y.stripSize=1<<(x>>2&3);y.referenceCorner=x>>4&3;y.transposed=!!(x&64);y.combinationOperator=x>>7&3;y.defaultPixelValue=x>>9&1;y.dsOffset=x<<17>>27;y.refinementTemplate=x>>15&1;y.huffman&&(x=c(t,v),v+=2,y.huffmanFS=x&3,y.huffmanDS=x>>2&3,y.huffmanDT=x>>4&3,y.huffmanRefinementDW=x>>6&3,y.huffmanRefinementDH=x>>8&3,y.huffmanRefinementDX=x>>10&3,y.huffmanRefinementDY=x>>12&3,y.huffmanRefinementSizeSelector=!!(x&14));if(y.refinement&&!y.refinementTemplate){r=
[];for(x=0;2>x;x++)r.push({x:t[v]<<24>>24,y:t[v+1]<<24>>24}),v+=2;y.refinementAt=r}y.numberOfSymbolInstances=e(t,v);v+=4;y.huffman&&w("JBIG2 error: huffman is not supported");x=[y,n.referredTo,t,v,p];break;case 38:case 39:A={};A.info=q(t,v);v+=17;x=t[v++];A.mmr=!!(x&1);A.template=x>>1&3;A.prediction=!!(x&8);if(!A.mmr){y=0===A.template?4:1;r=[];for(x=0;x<y;x++)r.push({x:t[v]<<24>>24,y:t[v+1]<<24>>24}),v+=2;A.at=r}x=[A,t,v,p];break;case 48:p={width:e(t,v),height:e(t,v+4),resolutionX:e(t,v+8),resolutionY:e(t,
v+12)};4294967295===p.height&&delete p.height;x=t[v+16];c(t,v+17);p.lossless=!!(x&1);p.refinement=!!(x&2);p.defaultPixelValue=x>>2&1;p.combinationOperator=x>>3&3;p.requiresBuffer=!!(x&32);p.combinationOperatorOverride=!!(x&64);x=[p];break;case 49:break;case 50:break;case 51:break;case 62:break;default:w("JBIG2 error: segment type "+n.typeName+"("+n.type+") is not implemented")}n="on"+n.typeName;n in f&&f[n].apply(f,x)}}return b}};return v}(),w=function(){console.error.apply(console,arguments);throw Error("PDFJS error: "+
arguments[0]);},p=function(){console.warn.apply(console,arguments)},u=function(){console.info.apply(console,arguments)};q.prototype.parse=function(a){var b=0,c=a.length;151===a[b]&&74===a[b+1]&&66===a[b+2]&&50===a[b+3]&&13===a[b+4]&&10===a[b+5]&&26===a[b+6]&&10===a[b+7]||w("JBIG2 error: invalid header");b+=8;a[b++]&2||(e(a,b),b+=4);a=this.parseChunks([{data:a,start:b,end:c}]);var b=a.currentPageInfo.width,c=a.currentPageInfo.height,d=a.buffer;a=new Uint8Array(b*c);for(var f=0,g=0,h=0;h<c;h++)for(var k=
0,l,m=0;m<b;m++)k||(k=128,l=d[g++]),a[f++]=l&k?0:255,k>>=1;this.width=b;this.height=c;this.data=a};a.JpegImage=g;a.JpxImage=m;a.Jbig2Image=q})(c||(c={}));m.exports={JpegImage:k,JpegDecoder:c.JpegImage,JpxDecoder:c.JpxImage,Jbig2Decoder:c.Jbig2Image}},function(m,k,g){g(31);g(1);g(3);g(48);g(30);g(50);g(55);g(52);g(53);g(54);g(51);g(56);m.exports=g(49)}]);
